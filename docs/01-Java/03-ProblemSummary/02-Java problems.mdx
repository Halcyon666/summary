# Java问题汇总

## Spring Boot相关问题

### 启动问题

#### Springboot启动时报错 org.springframework.boot不存在

***建议采用方法二在终端中输入`mvn idea:idea`，方法一在Spring Boot 项目中，运行其他Main方法测试类的时候会重新启动SpringBoot 工程，如果你还从ApplicationContext中获取，那么将会收到报错容器已经关闭。***
[参见博客](https://blog.csdn.net/qq_35456400/article/details/107190640)

#### spring boot源码运行SpringApplication时报错

Could not find artifact lifecycle-mapping:lifecycle-mapping:jar:sources:1.0.0
[参见博客 已经要付费看了！无语](https://blog.csdn.net/awecoder/article/details/101159870)

#### gradle spring boot 3.0 导入报错

[无效的源发行版: 17](https://stackoverflow.com/questions/69696321/intellij-invalid-source-release-17)

确保gradle的版本JDK 17 和 JDK 的版本正确。

![image-20230728021351697](https://s2.loli.net/2023/07/28/UzsD4BnrPYSbo1T.png)

### 日志相关

#### 启动控制台日志没有颜色

在spring-logback.xml中引入
```xml
<include resource="org/springframework/boot/logging/logback/base.xml"/>
<logger name="org.springframework.web" level="INFO"/>
<logger name="org.springboot.sample" level="TRACE"/>
```

#### logback 修改日志打印内容

代码: extends ThrowableHandlingConverter
impl convert 方法

logback配置
```xml
<conversionRule convertionWord="someKeyMsg" convertClass="com.xxx.xxx.Xclass"/>
```

### 打包问题

#### after run the packaged jar occurs this unable to find main class

方法1. 替换插件
```xml
<!--<plugin>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-maven-plugin</artifactId>
	<configuration>
		<mainClass>none</mainClass>
		<classifier>execute</classifier>
	</configuration>
	<executions>
		<execution>
			<goals>
				<goal>repackage</goal>
			</goals>
		</execution>
	</executions>
</plugin>-->
<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-source-plugin</artifactId>
	<version>3.0.1</version>
	<executions>
		<execution>
			<id>attach-sources</id>
			<goals>
				<goal>jar</goal>
			</goals>
		</execution>
	</executions>
</plugin>
```

方法2: 去掉spring-boot parent，再使用spring boot plugin 打包

---

## Maven相关问题

### 处理Maven远程仓库下载不到jar包问题

*先去[Maven Repository](https://mvnrepository.com/)找到对应的依赖，并下载。*

*去下载目录下执行如下命令，注意替换掉-DgroupId，-DartifactId，-Dversion，-Dfile*

```shell
mvn install:install-file -DgroupId=io.confluent -DartifactId=kafka-schema-registry-client -Dversion=4.1.0 -Dpackaging=jar  -Dfile=kafka-schema-registry-client-4.1.0.jar
```

### mvnw clean occurs Some Enforcer rules have failed

```log
Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:1.4.1:enforce
(enforce-versions) on project SIMI: Some Enforcer rules have failed. Look above for
specific messages explaining why the rule failed. -> [Help 1]
```

[not solved! stackoverflow  website](https://stackoverflow.com/questions/45337558/failed-to-execute-goal-org-apache-maven-pluginsmaven-enforcer-plugin?newreg=4546ba2b3da24e02908324ea31452cb8)

To skip enforcer (not always working)
```bash
mvn clean install -Denforcer.skip=true
```

To continue the build if error
```bash
mvn clean install -Denforcer.fail=false
```

```bash
./mvnw clean install -DskipDistribution=true  -Denforcer.skip=true
```

---

## MyBatis相关问题

### SQL查询时 null值封装回int类型报 UncategorizedSQLException

将BO属性从int改为Integer类型

```
org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation; 
uncategorized SQLException for SQL []; SQL state [null]; error code [0];
```

### Mysql tinyint有毒

mysql 不要使用字段类型tinyint 可能你更新的1会变成49哦

[参见博客](https://www.huaweicloud.com/articles/11968406.html)

### MybatisPlus 出现 Invalid bound statement (not found) 异常

[参见文章](https://baomidou.com/pages/f84a74/#%E5%87%BA%E7%8E%B0-invalid-bound-statement-not-found-%E5%BC%82%E5%B8%B8)

---

## IDEA使用相关问题

### idea terminal 中文乱码问题

[参考文章](https://blog.csdn.net/xgw1010/article/details/108583796)

```bash
# solve idea terminal Chinese garbled
export LANG="zh_CN.UTF-8"
export LC_ALL="zh_CN.UTF-8"
```

---

## 其他问题

### 动态数据源问题

如果所用的操作有事务，则需要在Dao层之前，对数据源进行设置，在Dao或者Mybatis-plus中的带dao的service都会切换数据源失效。

### boolean改为Boolean可能遇到的问题

代码优化时，原始类型改成包装类型时，如果是Spring 注入的方式，注意默认值会有变化，boolean默认值为false，包装类为null，可能会造成空指针异常。

boolean 改为Boolean值，某些场景（netty 不响应请求)会有问题。

处理：给Boolean类赋值false
