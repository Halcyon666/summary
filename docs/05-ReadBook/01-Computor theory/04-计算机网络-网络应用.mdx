# 计算机网络 - 网络应用

## 接入网络应用类型

`CS` 客户/服务器

`P2P` 对等应用 场景：文件共享  特点：高度可伸缩 难以管理

混合结构： ？Napster 文件传输`P2P` 文件搜索采用C/S结构

![20250920190143](https://s2.loli.net/2025/09/20/kLOUGnIibsJwNTz.png)

网络应用对传输要求 

- 可靠性
- 时延
- 带宽
- 安全

![20250920190156](https://s2.loli.net/2025/09/20/sBvugpLGE31WoH7.png)

---

![20250920190215](https://s2.loli.net/2025/09/20/hWbg1crF9JHSopt.png)

![20250920190229](https://s2.loli.net/2025/09/20/NTou3qg1dFBDJRz.png)

Web: `Http 1.0` `Http1.1`

Email: `SMTP MIME` `POP3` `IMAP` (`IMAP`有状态协议)

## 域名解析系统`DNS`

- 多层命名服务器构成的分布式数据库
- 应用层协议：完成名字解析
- `DNS`服务
    
    域名翻译
    主机别名
    邮件服务器别名
    负载均衡
    

`Local DNS` （如ISP提供的）

`Root DNS`

`TLD DNS` （权威域名服务器）

递归查询 （只用一次）

迭代查询（多次）

缓存、更新（`TTL`过期更新）

## `DNS`记录（RR）

`RR format: (name, value, ttl)`

- Type=A
Name: 主机域名
Value: IP地址
- Type=NS
Name: 域(如`edu.com`)
Value: 该域权威域名解析服务器的主机域名
- Type=`CNAME`
Name: 某一真实域名的别名
Value: 真实域名
- Type=`MX`
Value是与Name相对应的邮件服务器

Q：如何注册一个域名？

A: NS、A 、NS(需要邮件)`RR`

## `P2P`应用

### 覆盖网络

洪泛式查询：覆盖网络

![20250920190253](https://s2.loli.net/2025/09/20/Q8J7yGCxYPgVq6p.png)

### 层次式覆盖网络

![20250920190303](https://s2.loli.net/2025/09/20/PwECUQX7S3H4tG9.png)

## Socket编程

![20250920190342](https://s2.loli.net/2025/09/20/MGSlOimpD63oYq7.png)

标识通信端点（对外）：`IP` `PORT`

操作竹编/进程(对内)：套接字描述符，**是**进程内的整数索引

```bash
# 查询80端口有哪些套接字连接
netstat -ano | findstr ":80"
# 查询所在里程是哪个程序 
tasklist /FI "PID eq 6016"

tasklist  | findstr 6016
```

winsocket为例

`socketaddr_in`

### socket

![20250920190400](https://s2.loli.net/2025/09/20/u6Zi7JrHNFMSG2w.png)

![20250920190426](https://s2.loli.net/2025/09/20/KDduNlPrUtnqvBW.png)

### closesocket

![20250920190436](https://s2.loli.net/2025/09/20/yUMvTgWebBQNrZf.png)

### bind

![20250920190509](https://s2.loli.net/2025/09/20/t9XrHSznf4uKVmT.png)

![20250920190649](https://s2.loli.net/2025/09/20/U6Nwg2mXpQByMYT.png)

![20250920190703](https://s2.loli.net/2025/09/20/e95x7iKtmSI1RDr.png)

### listen(server)

![20250920190720](https://s2.loli.net/2025/09/20/K3pv2RxNaeVJOQA.png)

connect(client)

![20250920190743](https://s2.loli.net/2025/09/20/Wjyra2wheMg64un.png)

> `TCP`调用connect成功了一定可以进行通信，`UDP`就不一定了。
> 

### accept(server)

![20250920190805](https://s2.loli.net/2025/09/20/Wjyra2wheMg64un.png)

### send sendto

![20250920190820](https://s2.loli.net/2025/09/20/WMRTLZaVj5AJHkx.png)

### recv recvfrom

![20250920190831](https://s2.loli.net/2025/09/20/gojBGcUdFqyi71v.png)

*setsockopt getsokopt*

### 网络字节顺序

![20250920190916](https://s2.loli.net/2025/09/20/kai69Wezu8bFXBM.png)

Inet_addr把10进制的IP地址转化成32位的IP地址。

### Socket API(TCP)调用基本过程

![20250920190932](https://s2.loli.net/2025/09/20/NzewD7iuJLOB5WR.png)

服务端：解析IP、端口、协议号 

TCP客户端：

![20250920190945](https://s2.loli.net/2025/09/20/yJHQStjDLZM29WX.png)

UDP客户端：

![20250920190959](https://s2.loli.net/2025/09/20/nFZYIfXvzh6oLBj.png)


**所有内容来自，保留所有课程著作权限。文档仅限学习使用。**

**如有侵权联系  `whalefallcl@icloud.com`**

**https://www.icourse163.org/learn/HIT-154005?tid=1474180488#/learn/announce**


import TailProtocal from "@site/src/components/TailProtocal";

<TailProtocal />