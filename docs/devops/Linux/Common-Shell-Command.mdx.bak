---
title: "Shell Common Commands"
sidebar_label: "ðŸš Shell Commands"
sidebar_position: 1
description: "Common shell commands, grep patterns, crontab, and Linux utilities"
---

# shellåŸºç¡€å‘½ä»¤

## å¿«é€Ÿå†™å…¥æ–‡ä»¶

1. æ–¹æ³•ä¸€
```shell script
cat > a.txt << 'EOF'
afasdf
EOF
```

2. æ–¹æ³•äºŒ

```shell script
tee a.txt <<- 'EOF'
	afsafdsf
	EOF	
```

## linuxç³»ç»Ÿ å®šæ—¶åŒæ­¥ç½‘ç»œæ—¶é—´

[å‚è€ƒæ–‡ç« ](https://www.cnblogs.com/jichuang/p/13542177.html)

```shell
# è®¾ç½®å®šæ—¶ä»»åŠ¡
crontab -e 
*/5 * * * * ntpdate time.nist.gov

# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡åˆ—è¡¨
crontab -l

# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ—¥å¿—
tail -f /var/log/cron

# å‡ ä¸ªæ—¶é—´æœåŠ¡å™¨
ntpdate time.nist.gov
ntpdate time.nuri.net
ntpdate 0.asia.pool.ntp.org
ntpdate 1.asia.pool.ntp.org
ntpdate 2.asia.pool.ntp.org
ntpdate 3.asia.pool.ntp.org

```

[crontabå®šæ—¶ä»»åŠ¡å‚æ•°å«ä¹‰](https://tool.lu/crontab)

| å­—æ®µ         | æ˜¯å¦å¿…å¡« | å…è®¸å€¼          | å…è®¸ç‰¹æ®Šå­—ç¬¦       | å¤‡æ³¨                                                         |
| :----------- | :------- | :-------------- | :----------------- | :----------------------------------------------------------- |
| Seconds      | æ˜¯       | 0â€“59            | `*``,``-`          | æ ‡å‡†å®žçŽ°ä¸æ”¯æŒæ­¤å­—æ®µã€‚                                       |
| Minutes      | æ˜¯       | 0â€“59            | `*``,``-`          |                                                              |
| Hours        | æ˜¯       | 0â€“23            | `*``,``-`          |                                                              |
| Day of month | æ˜¯       | 1â€“31            | `*``,``-``?``L``W` | `?``L``W`åªæœ‰éƒ¨åˆ†è½¯ä»¶å®žçŽ°äº†                                  |
| Month        | æ˜¯       | 1â€“12 or JANâ€“DEC | `*``,``-`          |                                                              |
| Day of week  | æ˜¯       | 0â€“7 or SUNâ€“SAT  | `*``,``-``?``L``#` | `?``L``#`åªæœ‰éƒ¨åˆ†è½¯ä»¶å®žçŽ°äº† Linuxå’ŒSpringçš„å…è®¸å€¼ä¸º0-7ï¼Œ0å’Œ7ä¸ºå‘¨æ—¥ Quartzçš„å…è®¸å€¼ä¸º1-7ï¼Œ1ä¸ºå‘¨æ—¥ |
| Year         | å¦       | 1970â€“2099       | `*``,``-`          | æ ‡å‡†å®žçŽ°ä¸æ”¯æŒæ­¤å­—æ®µã€‚                                       |

## vmware è®¾ç½®ç½‘ç»œ

æ³¨æ„æœ€å¥½ä½¿ç”¨ vmware 15, vmware 16çš„ç‰ˆæœ¬ç½‘ç»œå¥½åƒæœ‰é—®é¢˜ã€‚

![image-20211216221256892](https://s2.loli.net/2023/07/15/FPTm7eqMnoli6Yr.png)

![image-20211216221335326](https://s2.loli.net/2023/07/15/OpiwWHFrGackYZL.png)

## æŸ¥è¯¢å½“å‰æ–‡ä»¶å¤¹æ€»å¤§å°

```sehll
du -sh ./
```

## æŸ¥è¯¢å½“å‰ç›®å½•ç»“æž„å‰nçº§ç›®å½•æ ‘

æ˜¾ç¤º ç¬¬ä¸€çº§ç›®å½• `for /d %i in (*) do @echo %i`

## å®‰è£… lrzsz

`yum install -y lrzsz`

sz ä¸‹è½½ rz ä¸Šä¼ 

## linuxå…³é—­javaè¿›ç¨‹

`kill -9 $(ps -ef | grep -w "xxx-1.0.jar" |  grep -v "grep" | awk '{print $2}')`


## grepå‘½ä»¤

### 1ï¸âƒ£ åŸºæœ¬å‘½ä»¤

```
grep [options] PATTERN FILE
```

- æœç´¢æ–‡ä»¶ä¸­åŒ…å« `PATTERN` çš„è¡Œ
- å¸¸ç”¨é€‰é¡¹ï¼š
  - `-i` â†’ å¿½ç•¥å¤§å°å†™
  - `-v` â†’ åå‘åŒ¹é…ï¼ˆä¸åŒ…å« PATTERN çš„è¡Œï¼‰
  - `-n` â†’ æ˜¾ç¤ºè¡Œå·
  - `-r` / `-R` â†’ é€’å½’æœç´¢ç›®å½•
  - `-E` â†’ å¯ç”¨ **æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼**ï¼ˆEREï¼‰

------

### 2ï¸âƒ£ åŸºæœ¬ç¤ºä¾‹

2.1 åŒ¹é…å…³é”®å­—

```
grep "error" logfile.txt
```

åŒ¹é…åŒ…å« `"error"` çš„è¡Œ

------

2.2 å¿½ç•¥å¤§å°å†™

```
grep -i "error" logfile.txt
```

åŒ¹é… `"error"`ã€`"Error"`ã€`"ERROR"` ç­‰

------

2.3 æ˜¾ç¤ºè¡Œå·

```
grep -n "error" logfile.txt
```

è¾“å‡ºè¡Œå· + è¡Œå†…å®¹

------

2.4 åå‘åŒ¹é…

```shell
# è¾“å‡º**ä¸åŒ…å« `error`** çš„è¡Œ
grep -v "error" logfile.txt
# åŒ…å«aä¸å«bçš„è¡Œè®°å½•
awk '/a/ && !/b/' logfile.txt
grep "a" logfile.txt | grep -v "b"
```

------

2.5 é€’å½’æœç´¢ç›®å½•

```
grep -r "TODO" ./src
```

æœç´¢ `src` ç›®å½•åŠå­ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶

------

### 3ï¸âƒ£ `grep -E` æ‰©å±•æ­£åˆ™

- æ”¯æŒæ›´å¼ºå¤§çš„æ­£åˆ™è¯­æ³•ï¼š
  - `|` â†’ æˆ–
  - `+` â†’ å‰ä¸€ä¸ªå­—ç¬¦ 1 æ¬¡æˆ–å¤šæ¬¡
  - `?` â†’ å‰ä¸€ä¸ªå­—ç¬¦ 0 æ¬¡æˆ– 1 æ¬¡
  - `()` â†’ åˆ†ç»„
- æ— éœ€åƒæ™®é€š grep é‚£æ ·ä½¿ç”¨åæ–œæ è½¬ä¹‰

------

3.1 åŒ¹é…å¤šä¸ªå…³é”®å­—

```
grep -E "error|fail|fatal" logfile.txt
```

åŒ¹é… `"error"`ã€`"fail"` æˆ– `"fatal"`

------

3.2 åŒ¹é…é‡å¤å­—ç¬¦

```
echo -e "aaa\naa\nb" | grep -E "a+"
```

åŒ¹é… 1 ä¸ªæˆ–ä»¥ä¸Šè¿žç»­ `a`
 è¾“å‡ºï¼š

```
aaa
aa
```

------

3.3 å¯é€‰å­—ç¬¦

```
echo -e "color\ncolour" | grep -E "colou?r"
```

`u?` â†’ `u` å¯å‡ºçŽ° 0 æˆ– 1 æ¬¡
 è¾“å‡ºï¼š

```
color
colour
```

------

3.4 åˆ†ç»„åŒ¹é…

```
echo -e "cat\nbat\nrat" | grep -E "(c|b)at"
```

åŒ¹é… `"cat"` æˆ– `"bat"`
 è¾“å‡ºï¼š

```
cat
bat
```

------

3.5 è¡Œå· + å¿½ç•¥å¤§å°å†™

```
grep -Eni "error|fail" logfile.txt
```

- `-n` â†’ è¡Œå·
- `-i` â†’ å¿½ç•¥å¤§å°å†™
- `-E` â†’ æ‰©å±•æ­£åˆ™

------

3.6 å¤æ‚ç¤ºä¾‹

```
grep -E '(error|fail|fatal) [0-9]{3}' logfile.txt
```

è§£æžï¼š

- `(error|fail|fatal)` â†’ åŒ¹é… `error`ã€`fail` æˆ– `fatal`
- ` ` â†’ ç©ºæ ¼
- `[0-9]{3}` â†’ åŒ¹é… **ä¸‰ä½æ•°å­—**
- è¾“å‡ºæ•´è¡ŒåŒ¹é…å†…å®¹

------

### 4ï¸âƒ£ åŒ¹é… pip list ç¤ºä¾‹ï¼ˆç»“åˆæ‰©å±•æ­£åˆ™ï¼‰

å‡è®¾ä½ æœ‰ Python åŒ…åˆ—è¡¨ï¼š

```
pip list | grep -E "sentence"
# è¾“å‡ºï¼š
# sentence-transformers                    5.1.0
```

å¦‚æžœæƒ³åŒ¹é… `sentence-transformers`ï¼Œç”¨ `.*` é€šé…ï¼š

```
pip list | grep -E "sentence.*transformers"
```

------

### 5ï¸âƒ£ å°æŠ€å·§

1. æ¨¡å¼ç”¨å•å¼•å· `'...'` åŒ…è£¹ï¼Œé¿å… shell è½¬ä¹‰
2. åŒ¹é…æ•´ä¸ªå•è¯ï¼š`\bpattern\b`
3. åŒ¹é…æ•°å­—ï¼š`[0-9]+`
4. åŒ¹é…ä»»æ„å­—ç¬¦ï¼š`.`
5. åŒ¹é…é‡å¤å­—ç¬¦ï¼š`+` / `{n,m}`

------

âœ… **æ€»ç»“**

- `grep` â†’ åŸºç¡€æœç´¢
- `grep -E` â†’ æ‰©å±•æ­£åˆ™ï¼Œæ”¯æŒ `|`, `+`, `?`, `()`
- å¯ç»„åˆé€‰é¡¹ï¼š`-i`, `-v`, `-n`, `-r`
- å¸¸ç”¨æŠ€å·§ï¼šå•å¼•å·åŒ…è£¹ã€`.*` é€šé…ã€`[- ]` åŒ¹é…å¤šç§åˆ†éš”

import TailProtocal from "@site/src/components/TailProtocal";

<TailProtocal />
