# Basic React

##  新建react项目

```shell 
npm create vite@latest my-react-app

cd my-react-app
npm install
npm run dev

```
![](https://s2.loli.net/2025/10/07/hW3iwvBKxSORsHf.png)

## Updating a nested object

consider the object construct like this,

```json
const [person, setPerson] = useState({
  name: 'Niki de Saint Phalle',
  artwork: {
    title: 'Blue Nana',
    city: 'Hamburg',
    image: 'https://i.imgur.com/Sd1AgUOm.jpg',
  }
});
```

you can update immutable object like this way,

```typescript
const nextArtwork = { ...person.artwork, city: 'New Delhi' };
const nextPerson = { ...person, artwork: nextArtwork };
setPerson(nextPerson);
```

or

```typescript
setPerson({
  ...person, // Copy other fields
  artwork: { // but replace the artwork
    ...person.artwork, // with the same one
    city: 'New Delhi' // but in New Delhi!
  }
});
```

or use `useImmer` instead of `useState`

> another way you can use `use-immer` library, handle deeper nested object.

```typescript
  const [person, updatePerson] = useImmer({
    name: 'Niki de Saint Phalle',
    artwork: {
      title: 'Blue Nana',
      city: 'Hamburg',
      image: 'https://i.imgur.com/Sd1AgUOm.jpg',
    }
  });

  function handleNameChange(e) {
    updatePerson(draft => {
      draft.name = e.target.value;
    });
  }
```

[usage from official website](https://react.dev/learn/updating-objects-in-state)

## Dynamic call a function or update a value 

```typescript
  for (let update of queue) {
    if (typeof update === 'function') {
      // Apply the updater function.
      finalState = update(finalState);
    } else {
      // Replace the next state.
      finalState = update;
    }
  }
```

## Updating Arrays in State

```typescript
setArtists( // Replace the state
  [ // with a new array
    ...artists, // that contains all the old items
    { id: nextId++, name: name } // and one new item at the end
  ]
);
```

## Change the value in array 

data construct

```json
const initialProducts = [{
  id: 0,
  name: 'Baklava',
  count: 1,
}, {
  id: 1,
  name: 'Cheese',
  count: 5,
}, {
  id: 2,
  name: 'Spaghetti',
  count: 2,
}];
```

how

```typescript
   setProducts(products.map(product => {
      if (product.id === productId) {
        return {
          ...product,
          count: product.count + 1
        };
      } else {
        return product;
      }
    }))
```

## 箭头函数

| 写法                          | 含义                               | 是否需要写 `return` |
| --------------------------- | -------------------------------- | -------------- |
| `(param) => ( expression )` | **隐式返回**，自动返回括号里的表达式结果           | ❌ 不需要          |
| `(param) => { statement }`  | **函数体语句块**，不会自动返回，需要手动写 `return` | ✅ 需要           |

## react数据遍历指定key

key 只能用在 父组件 map 渲染列表的元素上，而不是子组件内部。

```tsx title="Need key component"  showLineNumbers {9-12}
export default function Contact({
  img,
  imgAlt,
  name,
  phoneNumber,
  email,
}: ContactInfo) {
  return (
    //这是 不对的，因为 key 只能用在 父组件 map 
    // 渲染列表的元素上，而不是子组件内部。
    // <article className="contact-card" key={id}>
    <article className="contact-card">
      <img src={img} alt={imgAlt} />
      <h3>{name}</h3>
      <div className="info-group">
        <img src={phoneIcon} alt="phone icon" />
        <p>{phoneNumber}</p>
      </div>
      <div className="info-group">
        <img src={mailIcon} alt="mail icon" />
        <p>{email}</p>
      </div>
    </article>
  );
}
```

```txs title="Parent component pass key" showLineNumbers {5}
function App() {
  return (
    <div className="contacts">
      {contacts.map((contact) => (
        <Contact key={contact.id} {...contact} />
      ))}
    </div>
  );
}
```

## 向react组件传递参数

[code here](https://github.com/Halcyon666/react-daily-learn/commit/e87a2e1e8d009760ac679b86762cea55530310b8)

import TailProtocal from "@site/src/components/TailProtocal";

<TailProtocal />
