<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Level 2 - RAG App Development & Heterogeneous System Architecture | halcyon666</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://halcyon666.top/en/img/docusaurus.png /><meta data-rh=true name=twitter:image content=https://halcyon666.top/en/img/docusaurus.png /><meta data-rh=true property=og:url content=https://halcyon666.top/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag /><meta data-rh=true property=og:locale content=en_US /><meta data-rh=true property=og:locale:alternate content=zh_Hans /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=google-site-verification content=vagj8ng2T0VN92-bvbq6xTnbbGF0_ZJXDvV0E_Yu3jY /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Level 2 - RAG App Development & Heterogeneous System Architecture | halcyon666"/><meta data-rh=true name=description content="Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system"/><meta data-rh=true property=og:description content="Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system"/><link data-rh=true rel=icon href=/en/img/favicon.png /><link data-rh=true rel=canonical href=https://halcyon666.top/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag /><link data-rh=true rel=alternate href=https://halcyon666.top/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag hreflang=zh-Hans /><link data-rh=true rel=alternate href=https://halcyon666.top/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag hreflang=en-US /><link data-rh=true rel=alternate href=https://halcyon666.top/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag hreflang=x-default /><link data-rh=true rel=preconnect href=https://L275Z6TKIP-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://halcyon666.top/en/category/-ai--big-data","name":"ü§ñ AI & Big Data","position":1},{"@type":"ListItem","item":"https://halcyon666.top/en/category/-ai--llm","name":"ü§ñ AI & LLM","position":2},{"@type":"ListItem","item":"https://halcyon666.top/en/ai-bigdata/AI/prompt-engineering-roadmap/overview","name":"AI Prompt Engineering Roadmap","position":3},{"@type":"ListItem","item":"https://halcyon666.top/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag","name":"Level 2 - RAG App Development","position":4}]}</script><link rel=alternate type=application/rss+xml href=/en/blog/rss.xml title="halcyon666 RSS Feed"><link rel=alternate type=application/atom+xml href=/en/blog/atom.xml title="halcyon666 Atom Feed"><link rel=alternate type=application/json href=/en/blog/feed.json title="halcyon666 JSON Feed"><link rel=search type=application/opensearchdescription+xml title=halcyon666 href=/en/opensearch.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css type=text/css integrity=sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM crossorigin=anonymous><link rel=stylesheet href=/en/assets/css/styles.66dd17ec.css /><script src=/en/assets/js/runtime~main.7f950ae6.js defer></script><script src=/en/assets/js/main.e5c15a7a.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/en/img/logo.png /><div role=region aria-label="Skip to main content"><a class=skipToContent_0KRX href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_zAxa"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo.png alt="My Site Logo" class="themedComponent_F5CQ themedComponent--light__4gz"/><img src=/en/img/logo.png alt="My Site Logo" class="themedComponent_F5CQ themedComponent--dark_RQh6"/></div><b class="navbar__title text--truncate">halcyon666</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/en/category/-background-knowledge>docs</a><a class="navbar__item navbar__link" href=/en/blog>Blog</a><a class="navbar__item navbar__link" href=/en/graph>Graph</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/Halcyon666/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_LxhT><use href=#theme-svg-external-link /></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_glr3><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>‰∏≠Êñá</a><li><a href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><div class="toggle_sCy1 colorModeToggle_vUKv"><button class="clean-btn toggleButton_f9XF toggleButtonDisabled_Ts6G" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_zbKc lightToggleIcon_abkS"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_zbKc darkToggleIcon_zm_e"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_zbKc systemToggleIcon_aSnX"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_KF0D><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_JntQ"><div class=docsWrapper_jBAa><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SkHc" type=button></button><div class=docRoot_k5oE><aside class="theme-doc-sidebar-container docSidebarContainer_ACjG"><div class=sidebarViewport_rwmK><div class="sidebar_xI5t sidebarWithHideableNavbar_QjKi"><a tabindex=-1 class=sidebarLogo_yEDX href=/en/><img src=/en/img/logo.png alt="My Site Logo" class="themedComponent_F5CQ themedComponent--light__4gz"/><img src=/en/img/logo.png alt="My Site Logo" class="themedComponent_F5CQ themedComponent--dark_RQh6"/><b>halcyon666</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_mZwm"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-background-knowledge><span title="üìö Background Knowledge" class=categoryLinkLabel_CDYj>üìö Background Knowledge</span></a><button aria-label="Expand sidebar category 'üìö Background Knowledge'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/intro><span title=Introduction class=linkLabel_JcR7>Introduction</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-frontend-development><span title="üé® Frontend Development" class=categoryLinkLabel_CDYj>üé® Frontend Development</span></a><button aria-label="Expand sidebar category 'üé® Frontend Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-devops--infrastructure><span title="üöÄ DevOps & Infrastructure" class=categoryLinkLabel_CDYj>üöÄ DevOps & Infrastructure</span></a><button aria-label="Expand sidebar category 'üöÄ DevOps & Infrastructure'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/Ô∏è-development-tools><span title="üõ†Ô∏è Development Tools" class=categoryLinkLabel_CDYj>üõ†Ô∏è Development Tools</span></a><button aria-label="Expand sidebar category 'üõ†Ô∏è Development Tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--active" href=/en/category/-ai--big-data><span title="ü§ñ AI & Big Data" class=categoryLinkLabel_CDYj>ü§ñ AI & Big Data</span></a><button aria-label="Collapse sidebar category 'ü§ñ AI & Big Data'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/category/-ai--llm><span title="ü§ñ AI & LLM" class=categoryLinkLabel_CDYj>ü§ñ AI & LLM</span></a><button aria-label="Collapse sidebar category 'ü§ñ AI & LLM'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/oh-my-opencode><span title="Oh My OpenCode" class=linkLabel_JcR7>Oh My OpenCode</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/wsl-opencode><span title="WSL + OpenCode" class=linkLabel_JcR7>WSL + OpenCode</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/lays-in-ai><span title="AI Development Core Tech Stack" class=linkLabel_JcR7>AI Development Core Tech Stack</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/maxi-model-capacity><span title="Agent Design Complete Guide" class=linkLabel_JcR7>Agent Design Complete Guide</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/ai-bigdata/AI/prompt-engineering-roadmap/overview><span title="AI Prompt Engineering Roadmap" class=categoryLinkLabel_CDYj>AI Prompt Engineering Roadmap</span></a><button aria-label="Collapse sidebar category 'AI Prompt Engineering Roadmap'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-1-ai-native><span title="Level 1 - AI-Native Workflow" class=linkLabel_JcR7>Level 1 - AI-Native Workflow</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag><span title="Level 2 - RAG App Development" class=linkLabel_JcR7>Level 2 - RAG App Development</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-3-agent><span title="Level 3 - Agent Architecture" class=linkLabel_JcR7>Level 3 - Agent Architecture</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-4-production><span title="Level 4 - Full Stack Landing" class=linkLabel_JcR7>Level 4 - Full Stack Landing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/prompt-engineering-roadmap/summary><span title="Prompt Quality Evaluation & Summary" class=linkLabel_JcR7>Prompt Quality Evaluation & Summary</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/mcp><span title=MCP class=linkLabel_JcR7>MCP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/ai-problems><span title="AI Problems" class=linkLabel_JcR7>AI Problems</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/ai-formula><span title="AI Formula" class=linkLabel_JcR7>AI Formula</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/prompt><span title=Prompt class=linkLabel_JcR7>Prompt</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/vibe-coding><span title="Vibe Coding Tools" class=linkLabel_JcR7>Vibe Coding Tools</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/career><span title="Career Paths" class=linkLabel_JcR7>Career Paths</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/future-vibecoding><span title="Future Vibe Coding" class=linkLabel_JcR7>Future Vibe Coding</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/ai-bigdata/AI/owesome-ai-skills><span title="Owesome AI Skills" class=linkLabel_JcR7>Owesome AI Skills</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-big-data><span title="üêò Big Data" class=categoryLinkLabel_CDYj>üêò Big Data</span></a><button aria-label="Expand sidebar category 'üêò Big Data'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-miscellaneous><span title="üìñ Miscellaneous" class=categoryLinkLabel_CDYj>üìñ Miscellaneous</span></a><button aria-label="Expand sidebar category 'üìñ Miscellaneous'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_knb0"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_Ecw0><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_e7AR><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_pYO8"><div class=docItemContainer_syJm><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_TVnx" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_vDen><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/category/-ai--big-data><span>ü§ñ AI & Big Data</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/category/-ai--llm><span>ü§ñ AI & LLM</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/ai-bigdata/AI/prompt-engineering-roadmap/overview><span>AI Prompt Engineering Roadmap</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Level 2 - RAG App Development</span></ul></nav><div class="tocCollapsible_a4Qn theme-doc-toc-mobile tocMobile__52k"><button type=button class="clean-btn tocCollapsibleButton_Acd6">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Phase 2: RAG App Development & Heterogeneous System Architecture (Level 2)</h1></header>
<p><strong>Cycle</strong>: Weeks 3-5
<strong>Core Goal</strong>: Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=prerequisite-capabilities>Prerequisite Capabilities<a href=#prerequisite-capabilities class=hash-link aria-label="Direct link to Prerequisite Capabilities" title="Direct link to Prerequisite Capabilities" translate=no>‚Äã</a></h2>
<ul>
<li class="">‚úÖ Mastered Python basics and AI tool usage (Level 1)</li>
<li class="">‚úÖ Established AI-Native development habits</li>
<li class="">‚úÖ Deployed local Ollama and Vector Database</li>
</ul>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=why-this-phase-is-needed>Why this phase is needed<a href=#why-this-phase-is-needed class=hash-link aria-label="Direct link to Why this phase is needed" title="Direct link to Why this phase is needed" translate=no>‚Äã</a></h2>
<p>RAG is core capability of AI applications. Agent's intelligent decision depends on knowledge retrieval capability provided by RAG. Must first master "How to let AI acquire external knowledge" before entering "How to let AI decide autonomously".</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=-core-capability-1-dual-track-rag-implementation>‚≠ê Core Capability 1: Dual-Track RAG Implementation<a href=#-core-capability-1-dual-track-rag-implementation class=hash-link aria-label="Direct link to ‚≠ê Core Capability 1: Dual-Track RAG Implementation" title="Direct link to ‚≠ê Core Capability 1: Dual-Track RAG Implementation" translate=no>‚Äã</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=-platform-stream-dify-enterprise-practice-80-scenarios>‚≠ê Platform Stream: Dify Enterprise Practice (80% Scenarios)<a href=#-platform-stream-dify-enterprise-practice-80-scenarios class=hash-link aria-label="Direct link to ‚≠ê Platform Stream: Dify Enterprise Practice (80% Scenarios)" title="Direct link to ‚≠ê Platform Stream: Dify Enterprise Practice (80% Scenarios)" translate=no>‚Äã</a></h3>
<p><strong>Strategy: "Extend, Don't Deep Dive"</strong></p>
<p>Treat Dify as "Black Box" or "Component", focus on how to <strong>Extend</strong> it:</p>
<ul>
<li class=""><strong>Custom Tooling</strong>: Write Python API for Dify to call, letting Java system communicate with Dify</li>
<li class=""><strong>Workflow Orchestration</strong>: Master Dify's Workflow nodes, understand how to pass variables between nodes</li>
<li class=""><strong>Why skip source code?</strong> Dify is based on Flask/Next.js/PostgreSQL complex stack, unless fixing bug, time should be spent on <strong>LangGraph</strong> (Complex Logic) or <strong>Milvus</strong> (Data Side)</li>
</ul>
<p><strong>‚≠ê Practical Task</strong>:</p>
<ol>
<li class="">Deploy Dify using Docker</li>
<li class="">Connect Local Ollama</li>
<li class="">‚≠ê Build Enterprise Knowledge Base: Upload PDF, configure Embedding model, test hybrid search</li>
<li class="">Publish Web Chatbot</li>
</ol>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=-core-practice-dify-custom-tool>‚≠ê Core Practice: Dify Custom Tool<a href=#-core-practice-dify-custom-tool class=hash-link aria-label="Direct link to ‚≠ê Core Practice: Dify Custom Tool" title="Direct link to ‚≠ê Core Practice: Dify Custom Tool" translate=no>‚Äã</a></h3>
<p>Use your <strong>Spring Boot</strong> advantage to enhance Agent's hands and feet.</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=task-description>Task Description<a href=#task-description class=hash-link aria-label="Direct link to Task Description" title="Direct link to Task Description" translate=no>‚Äã</a></h4>
<p>Dify cannot directly access your company's real-time data (e.g. server status, database inventory), you need to write an API for it to call.</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=implementation-steps>Implementation Steps<a href=#implementation-steps class=hash-link aria-label="Direct link to Implementation Steps" title="Direct link to Implementation Steps" translate=no>‚Äã</a></h4>
<ol>
<li class=""><strong>Backend Development (Spring Boot)</strong>:<!-- -->
<ul>
<li class="">Write an interface <code>GET /api/v1/system/status</code>, returning CPU/Memory/Business data in JSON format.</li>
<li class="">Generate <strong>OpenAPI (Swagger)</strong> description document.</li>
</ul>
</li>
<li class=""><strong>Dify Integration</strong>:<!-- -->
<ul>
<li class="">In Dify "Tools" tab -> "Create Custom Tool".</li>
<li class="">Import your OpenAPI Schema.</li>
</ul>
</li>
<li class=""><strong>Agent Orchestration</strong>:<!-- -->
<ul>
<li class="">Enable the tool in Prompt.</li>
<li class="">Test question: "How is system load now?" -> Agent automatically calls Java interface -> Answer.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=code-stream-handwritten-rag-link-20-deep-customization>Code Stream: Handwritten RAG Link (20% Deep Customization)<a href=#code-stream-handwritten-rag-link-20-deep-customization class=hash-link aria-label="Direct link to Code Stream: Handwritten RAG Link (20% Deep Customization)" title="Direct link to Code Stream: Handwritten RAG Link (20% Deep Customization)" translate=no>‚Äã</a></h3>
<p><strong>Core Components</strong>:</p>
<ul>
<li class="">‚≠ê <strong>Milvus</strong>: Deploy and understand HNSW index principle</li>
<li class="">‚≠ê <strong>Embedding</strong>: Use <code>sentence-transformers</code> to load <code>bge-base-zh</code></li>
</ul>
<p><strong>‚≠ê Advanced Chunking Strategy</strong>:</p>
<ol>
<li class="">
<p>‚≠ê <strong>Parent-Child Indexing</strong></p>
<ul>
<li class="">Index small chunk (128 tokens, precise retrieval)</li>
<li class="">Return parent chunk (512 tokens, retain context)</li>
<li class="">Solve "Precise retrieval but insufficient context" problem</li>
</ul>
</li>
<li class="">
<p><strong>HyDE (Hypothetical Document Embeddings)</strong></p>
<ul>
<li class="">Let LLM generate "Hypothetical Answer" first</li>
<li class="">Use hypothetical answer's Embedding to search documents</li>
<li class="">Solve "Question and document semantics mismatch" problem</li>
</ul>
</li>
</ol>
<p><strong>‚≠ê Practical Code Link</strong>:</p>
<div class="language-text codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-text codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">Read PDF ‚Üí Advanced Chunking ‚Üí Vectorization ‚Üí Store in Milvus ‚Üí Retrieval ‚Üí Assemble Prompt ‚Üí LLM Answer</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=-early-eval-early-evaluation---crucial>‚≠ê Early Eval (Early Evaluation) - Crucial!<a href=#-early-eval-early-evaluation---crucial class=hash-link aria-label="Direct link to ‚≠ê Early Eval (Early Evaluation) - Crucial!" title="Direct link to ‚≠ê Early Eval (Early Evaluation) - Crucial!" translate=no>‚Äã</a></h3>
<p><strong>‚≠ê Core Concept</strong>: Treat RAG evaluation as <strong>Unit Test</strong></p>
<p><strong>‚≠ê Golden Dataset Construction Method</strong>:</p>
<ol>
<li class="">
<p><strong>Select Representative Questions</strong> (10-20):</p>
<ul>
<li class="">Cover different difficulties: Simple fact query, complex reasoning, multi-hop questions</li>
<li class="">Cover different topics: Ensure coverage of various fields of knowledge base</li>
<li class="">Include edge cases: Questions with no answer in knowledge base</li>
</ul>
</li>
<li class="">
<p><strong>Write Standard Answers</strong>:</p>
<ul>
<li class="">Annotate answer source (which paragraph of which document)</li>
<li class="">Annotate key information points (for evaluating recall rate)</li>
</ul>
</li>
<li class="">
<p><strong>‚≠ê Automated Evaluation Script</strong>:</p>
</li>
</ol>
<div class="language-python codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-python codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token comment" style="color:rgb(0, 128, 0)"># Example: RAG Evaluation Script</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> ragas </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> evaluate</span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> ragas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">metrics </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> faithfulness</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> answer_relevancy</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Golden Dataset</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">golden_qa </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">"question"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"How to optimize RAG retrieval?"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"answer"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"Use Parent-Child indexing"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"context"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"..."</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># ... More QA pairs</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Run Evaluation</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">results </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> evaluate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">golden_qa</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> metrics</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">faithfulness</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> answer_relevancy</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">f"Faithfulness: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string-interpolation interpolation">results</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(163, 21, 21)">'faithfulness'</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token string-interpolation interpolation format-spec">.2f</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">print</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">f"Answer Relevancy: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string-interpolation interpolation">results</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(163, 21, 21)">'answer_relevancy'</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token string-interpolation interpolation format-spec">.2f</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token string-interpolation string" style="color:rgb(163, 21, 21)">"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># If score &lt; 0.7, RAG link needs optimization</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">assert</span><span class="token plain"> results</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">'faithfulness'</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">></span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0.7</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"RAG Faithfulness Insufficient"</span><br/></span></code></pre></div></div>
<p><strong>Integrate to CI/CD</strong> (Implement Evaluation Shift Left):</p>
<p><strong>Goal</strong>: Treat RAG evaluation as Unit Test, automatically verify quality on every modification.</p>
<p><strong>Implementation Steps</strong>:</p>
<ol>
<li class=""><strong>Create Evaluation Script</strong>: Save above RAG evaluation code to <code>tests/test_rag_quality.py</code></li>
<li class="">‚≠ê <strong>Set Quality Threshold</strong>: Define minimum acceptable score (Faithfulness > 0.7, Answer Relevancy > 0.7)</li>
<li class=""><strong>Integrate CI Pipeline</strong>: Add evaluation step in GitHub Actions / GitLab CI</li>
</ol>
<p><strong>CI Config Example</strong> (GitHub Actions):</p>
<div class="language-yaml codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-yaml codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token comment" style="color:rgb(0, 128, 0)"># .github/workflows/rag-quality.yml</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> RAG Quality Check</span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">push</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> pull_request</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">  </span><span class="token key atrule">evaluate</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain">latest</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> actions/checkout@v2</span><br/></span><span class=token-line style=color:#000000><span class="token plain">      </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> Run RAG Evaluation</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">|</span><span class="token scalar string" style="color:rgb(163, 21, 21)"></span><br/></span><span class=token-line style=color:#000000><span class="token scalar string" style="color:rgb(163, 21, 21)">          python tests/test_rag_quality.py</span><br/></span><span class=token-line style=color:#000000><span class="token scalar string" style="color:rgb(163, 21, 21)">          # If score below threshold, CI fails</span><br/></span></code></pre></div></div>
<p><strong>Use Ragas or TruLens</strong>:</p>
<ul>
<li class="">‚≠ê <strong>Ragas</strong>: More suitable for RAG systems, provides metrics like Faithfulness, Answer Relevancy</li>
<li class=""><strong>TruLens</strong>: More suitable for complex Agents, provides complete Trace analysis</li>
</ul>
<p><strong>Effect Verification</strong>: After modifying Prompt, CI automatically runs evaluation. If Faithfulness drops more than 5%, automatically block merge.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=-core-capability-2-heterogeneous-system-communication-protocol-java--python>‚≠ê Core Capability 2: Heterogeneous System Communication Protocol (Java ‚Üî Python)<a href=#-core-capability-2-heterogeneous-system-communication-protocol-java--python class=hash-link aria-label="Direct link to ‚≠ê Core Capability 2: Heterogeneous System Communication Protocol (Java ‚Üî Python)" title="Direct link to ‚≠ê Core Capability 2: Heterogeneous System Communication Protocol (Java ‚Üî Python)" translate=no>‚Äã</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=core-challenges>Core Challenges<a href=#core-challenges class=hash-link aria-label="Direct link to Core Challenges" title="Direct link to Core Challenges" translate=no>‚Äã</a></h3>
<ol>
<li class=""><strong>AI Inference slow (Python), Business Logic fast (Java)</strong> ‚Üí Need async decoupling</li>
<li class="">‚≠ê <strong>Java needs deterministic JSON object, LLM output unstable</strong> ‚Üí Need structured output validation</li>
<li class=""><strong>Cross-language data consistency</strong> ‚Üí Need unified data contract</li>
</ol>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=architecture-design-three-layer-solution>Architecture Design: Three-Layer Solution<a href=#architecture-design-three-layer-solution class=hash-link aria-label="Direct link to Architecture Design: Three-Layer Solution" title="Direct link to Architecture Design: Three-Layer Solution" translate=no>‚Äã</a></h3>
<p><strong>‚≠ê 1. Structured Output Validation</strong></p>
<p>Python Side:</p>
<div class="language-python codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-python codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> pydantic </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> BaseModel</span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">from</span><span class="token plain"> instructor </span><span class="token keyword" style="color:rgb(0, 0, 255)">import</span><span class="token plain"> patch</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">BaseModel</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    user_id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">str</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    email</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">str</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    profile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">dict</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># Force LLM output to conform to Pydantic model</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">client </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> patch</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">OpenAI</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">response </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">chat</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">completions</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    model</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token string" style="color:rgb(163, 21, 21)">"gpt-4"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    response_model</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">UserInfo</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    messages</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token string" style="color:rgb(163, 21, 21)">"role"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"user"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"content"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">"Extract user info from: ..."</span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)"># response guaranteed to be UserInfo type</span><br/></span></code></pre></div></div>
<p>Java Side:</p>
<div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">// Use OpenAPI/Swagger to generate corresponding DTO</span><br/></span><span class=token-line style=color:#000000><span class="token plain">@Data</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class UserInfo {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    private String userId;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    private String email;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    private Map&lt;String, Object> profile;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div>
<p><strong>‚≠ê 2. Async Communication Mode (Sidecar Pattern)</strong></p>
<p>Architecture Diagram:</p>
<div class="language-text codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-text codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">User Request ‚Üí Java Backend (Business Logic) ‚Üí Return "Processing"</span><br/></span><span class=token-line style=color:#000000><span class="token plain">              ‚Üì</span><br/></span><span class=token-line style=color:#000000><span class="token plain">         Message Queue (RabbitMQ)</span><br/></span><span class=token-line style=color:#000000><span class="token plain">              ‚Üì</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    Python Service (AI Inference) ‚Üí Processing Complete</span><br/></span><span class=token-line style=color:#000000><span class="token plain">              ‚Üì</span><br/></span><span class=token-line style=color:#000000><span class="token plain">         Callback Java (Update Status)</span><br/></span></code></pre></div></div>
<p>Practical Scenario:</p>
<ul>
<li class="">User uploads PDF, Java backend directly returns "Processing"</li>
<li class="">Notify Python service via MQ to perform chunking, vectorization</li>
<li class="">Callback Java to update status after completion</li>
</ul>
<p><strong>3. Data Contract Definition (OpenAPI/Swagger)</strong></p>
<div class="language-yaml codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-yaml codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token comment" style="color:rgb(0, 128, 0)"># shared-api-spec.yaml</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token key atrule">components</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">  </span><span class="token key atrule">schemas</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token key atrule">RAGRequest</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> object</span><br/></span><span class=token-line style=color:#000000><span class="token plain">      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> string</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token key atrule">top_k</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> integer</span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token key atrule">RAGResponse</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> object</span><br/></span><span class=token-line style=color:#000000><span class="token plain">      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token key atrule">answer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> string</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token key atrule">sources</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> array</span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> string</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token key atrule">confidence</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> number</span><br/></span></code></pre></div></div>
<p>Java Side uses OpenAPI Generator to generate Feign Client:</p>
<div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">@FeignClient(name = "rag-service", url = "${rag.service.url}")</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public interface RAGServiceClient {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    @PostMapping("/query")</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    RAGResponse query(@RequestBody RAGRequest request);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=hybrid-search-strategy>Hybrid Search Strategy<a href=#hybrid-search-strategy class=hash-link aria-label="Direct link to Hybrid Search Strategy" title="Direct link to Hybrid Search Strategy" translate=no>‚Äã</a></h3>
<p>Combine <strong>Full Text Search (Elasticsearch/MySQL)</strong> with <strong>Vector Search (Milvus)</strong>:</p>
<div class="language-python codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-python codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token comment" style="color:rgb(0, 128, 0)"># Hybrid Search Example</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">hybrid_search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">str</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> top_k</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(0, 112, 193)">int</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 1. Vector Search (Semantic Similarity)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    vector_results </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> milvus_client</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">query_embedding</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> top_k</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 2. Full Text Search (Keyword Match)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    keyword_results </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> elasticsearch</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">search</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> top_k</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># 3. Fuse Results (Reciprocal Rank Fusion)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    final_results </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> rrf_fusion</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">vector_results</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> keyword_results</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> top_k</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">top_k</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> final_results</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=core-capability-3-dual-database-architecture-design>Core Capability 3: Dual Database Architecture Design<a href=#core-capability-3-dual-database-architecture-design class=hash-link aria-label="Direct link to Core Capability 3: Dual Database Architecture Design" title="Direct link to Core Capability 3: Dual Database Architecture Design" translate=no>‚Äã</a></h2>
<p><strong>Architecture</strong>: MySQL (Business Data) + Vector DB (Semantic Data)</p>
<p><strong>Data Sync Consistency Issue</strong>:</p>
<div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">// Java Side: Sync to vector DB when creating user</span><br/></span><span class=token-line style=color:#000000><span class="token plain">@Transactional</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public void createUser(User user) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    // 1. Save to MySQL</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    userRepository.save(user);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><br/></span><span class=token-line style=color:#000000><span class="token plain">    // 2. Send event to MQ (Async sync to vector DB)</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    rabbitTemplate.convertAndSend("user.created", new UserCreatedEvent(user));</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div>
<div class="language-python codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-python codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token comment" style="color:rgb(0, 128, 0)"># Python Side: Listen to MQ, sync to vector DB</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(4, 81, 165)">@mq_consumer</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">"user.created"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">sync_user_to_vector_db</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> UserCreatedEvent</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    embedding </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> embed_model</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">profile</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    milvus_client</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">insert</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">"user_id"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token builtin" style="color:rgb(0, 112, 193)">id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">"embedding"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> embedding</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token string" style="color:rgb(163, 21, 21)">"metadata"</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">to_dict</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=phase-output-standards>Phase Output Standards<a href=#phase-output-standards class=hash-link aria-label="Direct link to Phase Output Standards" title="Direct link to Phase Output Standards" translate=no>‚Äã</a></h2>
<p><strong>Deliverables Must Complete</strong> (As prerequisites for entering Level 3):</p>
<p><strong>RAG Application Layer</strong>:</p>
<ul class="contains-task-list containsTaskList_zsYQ">
<li class=task-list-item><input type=checkbox disabled checked/> <!-- -->Configured Dify deployment and published at least 1 Knowledge Base app, able to answer domain questions</li>
<li class=task-list-item><input type=checkbox disabled checked/> <!-- -->Dify Custom Tool</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->‚≠ê Handwritten complete RAG link code, containing: PDF Parsing ‚Üí Chunking ‚Üí Vectorization ‚Üí Milvus Storage ‚Üí Retrieval ‚Üí LLM Generation</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->‚≠ê Implement at least 1 advanced chunking strategy (Parent-Child or HyDE), and verify effect through contrast experiment</li>
</ul>
<p><strong>Evaluation System Layer</strong>:</p>
<ul class="contains-task-list containsTaskList_zsYQ">
<li class=task-list-item><input type=checkbox disabled/> <!-- -->‚≠ê Establish Golden Dataset (10-20 QA pairs), containing questions of different difficulties and topics</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->‚≠ê Implement automated evaluation script, integrate Ragas or TruLens</li>
<li class=task-list-item><input type=checkbox disabled/> <strong>Quantitative Metrics</strong>: Test using Golden Dataset, recall rate improved by at least 20% from baseline (e.g. from 0.60 to 0.72), Faithfulness > 0.7</li>
</ul>
<p><strong>Heterogeneous System Architecture Layer</strong>:</p>
<ul class="contains-task-list containsTaskList_zsYQ">
<li class=task-list-item><input type=checkbox disabled/> <!-- -->‚≠ê Design and implement Java-Python async communication architecture (Using RabbitMQ or Kafka)</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Implement Hybrid Search strategy (Vector + Full Text), and verify effect improvement through A/B testing</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Define unified OpenAPI data contract, Java side able to call Python service via Feign Client</li>
</ul>
<p><strong>Capability Verification</strong>:</p>
<ul class="contains-task-list containsTaskList_zsYQ">
<li class=task-list-item><input type=checkbox disabled/> <!-- -->‚≠ê Able to explain "Why Parent-Child Indexing is better than ordinary chunking" and give data support</li>
<li class=task-list-item><input type=checkbox disabled/> <!-- -->Able to design a complete dual database architecture (MySQL + Milvus), and solve data sync consistency issue</li>
</ul>
<p><strong>Time Checkpoint</strong>: If not completed after 3 weeks, suggest using Dify to complete basic RAG first, then gradually add advanced features</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=roadmap-optimization-suggestions>Roadmap Optimization Suggestions<a href=#roadmap-optimization-suggestions class=hash-link aria-label="Direct link to Roadmap Optimization Suggestions" title="Direct link to Roadmap Optimization Suggestions" translate=no>‚Äã</a></h2>
<p><strong>Practical Project</strong>: Build "Search Switcher" in Java, automatically decide based on question type:</p>
<ul>
<li class="">Use Database Query (Structured Data, e.g. "Query user orders")</li>
<li class="">Use RAG Query (Unstructured Knowledge, e.g. "How to optimize system performance")</li>
</ul>
<hr/>
<p><strong>Previous Phase</strong>: <a class="" href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-1-ai-native>Level 1 - AI-Native Workflow & Infrastructure</a></p>
<p><strong>Next Phase</strong>: <a class="" href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-3-agent>Level 3 - Agent Architecture & Observability</a></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class=col><b>Tags:</b><ul class="tags_cey7 padding--none margin-left--sm"><li class=tag_MXhx><a rel=tag class="tag_Zm2d tagRegular_K9wS" href=/en/tags/ai>ai</a><li class=tag_MXhx><a rel=tag class="tag_Zm2d tagRegular_K9wS" href=/en/tags/rag>rag</a><li class=tag_MXhx><a rel=tag class="tag_Zm2d tagRegular_K9wS" href=/en/tags/level-2>level-2</a></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_hj8p"><a href=https://github.com/Halcyon666/summary/edit/main/docs/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_S0L0 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_UNFw"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2026-01-27T00:00:00.000Z itemprop=dateModified>Jan 27, 2026</time></b> by <b>halcyon666</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-1-ai-native><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Level 1 - AI-Native Workflow</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/ai-bigdata/AI/prompt-engineering-roadmap/level-3-agent><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Level 3 - Agent Architecture</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_QilJ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#prerequisite-capabilities class="table-of-contents__link toc-highlight">Prerequisite Capabilities</a><li><a href=#why-this-phase-is-needed class="table-of-contents__link toc-highlight">Why this phase is needed</a><li><a href=#-core-capability-1-dual-track-rag-implementation class="table-of-contents__link toc-highlight">‚≠ê Core Capability 1: Dual-Track RAG Implementation</a><ul><li><a href=#-platform-stream-dify-enterprise-practice-80-scenarios class="table-of-contents__link toc-highlight">‚≠ê Platform Stream: Dify Enterprise Practice (80% Scenarios)</a><li><a href=#-core-practice-dify-custom-tool class="table-of-contents__link toc-highlight">‚≠ê Core Practice: Dify Custom Tool</a><ul><li><a href=#task-description class="table-of-contents__link toc-highlight">Task Description</a><li><a href=#implementation-steps class="table-of-contents__link toc-highlight">Implementation Steps</a></ul><li><a href=#code-stream-handwritten-rag-link-20-deep-customization class="table-of-contents__link toc-highlight">Code Stream: Handwritten RAG Link (20% Deep Customization)</a><li><a href=#-early-eval-early-evaluation---crucial class="table-of-contents__link toc-highlight">‚≠ê Early Eval (Early Evaluation) - Crucial!</a></ul><li><a href=#-core-capability-2-heterogeneous-system-communication-protocol-java--python class="table-of-contents__link toc-highlight">‚≠ê Core Capability 2: Heterogeneous System Communication Protocol (Java ‚Üî Python)</a><ul><li><a href=#core-challenges class="table-of-contents__link toc-highlight">Core Challenges</a><li><a href=#architecture-design-three-layer-solution class="table-of-contents__link toc-highlight">Architecture Design: Three-Layer Solution</a><li><a href=#hybrid-search-strategy class="table-of-contents__link toc-highlight">Hybrid Search Strategy</a></ul><li><a href=#core-capability-3-dual-database-architecture-design class="table-of-contents__link toc-highlight">Core Capability 3: Dual Database Architecture Design</a><li><a href=#phase-output-standards class="table-of-contents__link toc-highlight">Phase Output Standards</a><li><a href=#roadmap-optimization-suggestions class="table-of-contents__link toc-highlight">Roadmap Optimization Suggestions</a></ul></div></div></div><div class=giscus-container></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ¬© 2026 Halcyon666 Built with Docusaurus 3.9.2</div></div></div></footer></div></body>