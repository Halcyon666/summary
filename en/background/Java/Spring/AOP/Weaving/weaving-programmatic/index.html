<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-background/Java/Spring/AOP/Weaving/weaving-programmatic" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Weaving in Spring AOP 1 | halcyon666</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://halcyon666.top/en/img/docusaurus.png /><meta data-rh=true name=twitter:image content=https://halcyon666.top/en/img/docusaurus.png /><meta data-rh=true property=og:url content=https://halcyon666.top/en/background/Java/Spring/AOP/Weaving/weaving-programmatic /><meta data-rh=true property=og:locale content=en_US /><meta data-rh=true property=og:locale:alternate content=zh_Hans /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=google-site-verification content=vagj8ng2T0VN92-bvbq6xTnbbGF0_ZJXDvV0E_Yu3jY /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Weaving in Spring AOP 1 | halcyon666"/><meta data-rh=true name=description content="Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)"/><meta data-rh=true property=og:description content="Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)"/><link data-rh=true rel=icon href=/en/img/favicon.png /><link data-rh=true rel=canonical href=https://halcyon666.top/en/background/Java/Spring/AOP/Weaving/weaving-programmatic /><link data-rh=true rel=alternate href=https://halcyon666.top/background/Java/Spring/AOP/Weaving/weaving-programmatic hreflang=zh-Hans /><link data-rh=true rel=alternate href=https://halcyon666.top/en/background/Java/Spring/AOP/Weaving/weaving-programmatic hreflang=en-US /><link data-rh=true rel=alternate href=https://halcyon666.top/background/Java/Spring/AOP/Weaving/weaving-programmatic hreflang=x-default /><link data-rh=true rel=preconnect href=https://L275Z6TKIP-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://halcyon666.top/en/category/-background-knowledge","name":"üìö Background Knowledge","position":1},{"@type":"ListItem","item":"https://halcyon666.top/en/category/-java","name":"‚òï Java","position":2},{"@type":"ListItem","item":"https://halcyon666.top/en/category/spring-framework","name":"Spring Framework","position":3},{"@type":"ListItem","item":"https://halcyon666.top/en/background/Java/Spring/AOP/Weaving/weaving-programmatic","name":"Weaving in Spring AOP 1","position":4}]}</script><link rel=alternate type=application/rss+xml href=/en/blog/rss.xml title="halcyon666 RSS Feed"><link rel=alternate type=application/atom+xml href=/en/blog/atom.xml title="halcyon666 Atom Feed"><link rel=alternate type=application/json href=/en/blog/feed.json title="halcyon666 JSON Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-62NRN6R4XB"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-62NRN6R4XB",{anonymize_ip:!0})</script><link rel=search type=application/opensearchdescription+xml title=halcyon666 href=/en/opensearch.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css type=text/css integrity=sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM crossorigin=anonymous><link rel=stylesheet href=/en/assets/css/styles.b9be8f71.css /><script src=/en/assets/js/runtime~main.8c839ff6.js defer></script><script src=/en/assets/js/main.fac861d3.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/en/img/logo.png /><div role=region aria-label="Skip to main content"><a class=skipToContent_0KRX href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_zAxa"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo.png alt="Site Logo" class="themedComponent_F5CQ themedComponent--light__4gz"/><img src=/en/img/logo.png alt="Site Logo" class="themedComponent_F5CQ themedComponent--dark_RQh6"/></div><b class="navbar__title text--truncate">halcyon666</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/en/category/-background-knowledge>Docs</a><a class="navbar__item navbar__link" href=/en/blog>Blog</a><a class="navbar__item navbar__link" href=/en/graph>Graph</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/Halcyon666/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_LxhT><use href=#theme-svg-external-link /></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_glr3><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/background/Java/Spring/AOP/Weaving/weaving-programmatic target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>‰∏≠Êñá</a><li><a href=/en/background/Java/Spring/AOP/Weaving/weaving-programmatic target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><div class="toggle_sCy1 colorModeToggle_vUKv"><button class="clean-btn toggleButton_f9XF toggleButtonDisabled_Ts6G" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_zbKc lightToggleIcon_abkS"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_zbKc darkToggleIcon_zm_e"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_zbKc systemToggleIcon_aSnX"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_KF0D><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_JntQ"><div class=docsWrapper_jBAa><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SkHc" type=button></button><div class=docRoot_k5oE><aside class="theme-doc-sidebar-container docSidebarContainer_ACjG"><div class=sidebarViewport_rwmK><div class="sidebar_xI5t sidebarWithHideableNavbar_QjKi"><a tabindex=-1 class=sidebarLogo_yEDX href=/en/><img src=/en/img/logo.png alt="Site Logo" class="themedComponent_F5CQ themedComponent--light__4gz"/><img src=/en/img/logo.png alt="Site Logo" class="themedComponent_F5CQ themedComponent--dark_RQh6"/><b>halcyon666</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_mZwm"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--active" href=/en/category/-background-knowledge><span title="üìö Background Knowledge" class=categoryLinkLabel_CDYj>üìö Background Knowledge</span></a><button aria-label="Collapse sidebar category 'üìö Background Knowledge'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/category/-java><span title="‚òï Java" class=categoryLinkLabel_CDYj>‚òï Java</span></a><button aria-label="Collapse sidebar category '‚òï Java'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-java-basics><span title="üî§ Java Basics" class=categoryLinkLabel_CDYj>üî§ Java Basics</span></a><button aria-label="Expand sidebar category 'üî§ Java Basics'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-interview-cases><span title="üíº Interview Cases" class=categoryLinkLabel_CDYj>üíº Interview Cases</span></a><button aria-label="Expand sidebar category 'üíº Interview Cases'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/category/spring-framework><span title="Spring Framework" class=categoryLinkLabel_CDYj>Spring Framework</span></a><button aria-label="Collapse sidebar category 'Spring Framework'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/en/background/Java/Spring/Core/application-context><span title="Core Concepts" class=categoryLinkLabel_CDYj>Core Concepts</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/Core/application-context><span title=ApplicationContext class=linkLabel_JcR7>ApplicationContext</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/Core/bean-creating-process><span title="Bean Creation Process" class=linkLabel_JcR7>Bean Creation Process</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/Core/bean-factory-post-processor><span title=BeanFactoryPostProcessor class=linkLabel_JcR7>BeanFactoryPostProcessor</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/Core/spring-core><span title="Spring Core" class=linkLabel_JcR7>Spring Core</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/en/background/Java/Spring/IOC/ioc-advanced><span title="IoC / Dependency Injection" class=categoryLinkLabel_CDYj>IoC / Dependency Injection</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/IOC/ioc-advanced><span title="IoC Injection Methods 2" class=linkLabel_JcR7>IoC Injection Methods 2</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/IOC/ioc-basics><span title="IoC Injection Methods 1" class=linkLabel_JcR7>IoC Injection Methods 1</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/en/background/Java/Spring/AOP/Weaving/weaving-autoproxy><span title="AOP (Aspect-Oriented Programming)" class=categoryLinkLabel_CDYj>AOP (Aspect-Oriented Programming)</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/en/background/Java/Spring/AOP/Weaving/weaving-autoproxy><span title=Weaving class=categoryLinkLabel_CDYj>Weaving</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/Weaving/weaving-autoproxy><span title="Weaving in Spring AOP 2" class=linkLabel_JcR7>Weaving in Spring AOP 2</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/background/Java/Spring/AOP/Weaving/weaving-programmatic><span title="Weaving in Spring AOP 1" class=linkLabel_JcR7>Weaving in Spring AOP 1</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/en/background/Java/Spring/AOP/AspectJ/aspectj-overview><span title="AspectJ Integration" class=categoryLinkLabel_CDYj>AspectJ Integration</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/AspectJ/aspectj-overview><span title="Overview of AspectJ style AOP" class=linkLabel_JcR7>Overview of AspectJ style AOP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/AspectJ/aspectj-weaving><span title="AspectJ Weaving Methods" class=linkLabel_JcR7>AspectJ Weaving Methods</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/AspectJ/full-aspectj-temp><span title="Usage of AspectJ style AOP" class=linkLabel_JcR7>Usage of AspectJ style AOP</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/advice><span title="Advice in Spring AOP" class=linkLabel_JcR7>Advice in Spring AOP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/aspect><span title="Aspect in Spring AOP" class=linkLabel_JcR7>Aspect in Spring AOP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/joinpoint><span title=Joinpoint class=linkLabel_JcR7>Joinpoint</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/pointcut><span title="Pointcut in Spring AOP" class=linkLabel_JcR7>Pointcut in Spring AOP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/en/background/Java/Spring/AOP/schema-configuration><span title="Schema-based AOP Configuration" class=linkLabel_JcR7>Schema-based AOP Configuration</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-concurrency--jvm><span title="‚ö° Concurrency & JVM" class=categoryLinkLabel_CDYj>‚ö° Concurrency & JVM</span></a><button aria-label="Expand sidebar category '‚ö° Concurrency & JVM'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-problem-solutions><span title="üêõ Problem Solutions" class=categoryLinkLabel_CDYj>üêõ Problem Solutions</span></a><button aria-label="Expand sidebar category 'üêõ Problem Solutions'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-design-patterns><span title="üéØ Design Patterns" class=categoryLinkLabel_CDYj>üéØ Design Patterns</span></a><button aria-label="Expand sidebar category 'üéØ Design Patterns'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/Ô∏è-database><span title="üóÑÔ∏è Database" class=categoryLinkLabel_CDYj>üóÑÔ∏è Database</span></a><button aria-label="Expand sidebar category 'üóÑÔ∏è Database'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-middleware><span title="üîå Middleware" class=categoryLinkLabel_CDYj>üîå Middleware</span></a><button aria-label="Expand sidebar category 'üîå Middleware'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-python><span title="üêç Python" class=categoryLinkLabel_CDYj>üêç Python</span></a><button aria-label="Expand sidebar category 'üêç Python'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" tabindex=0 href=/en/category/-algorithms><span title="üßÆ Algorithms" class=categoryLinkLabel_CDYj>üßÆ Algorithms</span></a><button aria-label="Expand sidebar category 'üßÆ Algorithms'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/intro><span title=Introduction class=linkLabel_JcR7>Introduction</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-frontend-development><span title="üé® Frontend Development" class=categoryLinkLabel_CDYj>üé® Frontend Development</span></a><button aria-label="Expand sidebar category 'üé® Frontend Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-devops--infrastructure><span title="üöÄ DevOps & Infrastructure" class=categoryLinkLabel_CDYj>üöÄ DevOps & Infrastructure</span></a><button aria-label="Expand sidebar category 'üöÄ DevOps & Infrastructure'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/Ô∏è-development-tools><span title="üõ†Ô∏è Development Tools" class=categoryLinkLabel_CDYj>üõ†Ô∏è Development Tools</span></a><button aria-label="Expand sidebar category 'üõ†Ô∏è Development Tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-ai--big-data><span title="ü§ñ AI & Big Data" class=categoryLinkLabel_CDYj>ü§ñ AI & Big Data</span></a><button aria-label="Expand sidebar category 'ü§ñ AI & Big Data'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink___s4 menu__link menu__link--sublist" href=/en/category/-miscellaneous><span title="üìñ Miscellaneous" class=categoryLinkLabel_CDYj>üìñ Miscellaneous</span></a><button aria-label="Expand sidebar category 'üìñ Miscellaneous'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_knb0"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_Ecw0><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_e7AR><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_pYO8"><div class=docItemContainer_syJm><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_TVnx" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_vDen><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/category/-background-knowledge><span>üìö Background Knowledge</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/category/-java><span>‚òï Java</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/en/category/spring-framework><span>Spring Framework</span></a><li class=breadcrumbs__item><span class=breadcrumbs__link>AOP (Aspect-Oriented Programming)</span><li class=breadcrumbs__item><span class=breadcrumbs__link>Weaving</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Weaving in Spring AOP 1</span></ul></nav><div class="tocCollapsible_a4Qn theme-doc-toc-mobile tocMobile__52k"><button type=button class="clean-btn tocCollapsibleButton_Acd6">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Weaving in Spring AOP 1</h1></header><p>Please refer to <a href=https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test target=_blank rel="noopener noreferrer" class="">spring-framework</a> under <code>org.springframework.mylearntest</code> package for code related to this article (from <a href=https://github.com/spring-projects/spring-framework.git target=_blank rel="noopener noreferrer" title="official source" class="">official source</a> spring-test module).</p>
<p>AspectJ uses <code>ajc</code> compiler as its weaver; JBoss AOP uses custom <code>ClassLoader</code> as its weaver; while in Spring AOP, class <code>org.springframework.aop.framework.ProxyFactory</code> is used as weaver.</p>
<p>Usage:</p>
<ol>
<li class="">
<p>Pass in object to be woven
<code>ProxyFactory weaver = new ProxyFactory(target);</code></p>
</li>
<li class="">
<p>Bind Advisor that will be applied to target object to weaver</p>
</li>
</ol>
<ul>
<li class="">If it is not an <code>Introduction</code> Advice type, Proxy will construct corresponding Advisor for these Advices internally, expecting that <code>Pointcut</code> used in constructing Advisor for them is <code>Pointcut.TRUE</code>.</li>
<li class="">If it is <code>Introduction</code> type, it will be distinguished according to specific type of <code>Introduction</code>; if it is a subclass implementation of <code>Introduction</code>, framework will construct a <code>DefaultIntroductionAdvisor</code> for it internally; if it is a subclass implementation of <code>DynamicIntroductionAdvice</code>, framework will throw <code>AOPConfigException</code> exception (because necessary target object information cannot be obtained from <code>DynamicIntroductionAdvice</code>)</li>
<li class=""><code>weaver.addAdvisor(advisor);</code></li>
</ul>
<ol start=3>
<li class="">Get proxy object
<code>Object proxyObject =  weaver.getProxy();</code></li>
</ol>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=interface-based-proxy>Interface-based Proxy<a href=#interface-based-proxy class=hash-link aria-label="Direct link to Interface-based Proxy" title="Direct link to Interface-based Proxy" translate=no>‚Äã</a></h2>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>Test4ProxyFactory</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.mylearntest.aop.weaver;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.framework.ProxyFactory;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.support.NameMatchMethodPointcutAdvisor;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import java.util.Date;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">/**</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Author: whalefall</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Date: 2020/7/15 22:53</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> */</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">@SuppressWarnings({"rawtypes", "Deprecated"})</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class Test4ProxyFactory {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public static void main(String[] args) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        /*// 1. Pass in object to be woven</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ProxyFactory weaver = new ProxyFactory(new Tester());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // weaver.setTarget(new Tester());</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // 2. Bind Advisor that will be applied to target object to weaver</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ApplicationContext context = new ClassPathXmlApplicationContext("advisor/defaultadvisor/defaultadvisor.xml");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Advisor advisor = (Advisor) context.getBean("advisor");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        weaver.addAdvisor(advisor);</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Object proxyObject =  weaver.getProxy();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        System.out.println(proxyObject.getClass());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // out: class org.springframework.mylearntest.aop.advice.perinstance.Tester$$EnhancerBySpringCGLIB$$8e739b5b</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        */</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // Usage where target class implements interface</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // As long as optimize and proxyTargetClass of ProxyFactory are not set to true</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // ProxyFactory will proxy based on interface</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        MockTask task = new MockTask();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ProxyFactory weaver = new ProxyFactory(task);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // weaver.setInterfaces(new Class[]{ITask.class});</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        NameMatchMethodPointcutAdvisor advisor = new NameMatchMethodPointcutAdvisor();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        advisor.setMappedNames("execute");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        advisor.setAdvice(new PerformanceMethodInterceptor());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        weaver.addAdvisor(advisor);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ITask proxyObj = (ITask)weaver.getProxy();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // com.sun.proxy.$Proxy0</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // System.out.println(proxyObj.getClass());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // Can only force cast to interface type, cannot cast to implementation class type, otherwise ClassCastException will be thrown</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // ITask proxyObj = (MockTask)weaver.getProxy();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        proxyObj.execute(new Date());</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=class-based-proxy>Class-based Proxy<a href=#class-based-proxy class=hash-link aria-label="Direct link to Class-based Proxy" title="Direct link to Class-based Proxy" translate=no>‚Äã</a></h2>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>TestCGLib</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.mylearntest.aop.weaver.baseonclass;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.framework.ProxyFactory;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.support.NameMatchMethodPointcutAdvisor;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.mylearntest.aop.advice.perclass.PerformanceMethodInterceptor;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">/**</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Author: whalefall</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Date: 2020/7/17 23:31</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> */</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class Test4CGLib {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public static void main(String[] args) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ProxyFactory weaver = new ProxyFactory(new Executable());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        NameMatchMethodPointcutAdvisor advisor = new NameMatchMethodPointcutAdvisor();</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        advisor.addMethodName("execute");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        advisor.setAdvice(new PerformanceMethodInterceptor());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        weaver.addAdvisor(advisor);</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Executable proxyObject = (Executable)weaver.getProxy();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        proxyObject.execute();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // org.springframework.mylearntest.aop.weaver.baseonclass.Executable$$EnhancerBySpringCGLIB$$37e40619</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        System.out.println("proxyObject class: " + proxyObject.getClass());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<p>If target class does not implement any interface, regardless of what <code>proxyTargetClass</code> attribute is, <code>ProxyFactoy</code> will use class-based proxy.</p>
<p>If <code>proxyTargetClass</code> attribute of <code>ProxyFactoy</code> is set to true, <code>ProxyFactoy</code> will use class-based proxy.</p>
<p>If <code>optimize</code> attribute of <code>ProxyFactoy</code> is set to true, <code>ProxyFactory</code> will use class-based proxy.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=weaving-of-introduction>Weaving of Introduction<a href=#weaving-of-introduction class=hash-link aria-label="Direct link to Weaving of Introduction" title="Direct link to Weaving of Introduction" translate=no>‚Äã</a></h2>
<p><code>Introduction</code> can add new behaviors to existing object types, it can only be applied to object-level interception, not method-level interception of usual <code>Advice</code>, so in process of <code>Introduction</code> weaving, there is no need to specify <code>Pointcut</code>, but only need to specify target interface type.</p>
<p>Spring's <code>Introduction</code> support can only add new behaviors to current object by defining interfaces. So, we need to specify type of newly woven interface at time of weaving.</p>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>Test4Introduction</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.mylearntest.aop.weaver.introduction;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.framework.ProxyFactory;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.mylearntest.aop.advice.perinstance.Developer;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.mylearntest.aop.advice.perinstance.IDeveloper;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.mylearntest.aop.advice.perinstance.ITester;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.mylearntest.aop.advice.perinstance.TesterFeatureIntroductionInterceptor;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">/**</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Author: whalefall</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Date: 2020/7/19 0:02</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> */</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">@SuppressWarnings("rawtypes")</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class Test4Introduction {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public static void main(String[] args) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ProxyFactory weaver = new ProxyFactory(new Developer());</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        weaver.setInterfaces(new Class[]{IDeveloper.class, ITester.class});</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        TesterFeatureIntroductionInterceptor advice = new TesterFeatureIntroductionInterceptor();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        weaver.addAdvice(advice);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // DefaultIntroductionAdvisor advisor = new DefaultIntroductionAdvisor(advice,advice);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // weaver.addAdvisor(advisor);</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Object proxy = weaver.getProxy();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ((ITester)proxy).testSoftware();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ((IDeveloper)proxy).developSoftware();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        System.out.println("proxy = " + proxy);</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=essence-of-proxyfactory>Essence of ProxyFactory<a href=#essence-of-proxyfactory class=hash-link aria-label="Direct link to Essence of ProxyFactory" title="Direct link to Essence of ProxyFactory" translate=no>‚Äã</a></h2>
<p><img decoding=async loading=lazy src=https://s2.loli.net/2023/07/15/PpJEQOIGl7dKtj3.png alt="" class=img_HlXX /></p>
<p>Spring AOP framework uses <code>AopProxy</code> to moderately abstract proxy implementation mechanisms used, mainly having two <code>AopProxy</code> implementations for JDK dynamic proxy and CGLIB mechanisms, namely <code>Cglib2AopProxy</code> and <code>JdkDynamicAopProxy</code>. Dynamic proxy needs to provide call interception via <code>InvocationHandler</code>, so <code>JdkDynamicAopProxy</code> also implements <code>InvocationHandler</code> interface. Adopting abstract factory pattern, proceeding through <code>org.springframework.aop.framework.AopProxyFactory</code>.</p>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>AopProxyFactory</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">public interface AopProxyFactory {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<p><code>AopProxyFactory</code> decides what type of <code>AopProxy</code> to generate based on relevant information provided by passed <code>AdvisedSupport</code> instance. Specific work is completed by concrete implementation classes of <code>AopProxyFactory</code>. I.e., <code>org.springframework.aop.framework.DefaultAopProxyFactory</code>.</p>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>DefaultAopProxyFactory</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.aop.framework;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import java.io.Serializable;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import java.lang.reflect.Proxy;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.SpringProxy;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">@SuppressWarnings("serial")</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class DefaultAopProxyFactory implements AopProxyFactory, Serializable {</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    @Override</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // If isOptimize or isProxyTargetClass method of passed AdvisedSupport instance returns true,</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        // Or target object does not implement any interface, then use CGLIB to generate proxy object, otherwise use dynamic proxy.</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        if (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            Class&lt;?> targetClass = config.getTargetClass();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            if (targetClass == null) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">                throw new AopConfigException("TargetSource cannot determine target class: " +</span><br/></span><span class=token-line style=color:#000000><span class="token plain">                        "Either an interface or a target is required for proxy creation.");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            if (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">                return new JdkDynamicAopProxy(config);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            return new ObjenesisCglibAopProxy(config);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        else {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            return new JdkDynamicAopProxy(config);</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    private boolean hasNoUserSuppliedProxyInterfaces(AdvisedSupport config) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Class&lt;?>[] ifcs = config.getProxiedInterfaces();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        return (ifcs.length == 0 || (ifcs.length == 1 && SpringProxy.class.isAssignableFrom(ifcs[0])));</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<p><img decoding=async loading=lazy src=https://s2.loli.net/2023/07/15/pW1gjoys6k47dvm.png alt="" class=img_HlXX /></p>
<p><code>AdvisedSupport</code> is a carrier of information needed to generate proxy object.</p>
<ul>
<li class="">One class headed by <code>org.springframework.aop.framework.ProxyConfig</code>, records control information for generating proxy object;</li>
<li class="">One class headed by <code>org.springframework.aop.framework.Advised</code>, carries necessary information needed to generate proxy object, such as related target class, Advice, Advisor etc.</li>
</ul>
<p><code>ProxyConfig</code> is a simple JavaBean, defining five boolean attributes, controlling what measures should be taken when generating proxy object respectively.</p>
<ul>
<li class=""><code>ProxyTargetClass</code>: If this attribute is set to true, <code>ProxyFactory</code> will use CGLIB to proxy target object. Default value is false.</li>
<li class=""><code>optimize</code>: This attribute is mainly used to inform whether proxy object needs to take further optimization measures. If proxy object is generated, even if corresponding <code>Advice</code> is added or removed for it, proxy object can ignore this change. If this attribute is set to true, <code>ProxyFactory</code> will use CGLIB to proxy target object. Default value is false.</li>
<li class=""><code>opaque</code>: This attribute is used to control whether generated proxy object can be forced directly to cast to <code>Advised</code>, default value is false, meaning any generated proxy object can be forced cast to <code>Advised</code>, we can query some states of proxy object via <code>Advised</code>.</li>
<li class=""><code>exposeProxy</code>: Setting <code>exposeProxy</code> allows Spring AOP framework to bind current proxy object to <code>ThreadLocal</code> when generating proxy object. If target object needs to access current proxy object, it can get proxy object via <code>AopContext.currentProxy()</code>. For performance considerations, this attribute defaults to false.</li>
<li class=""><code>frozen</code>: If <code>frozen</code> is set to true, once various information configurations for proxy object are completed, changes are not allowed. For example, <code>ProxyFactory</code> is set up, and <code>frozen</code> is true, then no changes can be made to <code>Advice</code>, this can optimize performance of proxy object, defaults to false.</li>
</ul>
<p>To generate proxy object, information provided by <code>ProxyConfig</code> alone is not enough, we also need some specific information for generating proxy object, for example, for which target classes to generate proxy object, what kind of cross-cutting logic to add to proxy object etc., this information can be set via <code>org.springframework.aop.framework.Advised</code>. By default, proxy objects returned by Spring AOP framework can all be forced cast to <code>Advised</code>, to query related information of proxy object.</p>
<p>We can use <code>Advised</code> interface to access all <code>Advisor</code> held by corresponding proxy object, perform actions like adding <code>Advisor</code>, removing <code>Advisor</code> etc. Even if proxy object has been generated, it can also be operated, operate <code>Advised</code> directly, more often used in testing scenarios, can help us check whether generated proxy object is as expected.</p>
<p><img decoding=async loading=lazy src=https://s2.loli.net/2023/07/15/hHNUgpVWqDFlZIw.png alt="" class=img_HlXX /></p>
<p><code>ProxyFactory</code> combines <code>AopProxy</code> and <code>AdvisedSupport</code> in one, can set relevant information needed to generate proxy object via <code>AdvisedSupport</code>, can generate proxy object via <code>AopProxy</code>. To reuse relevant logic, Spring AOP framework extracted some common logic to <code>org.springframework.aop.framework.ProxyCreatorSupport</code> during implementation, it inherits <code>AdvisedSupport</code>, so it can have ability to set relevant information needed to generate proxy object.</p>
<p>In order to simplify work of generating different types of <code>AopProxy</code>, <code>ProxyCreatorSupport</code> internally holds an <code>AopProxyFactory</code> instance, default uses <code>DefaultAopProxyFactory</code>.</p>
<p><img decoding=async loading=lazy src=https://s2.loli.net/2023/07/15/TYd9iNmCvOAUcjt.png alt="" class=img_HlXX /></p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=essence-of-proxyfactorybean>Essence of ProxyFactoryBean<a href=#essence-of-proxyfactorybean class=hash-link aria-label="Direct link to Essence of ProxyFactoryBean" title="Direct link to Essence of ProxyFactoryBean" translate=no>‚Äã</a></h2>
<p><code>ProxyFactoryBean</code> is essentially a <code>FactoryBean</code> used to produce Proxy. Role of <code>FactoryBean</code>:</p>
<p>If an object holds a reference to a <code>FactoryBean</code>, what it gets is not <code>FactoryBean</code> itself, but object returned by <code>FactoryBean</code>'s <code>getObject()</code> method. So, if an object in container depends on <code>ProxyFactoryBean</code>, then it will use proxy object returned by <code>ProxyFactoryBean</code>'s <code>getObject()</code> method.</p>
<p>To let <code>ProxyFactoryBean</code>'s <code>getObject()</code> method return proxy object of corresponding target object is actually very simple. Because <code>ProxyFactoryBean</code> inherits common parent class <code>ProxyCreatorSupport</code> of <code>ProxyFactory</code>, and <code>ProxyCreatorSupport</code> basically has completed all things to be done (setting target object, configuring other parts, generating corresponding <code>AopProxy</code> etc.). We only need to get proxy object via parent class's <code>createAopProxy()</code> in <code>ProxyFactoryBean</code>'s <code>getObject()</code> method, then <code>return AopProxy.getObject()</code>.</p>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>getObject()</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">public Object getObject() throws BeansException {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        initializeAdvisorChain();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        if (isSingleton()) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            return getSingletonInstance();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        else {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            if (this.targetName == null) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">                logger.info("Using non-singleton proxies with singleton targets is often undesirable. " +</span><br/></span><span class=token-line style=color:#000000><span class="token plain">                        "Enable prototype proxies by setting the 'targetName' property.");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">            return newPrototypeInstance();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span></code></pre></div></div></div></div></details>
<p><code>ProxyBean</code> definition requires indicating whether returned object is returned with singleton scope or prototype scope. Different proxy objects are returned for these two cases to satisfy semantics of <code>FactoryBean</code>'s <code>isSingleton()</code> method.</p>
<p>If <code>singleton</code> attribute of <code>ProxyFactoryBean</code> is set to true, then after <code>ProxyFactoryBean</code> generates proxy object for first time, it will cache generated proxy object via internal instance variable <code>singletonInstance</code> (Object type). All subsequent requests return this cached instance, thus satisfying singleton semantics. Conversely, if <code>singleton</code> attribute of <code>ProxyFactoryBean</code> is set to false, then <code>ProxyFactoryBean</code> will re-check all settings every time, and prepare a new set of environment for current call, then return a new proxy object according to latest environment data. Therefore, if <code>singleton</code> attribute is false, there is loss in performance of generating proxy object.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=usage-of-proxyfactorybean>Usage of ProxyFactoryBean<a href=#usage-of-proxyfactorybean class=hash-link aria-label="Direct link to Usage of ProxyFactoryBean" title="Direct link to Usage of ProxyFactoryBean" translate=no>‚Äã</a></h2>
<p>Like <code>ProxyFactory</code>, via <code>ProxyFactoryBean</code>, we can specify whether to use interface-based proxy or class-based proxy way when generating proxy object for target object, and, because they all inherit from same parent class, most setting items are same. <code>ProxyFactoryBean</code> adds its own unique ones besides inheriting all configuration attributes of <code>ProxyCreatorSupport</code>:</p>
<p><code>proxyInterfaces</code>: If we want to use interface-based proxy way, then we need to configure corresponding interface types via this attribute, pass interface information of configuration element via <code>Collection</code> object. <code>ProxyFactoryBean</code> has an <code>autodetectInterfaces</code> attribute, this attribute defaults to true, if interface type to be proxied is not explicitly specified, <code>ProxyFactoryBean</code> will automatically detect interface types implemented by target object and perform proxy.</p>
<p><code>interceptorNames</code>: Via this attribute, we can specify multiple <code>Advice</code>, interceptors and <code>Advisor</code> to be woven into target object, instead of adding <code>Advice</code> or <code>addAdvisor</code> method of <code>ProxyFactory</code>, usually we will use configuration element <code>&lt;list></code> to add needed interceptor names.</p>
<ul>
<li class="">If target object is not set, then can place Bean definition name of object at position of last element of <code>interceptorNames</code>. It is recommended to define target object directly.</li>
<li class="">By adding * wildcard after specified <code>interceptorNames</code> element name, can let <code>ProxyFactoryBean</code> search all <code>Advisor</code> matching condition in container and apply to target object.</li>
</ul>
<p>Example using wildcard</p>
<div class="language-xml codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-xml codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">beans</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">proxy</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.aop.framework.ProxyFactoryBean</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">target</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">ref</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">...</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">interceptorNames</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">list</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain">global*</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">list</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">global_debug</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.aop.interceptor.DebugInterceptor</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">global_performance</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.aop.interceptor.PerformanceMonitorInterceptor</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">beans</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><br/></span></code></pre></div></div>
<p><code>singleton</code>: <code>ProxyFactoryBean</code> is essentially a <code>FactoryBean</code>, so we can specify whether <code>getObject</code> call returns same proxy object or new one via <code>singleton</code> attribute.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_MeNW" id=proxyfactorybean-generating-proxy-object-case>ProxyFactoryBean Generating Proxy Object Case<a href=#proxyfactorybean-generating-proxy-object-case class=hash-link aria-label="Direct link to ProxyFactoryBean Generating Proxy Object Case" title="Direct link to ProxyFactoryBean Generating Proxy Object Case" translate=no>‚Äã</a></h2>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>Configuration File</summary><div><div class=collapsibleContent_wi6q><div class="language-xml codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-xml codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">beans</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://www.springframework.org/schema/beans</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br/></span><span class=token-line style=color:#000000><span class="token tag" style="color:rgb(128, 0, 0)">       </span><span class="token tag attr-name namespace" style="color:rgb(255, 0, 0)">xmlns:</span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">xsi</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://www.w3.org/2001/XMLSchema-instance</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br/></span><span class=token-line style=color:#000000><span class="token tag" style="color:rgb(128, 0, 0)">       </span><span class="token tag attr-name namespace" style="color:rgb(255, 0, 0)">xmlns:</span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">context</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://www.springframework.org/schema/context</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br/></span><span class=token-line style=color:#000000><span class="token tag" style="color:rgb(128, 0, 0)">       </span><span class="token tag attr-name namespace" style="color:rgb(255, 0, 0)">xsi:</span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">schemaLocation</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://www.springframework.org/schema/beans</span><br/></span><span class=token-line style=color:#000000><span class="token tag attr-value" style="color:rgb(128, 0, 0)">        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span><br/></span><span class=token-line style=color:#000000><span class="token tag attr-value" style="color:rgb(128, 0, 0)">        http://www.springframework.org/schema/context</span><br/></span><span class=token-line style=color:#000000><span class="token tag attr-value" style="color:rgb(128, 0, 0)">        http://www.springframework.org/schema/context/spring-context-2.5.xsd</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--    Bean definition of target object--></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">task</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br/></span><span class=token-line style=color:#000000><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.mylearntest.aop.weaver.baseoninterface.MockTask</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">scope</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prototype</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--    ProxyFactoryBean definition--></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">introducedTask</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.aop.framework.ProxyFactoryBean</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">scope</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prototype</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">targetName</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain">task</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">proxyInterfaces</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">list</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain">org.springframework.mylearntest.aop.weaver.baseoninterface.ITask</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain">org.springframework.mylearntest.aop.weaver.proxyfactorybean.ICounter</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">list</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">interceptorNames</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">list</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain">introductionInterceptor</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">value</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">list</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">property</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)">&lt;!--    introductionInterceptor definition--></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">introductionInterceptor</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"></span><br/></span><span class=token-line style=color:#000000><span class="token tag" style="color:rgb(128, 0, 0)">          </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.aop.support.DelegatingIntroductionInterceptor</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">scope</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">prototype</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">constructor-arg</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">org.springframework.mylearntest.aop.weaver.proxyfactorybean.CounterImpl</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">"</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">constructor-arg</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">bean</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><span class="token plain"></span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">beans</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">></span><br/></span></code></pre></div></div></div></div></details>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>ICounter</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.mylearntest.aop.weaver.proxyfactorybean;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">/**</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Author: whalefall</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Date: 2020/7/22 23:34</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> */</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public interface ICounter {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    void resetCounter();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    int getCounter();</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>CounterImpl</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.mylearntest.aop.weaver.proxyfactorybean;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">/**</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Author: whalefall</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Date: 2020/7/22 23:35</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> */</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class CounterImpl implements ICounter{</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    private int counter;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    @Override</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public void resetCounter() {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        counter = 0;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">    @Override</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public int getCounter() {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        counter ++;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        return counter;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<details class="details_zlek alert alert--info details_bHoW" data-collapsed=true><summary>TestProxyFactoryBean</summary><div><div class=collapsibleContent_wi6q><div class="language-java codeBlockContainer_bszE theme-code-block" style=--prism-color:#000000;--prism-background-color:#ffffff><div class=codeBlockContent_Y8Vh><pre tabindex=0 class="prism-code language-java codeBlock_ltuo thin-scrollbar" style=color:#000000;background-color:#ffffff><code class=codeBlockLines_WpDZ><span class=token-line style=color:#000000><span class="token plain">package org.springframework.mylearntest.aop.weaver.proxyfactorybean;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.aop.support.DelegatingIntroductionInterceptor;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.context.ApplicationContext;</span><br/></span><span class=token-line style=color:#000000><span class="token plain">import org.springframework.context.support.ClassPathXmlApplicationContext;</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">/**</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Author: whalefall</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @Date: 2020/7/22 23:51</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> * @see DelegatingIntroductionInterceptor</span><br/></span><span class=token-line style=color:#000000><span class="token plain"> */</span><br/></span><span class=token-line style=color:#000000><span class="token plain">public class Test4ProxyFactoryBean {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    public static void main(String[] args) {</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        ApplicationContext context = new ClassPathXmlApplicationContext("proxyfactorybean\\proxyfactorybean.xml");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Object proxy1 = context.getBean("introducedTask");</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        Object proxy2 = context.getBean("introducedTask");</span><br/></span><span class=token-line style=color:#000000><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#000000><span class="token plain">        System.out.println(((ICounter)proxy1).getCounter());//1</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        System.out.println(((ICounter)proxy1).getCounter());//2</span><br/></span><span class=token-line style=color:#000000><span class="token plain">        System.out.println(((ICounter)proxy2).getCounter());//1</span><br/></span><span class=token-line style=color:#000000><span class="token plain">    }</span><br/></span><span class=token-line style=color:#000000><span class="token plain">}</span><br/></span></code></pre></div></div></div></div></details>
<blockquote>
<p>References</p>
<ol>
<li class="">Book Name: Spring Unveiled Author: Wang Fuqiang</li>
</ol>
</blockquote>
<!-- -->
<div class="theme-admonition theme-admonition-tip admonition_fT_L alert alert--success"><div class=admonitionHeading_zhbz><span class=admonitionIcon_FhuL><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Agreement</div><div class=admonitionContent_ywFg>The code part of this work is licensed under <a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License 2.0</a> <!-- -->. You may freely modify and redistribute the code, and use it for commercial purposes, provided that you comply with the license. However, you are required to:<br/><ul><li><b>Attribution</b>: Retain the original author's signature and code source information in the original and derivative code.<li><b>Preserve License</b>: Retain the Apache 2.0 license file in the original and derivative code.</ul>The documentation part of this work is licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a> <!-- -->. You may freely share, including copying and distributing this work in any medium or format, and freely adapt, remix, transform, and build upon the material. However, you are required to:<ul><li><b>Attribution</b>: Give appropriate credit, provide a link to the license, and indicate if changes were made.<li><b>NonCommercial</b>: You may not use the material for commercial purposes. For commercial use, please contact the author.<li><b>ShareAlike</b>: If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</ul></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class=col><b>Tags:</b><ul class="tags_cey7 padding--none margin-left--sm"><li class=tag_MXhx><a rel=tag class="tag_Zm2d tagRegular_K9wS" href=/en/tags/algorithm>algorithm</a><li class=tag_MXhx><a rel=tag class="tag_Zm2d tagRegular_K9wS" href=/en/tags/computer-science>computer-science</a><li class=tag_MXhx><a rel=tag class="tag_Zm2d tagRegular_K9wS" href=/en/tags/data-structures>data-structures</a></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_hj8p"><a href=https://github.com/Halcyon666/summary/edit/main/docs/background/Java/Spring/AOP/Weaving/weaving-programmatic.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_S0L0 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_UNFw"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2026-01-25T00:00:00.000Z itemprop=dateModified>Jan 25, 2026</time></b> by <b>halcyon666</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/background/Java/Spring/AOP/Weaving/weaving-autoproxy><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Weaving in Spring AOP 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/background/Java/Spring/AOP/AspectJ/aspectj-overview><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Overview of AspectJ style AOP</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_QilJ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#interface-based-proxy class="table-of-contents__link toc-highlight">Interface-based Proxy</a><li><a href=#class-based-proxy class="table-of-contents__link toc-highlight">Class-based Proxy</a><li><a href=#weaving-of-introduction class="table-of-contents__link toc-highlight">Weaving of Introduction</a><li><a href=#essence-of-proxyfactory class="table-of-contents__link toc-highlight">Essence of ProxyFactory</a><li><a href=#essence-of-proxyfactorybean class="table-of-contents__link toc-highlight">Essence of ProxyFactoryBean</a><li><a href=#usage-of-proxyfactorybean class="table-of-contents__link toc-highlight">Usage of ProxyFactoryBean</a><li><a href=#proxyfactorybean-generating-proxy-object-case class="table-of-contents__link toc-highlight">ProxyFactoryBean Generating Proxy Object Case</a></ul></div></div></div><div style=margin-top:2rem><div style="margin-top:2rem;margin-bottom:1rem;padding:1rem;background-color:var(--ifm-color-emphasis-100);border-radius:8px;border:1px solid var(--ifm-color-emphasis-300)"><div style=display:flex;justify-content:space-between;align-items:center;cursor:pointer><h4 style=margin:0;font-size:1rem>üí¨ ËØÑËÆ∫ÊåáÂçó / Comment Guidelines</h4><span style=font-size:1.2rem>‚ñ∂</span></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ¬© 2026 Halcyon666 Built with Docusaurus 3.9.2</div></div></div></footer></div></body>