"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["2098"],{49676(e,t,i){i.r(t),i.d(t,{metadata:()=>n,default:()=>u,frontMatter:()=>a,contentTitle:()=>c,toc:()=>l,assets:()=>d});var n=JSON.parse('{"id":"background/Java/Spring/AOP/aspect","title":"Aspect in Spring AOP","description":"Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/background/Java/Spring/AOP/aspect.mdx","sourceDirName":"background/Java/Spring/AOP","slug":"/background/Java/Spring/AOP/aspect","permalink":"/en/background/Java/Spring/AOP/aspect","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/background/Java/Spring/AOP/aspect.mdx","tags":[{"inline":true,"label":"algorithm","permalink":"/en/tags/algorithm"},{"inline":true,"label":"computer-science","permalink":"/en/tags/computer-science"},{"inline":true,"label":"data-structures","permalink":"/en/tags/data-structures"}],"version":"current","lastUpdatedBy":"halcyon666","lastUpdatedAt":1769299200000,"sidebarPosition":10,"frontMatter":{"id":"aspect","title":"Aspect in Spring AOP","sidebar_label":"Aspect in Spring AOP","sidebar_position":10,"description":"Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)","tags":["algorithm","computer-science","data-structures"],"last_update":{"date":"2026-01-25","author":"halcyon666"},"sources":["spring-core"]},"sidebar":"tutorialSidebar","previous":{"title":"Advice in Spring AOP","permalink":"/en/background/Java/Spring/AOP/advice"},"next":{"title":"Joinpoint","permalink":"/en/background/Java/Spring/AOP/joinpoint"}}'),r=i(62615),o=i(77545),s=i(4040);let a={id:"aspect",title:"Aspect in Spring AOP",sidebar_label:"Aspect in Spring AOP",sidebar_position:10,description:"Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)",tags:["algorithm","computer-science","data-structures"],last_update:{date:"2026-01-25",author:"halcyon666"},sources:["spring-core"]},c,d={},l=[{value:"PointcutAdvisor",id:"pointcutadvisor",level:2},{value:"DefaultPointcutAdvisor",id:"defaultpointcutadvisor",level:3},{value:"NameMatchMethodPointcutAdvisor",id:"namematchmethodpointcutadvisor",level:3},{value:"RegexpMethodPointcutAdvisor",id:"regexpmethodpointcutadvisor",level:3},{value:"DefaultBeanFactoryPointcutAdvisor",id:"defaultbeanfactorypointcutadvisor",level:3},{value:"IntroductionAdvisor",id:"introductionadvisor",level:3},{value:"Order",id:"order",level:3}];function p(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Please refer to ",(0,r.jsx)(t.a,{href:"https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test",children:"spring-framework"})," under ",(0,r.jsx)(t.code,{children:"org.springframework.mylearntest"})," package for code related to this article (from ",(0,r.jsx)(t.a,{href:"https://github.com/spring-projects/spring-framework.git",title:"official source",children:"official source"})," spring-test module)."]}),"\n",(0,r.jsx)(t.p,{children:"Aspect is the conceptual entity of AOP that encapsulates cross-cutting concern logic in the system. Usually, Aspect can contain multiple Pointcuts and related Advice definitions."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/9p6abQqSsHTxLFX.png",alt:""})}),"\n",(0,r.jsx)(t.p,{children:"Advisor represents Aspect in Spring, but unlike normal Aspect, Advisor usually only holds one Pointcut and one Advice. Theoretically, Aspect definition can have multiple Pointcuts and multiple Advices, so Advisor is a special kind of Aspect."}),"\n",(0,r.jsx)(t.h2,{id:"pointcutadvisor",children:"PointcutAdvisor"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/Iy3GrnFvNWlB92k.png",alt:""})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/yqwr2TXstDvE4YM.png",alt:""})}),"\n",(0,r.jsxs)(t.p,{children:["Actually, ",(0,r.jsx)(t.code,{children:"org.springframework.aop.PointcutAdvisor"})," is the real definition of Advisor having one Pointcut and one Advice, most Advisor implementations are under ",(0,r.jsx)(t.code,{children:"PointcutAdvisor"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"defaultpointcutadvisor",children:"DefaultPointcutAdvisor"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:'<beans>\n    <bean id="pointcut"\n      class="org.springframework.mylearntest.aop.pointcut.selfdefinepointcut.QueryMethodPointcut"/>\n    <bean id="advice" class="org.springframework.mylearntest.aop.advice.perclass.DiscountMethodInterceptor"/>\n\n    <bean id="advisor" class="org.springframework.aop.support.DefaultPointcutAdvisor">\n        <property name="pointcut" ref="pointcut"/>\n        <property name="advice" ref="advice"/>\n    </bean>\n</beans>\n'})}),"\n",(0,r.jsx)(t.h3,{id:"namematchmethodpointcutadvisor",children:"NameMatchMethodPointcutAdvisor"}),"\n",(0,r.jsxs)(t.p,{children:["This class internally holds a ",(0,r.jsx)(t.code,{children:"NameMatchMethodPointcut"})," type Pointcut instance. When setting method names to be intercepted via ",(0,r.jsx)(t.code,{children:"setMappedName"})," and ",(0,r.jsx)(t.code,{children:"setMappedNames"})," methods exposed by ",(0,r.jsx)(t.code,{children:"NameMatchMethodPointcutAdvisor"}),", it is actually operating on the ",(0,r.jsx)(t.code,{children:"NameMatchMethodPointcut"})," instance inside ",(0,r.jsx)(t.code,{children:"NameMatchMethodPointcutAdvisor"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'Advice advice = new DiscountMethodInterceptor();\nNameMatchMethodPointcutAdvisor advisor = new NameMatchMethodPointcutAdvisor(advice);\nadvisor.setMappedName("invoke");\n'})}),"\n",(0,r.jsx)(t.h3,{id:"regexpmethodpointcutadvisor",children:"RegexpMethodPointcutAdvisor"}),"\n",(0,r.jsxs)(t.p,{children:["Can only set corresponding Pointcut for it via regular expression, internally holds an instance of ",(0,r.jsx)(t.code,{children:"AbstractRegexpMethodPointcut"}),". ",(0,r.jsx)(t.code,{children:"AbstractRegexpMethodPointcut"})," has two implementation classes, ",(0,r.jsx)(t.code,{children:"Perl5RegexpMethodPointcutAdvisor"})," and ",(0,r.jsx)(t.code,{children:"JdkRegexpMethodPointcut"}),". Defaults to using ",(0,r.jsx)(t.code,{children:"JdkRegexpMethodPointcut"}),". If forced to use ",(0,r.jsx)(t.code,{children:"Perl5RegexpMethodPointcutAdvisor"}),", then can be achieved via ",(0,r.jsx)(t.code,{children:"RegexpMethodPointcutAdvisor"}),"'s ",(0,r.jsx)(t.code,{children:"setPerl5(boolean)"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"defaultbeanfactorypointcutadvisor",children:"DefaultBeanFactoryPointcutAdvisor"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"DefaultBeanFactoryPointcutAdvisor"})," itself is bound to ",(0,r.jsx)(t.code,{children:"BeanFactory"}),". To use ",(0,r.jsx)(t.code,{children:"DefaultBeanFactoryPointcutAdvisor"}),", need to bind to Spring IoC container. Associate corresponding Advice via ",(0,r.jsx)(t.code,{children:"beanName"})," of Advice registered in container. Only after corresponding Pointcut matches successfully, instantiate corresponding Advice, reducing coupling between Advisor and Advice during container startup phase."]}),"\n",(0,r.jsx)(t.h3,{id:"introductionadvisor",children:"IntroductionAdvisor"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"IntroductionAdvisor"})," can only be applied to class-level interception, can only use Introduction type Advice, and cannot use arbitrary types of Pointcut like ",(0,r.jsx)(t.code,{children:"PointcutAdvisor"}),", as well as almost any type of Advice."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/8pNE2drJ1BfLn4D.png",alt:"IntroductionAdvisor Class Structure",title:"IntroductionAdvisor Class Structure"})}),"\n",(0,r.jsx)(t.h3,{id:"order",children:"Order"}),"\n",(0,r.jsx)(t.p,{children:"Most of the time, there will be multiple cross-cutting concern points, so there will be multiple Advisors in system implementation. When Pointcuts of some Advisors match the same Joinpoint, cross-cutting logic of multiple Advices will be executed at this same Joinpoint. Once there is priority dependency among these Advice logics that need to be executed at same Joinpoint, we need to intervene."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/87ohZirCFMmLq46.png",alt:""})}),"\n",(0,r.jsx)(t.p,{children:"When Spring handles multiple Advisors at same Joinpoint, it will execute them according to specified order priority. Smaller order number means higher priority, higher priority ones are executed first. (By default, Spring will apply them according to their declaration order, the first declared one has smallest order number but highest priority, followed by others)"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/cnDqxbIEChpBNlz.png",alt:""})}),"\n",(0,r.jsxs)(t.p,{children:["Each Advisor implementation class actually has implemented ",(0,r.jsx)(t.code,{children:"Order"})," interface. When using, we can directly specify it."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:'<beans>\n    <bean id="permissionAuthAdvisor" class="...PermissionAuthAdvisor">\n        <property name="order" value="1"/>\n        ...\n    </bean>\n\n    <bean id="exceptionBarrierAdvisor" class="...ExceptionBarrierAdvisor">\n        <property name="order" value="0"/>\n        ...\n    </bean>\n</beans>\n'})}),"\n","\n",(0,r.jsx)(s.A,{})]})}function u(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);