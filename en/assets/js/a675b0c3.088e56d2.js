"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["7039"],{19581(e,n,s){s.r(n),s.d(n,{metadata:()=>i,default:()=>h,frontMatter:()=>a,contentTitle:()=>l,toc:()=>c,assets:()=>o});var i=JSON.parse('{"id":"ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag","title":"Level 2 - RAG App Development & Heterogeneous System Architecture","description":"Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag.mdx","sourceDirName":"ai-bigdata/AI/prompt-engineering-roadmap","slug":"/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag","permalink":"/en/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/ai-bigdata/AI/prompt-engineering-roadmap/level-2-rag.mdx","tags":[{"inline":true,"label":"ai","permalink":"/en/tags/ai"},{"inline":true,"label":"rag","permalink":"/en/tags/rag"},{"inline":true,"label":"level-2","permalink":"/en/tags/level-2"}],"version":"current","lastUpdatedBy":"halcyon666","lastUpdatedAt":1769472000000,"sidebarPosition":3,"frontMatter":{"id":"level-2-rag","title":"Level 2 - RAG App Development & Heterogeneous System Architecture","sidebar_label":"Level 2 - RAG App Development","sidebar_position":3,"description":"Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system","tags":["ai","rag","level-2"],"sources":["overview","level-1-ai-native"],"references":["level-3-agent"],"last_update":{"date":"2026-01-27","author":"halcyon666"}},"sidebar":"tutorialSidebar","previous":{"title":"Level 1 - AI-Native Workflow","permalink":"/en/ai-bigdata/AI/prompt-engineering-roadmap/level-1-ai-native"},"next":{"title":"Level 3 - Agent Architecture","permalink":"/en/ai-bigdata/AI/prompt-engineering-roadmap/level-3-agent"}}'),t=s(62615),r=s(77545);let a={id:"level-2-rag",title:"Level 2 - RAG App Development & Heterogeneous System Architecture",sidebar_label:"Level 2 - RAG App Development",sidebar_position:3,description:"Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system",tags:["ai","rag","level-2"],sources:["overview","level-1-ai-native"],references:["level-3-agent"],last_update:{date:"2026-01-27",author:"halcyon666"}},l="Phase 2: RAG App Development & Heterogeneous System Architecture (Level 2)",o={},c=[{value:"Prerequisite Capabilities",id:"prerequisite-capabilities",level:2},{value:"Why this phase is needed",id:"why-this-phase-is-needed",level:2},{value:"\u2B50 Core Capability 1: Dual-Track RAG Implementation",id:"-core-capability-1-dual-track-rag-implementation",level:2},{value:"\u2B50 Platform Stream: Dify Enterprise Practice (80% Scenarios)",id:"-platform-stream-dify-enterprise-practice-80-scenarios",level:3},{value:"\u2B50 Core Practice: Dify Custom Tool",id:"-core-practice-dify-custom-tool",level:3},{value:"Task Description",id:"task-description",level:4},{value:"Implementation Steps",id:"implementation-steps",level:4},{value:"Code Stream: Handwritten RAG Link (20% Deep Customization)",id:"code-stream-handwritten-rag-link-20-deep-customization",level:3},{value:"\u2B50 Early Eval (Early Evaluation) - Crucial!",id:"-early-eval-early-evaluation---crucial",level:3},{value:"\u2B50 Core Capability 2: Heterogeneous System Communication Protocol (Java \u2194 Python)",id:"-core-capability-2-heterogeneous-system-communication-protocol-java--python",level:2},{value:"Core Challenges",id:"core-challenges",level:3},{value:"Architecture Design: Three-Layer Solution",id:"architecture-design-three-layer-solution",level:3},{value:"Hybrid Search Strategy",id:"hybrid-search-strategy",level:3},{value:"Core Capability 3: Dual Database Architecture Design",id:"core-capability-3-dual-database-architecture-design",level:2},{value:"Phase Output Standards",id:"phase-output-standards",level:2},{value:"Roadmap Optimization Suggestions",id:"roadmap-optimization-suggestions",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"phase-2-rag-app-development--heterogeneous-system-architecture-level-2",children:"Phase 2: RAG App Development & Heterogeneous System Architecture (Level 2)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Cycle"}),": Weeks 3-5\n",(0,t.jsx)(n.strong,{children:"Core Goal"}),": Master Retrieval-Augmented Generation (RAG), understand Java-Python heterogeneous system communication, establish evaluation system"]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisite-capabilities",children:"Prerequisite Capabilities"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Mastered Python basics and AI tool usage (Level 1)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Established AI-Native development habits"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Deployed local Ollama and Vector Database"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"why-this-phase-is-needed",children:"Why this phase is needed"}),"\n",(0,t.jsx)(n.p,{children:'RAG is core capability of AI applications. Agent\'s intelligent decision depends on knowledge retrieval capability provided by RAG. Must first master "How to let AI acquire external knowledge" before entering "How to let AI decide autonomously".'}),"\n",(0,t.jsx)(n.h2,{id:"-core-capability-1-dual-track-rag-implementation",children:"\u2B50 Core Capability 1: Dual-Track RAG Implementation"}),"\n",(0,t.jsx)(n.h3,{id:"-platform-stream-dify-enterprise-practice-80-scenarios",children:"\u2B50 Platform Stream: Dify Enterprise Practice (80% Scenarios)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:'Strategy: "Extend, Don\'t Deep Dive"'})}),"\n",(0,t.jsxs)(n.p,{children:['Treat Dify as "Black Box" or "Component", focus on how to ',(0,t.jsx)(n.strong,{children:"Extend"})," it:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Custom Tooling"}),": Write Python API for Dify to call, letting Java system communicate with Dify"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Workflow Orchestration"}),": Master Dify's Workflow nodes, understand how to pass variables between nodes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Why skip source code?"})," Dify is based on Flask/Next.js/PostgreSQL complex stack, unless fixing bug, time should be spent on ",(0,t.jsx)(n.strong,{children:"LangGraph"})," (Complex Logic) or ",(0,t.jsx)(n.strong,{children:"Milvus"})," (Data Side)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2B50 Practical Task"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Deploy Dify using Docker"}),"\n",(0,t.jsx)(n.li,{children:"Connect Local Ollama"}),"\n",(0,t.jsx)(n.li,{children:"\u2B50 Build Enterprise Knowledge Base: Upload PDF, configure Embedding model, test hybrid search"}),"\n",(0,t.jsx)(n.li,{children:"Publish Web Chatbot"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-core-practice-dify-custom-tool",children:"\u2B50 Core Practice: Dify Custom Tool"}),"\n",(0,t.jsxs)(n.p,{children:["Use your ",(0,t.jsx)(n.strong,{children:"Spring Boot"})," advantage to enhance Agent's hands and feet."]}),"\n",(0,t.jsx)(n.h4,{id:"task-description",children:"Task Description"}),"\n",(0,t.jsx)(n.p,{children:"Dify cannot directly access your company's real-time data (e.g. server status, database inventory), you need to write an API for it to call."}),"\n",(0,t.jsx)(n.h4,{id:"implementation-steps",children:"Implementation Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Backend Development (Spring Boot)"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Write an interface ",(0,t.jsx)(n.code,{children:"GET /api/v1/system/status"}),", returning CPU/Memory/Business data in JSON format."]}),"\n",(0,t.jsxs)(n.li,{children:["Generate ",(0,t.jsx)(n.strong,{children:"OpenAPI (Swagger)"})," description document."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dify Integration"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'In Dify "Tools" tab -> "Create Custom Tool".'}),"\n",(0,t.jsx)(n.li,{children:"Import your OpenAPI Schema."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Agent Orchestration"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Enable the tool in Prompt."}),"\n",(0,t.jsx)(n.li,{children:'Test question: "How is system load now?" -> Agent automatically calls Java interface -> Answer.'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"code-stream-handwritten-rag-link-20-deep-customization",children:"Code Stream: Handwritten RAG Link (20% Deep Customization)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Core Components"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2B50 ",(0,t.jsx)(n.strong,{children:"Milvus"}),": Deploy and understand HNSW index principle"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2B50 ",(0,t.jsx)(n.strong,{children:"Embedding"}),": Use ",(0,t.jsx)(n.code,{children:"sentence-transformers"})," to load ",(0,t.jsx)(n.code,{children:"bge-base-zh"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2B50 Advanced Chunking Strategy"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u2B50 ",(0,t.jsx)(n.strong,{children:"Parent-Child Indexing"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Index small chunk (128 tokens, precise retrieval)"}),"\n",(0,t.jsx)(n.li,{children:"Return parent chunk (512 tokens, retain context)"}),"\n",(0,t.jsx)(n.li,{children:'Solve "Precise retrieval but insufficient context" problem'}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"HyDE (Hypothetical Document Embeddings)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Let LLM generate "Hypothetical Answer" first'}),"\n",(0,t.jsx)(n.li,{children:"Use hypothetical answer's Embedding to search documents"}),"\n",(0,t.jsx)(n.li,{children:'Solve "Question and document semantics mismatch" problem'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2B50 Practical Code Link"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Read PDF \u2192 Advanced Chunking \u2192 Vectorization \u2192 Store in Milvus \u2192 Retrieval \u2192 Assemble Prompt \u2192 LLM Answer\n"})}),"\n",(0,t.jsx)(n.h3,{id:"-early-eval-early-evaluation---crucial",children:"\u2B50 Early Eval (Early Evaluation) - Crucial!"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2B50 Core Concept"}),": Treat RAG evaluation as ",(0,t.jsx)(n.strong,{children:"Unit Test"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2B50 Golden Dataset Construction Method"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Select Representative Questions"})," (10-20):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cover different difficulties: Simple fact query, complex reasoning, multi-hop questions"}),"\n",(0,t.jsx)(n.li,{children:"Cover different topics: Ensure coverage of various fields of knowledge base"}),"\n",(0,t.jsx)(n.li,{children:"Include edge cases: Questions with no answer in knowledge base"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Write Standard Answers"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Annotate answer source (which paragraph of which document)"}),"\n",(0,t.jsx)(n.li,{children:"Annotate key information points (for evaluating recall rate)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u2B50 Automated Evaluation Script"}),":"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Example: RAG Evaluation Script\nfrom ragas import evaluate\nfrom ragas.metrics import faithfulness, answer_relevancy\n\n# Golden Dataset\ngolden_qa = [\n    {"question": "How to optimize RAG retrieval?", "answer": "Use Parent-Child indexing", "context": "..."},\n    # ... More QA pairs\n]\n\n# Run Evaluation\nresults = evaluate(golden_qa, metrics=[faithfulness, answer_relevancy])\nprint(f"Faithfulness: {results[\'faithfulness\']:.2f}")\nprint(f"Answer Relevancy: {results[\'answer_relevancy\']:.2f}")\n\n# If score < 0.7, RAG link needs optimization\nassert results[\'faithfulness\'] > 0.7, "RAG Faithfulness Insufficient"\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Integrate to CI/CD"})," (Implement Evaluation Shift Left):"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Treat RAG evaluation as Unit Test, automatically verify quality on every modification."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Implementation Steps"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Create Evaluation Script"}),": Save above RAG evaluation code to ",(0,t.jsx)(n.code,{children:"tests/test_rag_quality.py"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u2B50 ",(0,t.jsx)(n.strong,{children:"Set Quality Threshold"}),": Define minimum acceptable score (Faithfulness > 0.7, Answer Relevancy > 0.7)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Integrate CI Pipeline"}),": Add evaluation step in GitHub Actions / GitLab CI"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CI Config Example"})," (GitHub Actions):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# .github/workflows/rag-quality.yml\nname: RAG Quality Check\non: [push, pull_request]\njobs:\n  evaluate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - name: Run RAG Evaluation\n        run: |\n          python tests/test_rag_quality.py\n          # If score below threshold, CI fails\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Ragas or TruLens"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2B50 ",(0,t.jsx)(n.strong,{children:"Ragas"}),": More suitable for RAG systems, provides metrics like Faithfulness, Answer Relevancy"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"TruLens"}),": More suitable for complex Agents, provides complete Trace analysis"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Effect Verification"}),": After modifying Prompt, CI automatically runs evaluation. If Faithfulness drops more than 5%, automatically block merge."]}),"\n",(0,t.jsx)(n.h2,{id:"-core-capability-2-heterogeneous-system-communication-protocol-java--python",children:"\u2B50 Core Capability 2: Heterogeneous System Communication Protocol (Java \u2194 Python)"}),"\n",(0,t.jsx)(n.h3,{id:"core-challenges",children:"Core Challenges"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AI Inference slow (Python), Business Logic fast (Java)"})," \u2192 Need async decoupling"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2B50 ",(0,t.jsx)(n.strong,{children:"Java needs deterministic JSON object, LLM output unstable"})," \u2192 Need structured output validation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cross-language data consistency"})," \u2192 Need unified data contract"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"architecture-design-three-layer-solution",children:"Architecture Design: Three-Layer Solution"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2B50 1. Structured Output Validation"})}),"\n",(0,t.jsx)(n.p,{children:"Python Side:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from pydantic import BaseModel\nfrom instructor import patch\n\nclass UserInfo(BaseModel):\n    user_id: str\n    email: str\n    profile: dict\n\n# Force LLM output to conform to Pydantic model\nclient = patch(OpenAI())\nresponse = client.chat.completions.create(\n    model="gpt-4",\n    response_model=UserInfo,\n    messages=[{"role": "user", "content": "Extract user info from: ..."}]\n)\n# response guaranteed to be UserInfo type\n'})}),"\n",(0,t.jsx)(n.p,{children:"Java Side:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Use OpenAPI/Swagger to generate corresponding DTO\n@Data\npublic class UserInfo {\n    private String userId;\n    private String email;\n    private Map<String, Object> profile;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2B50 2. Async Communication Mode (Sidecar Pattern)"})}),"\n",(0,t.jsx)(n.p,{children:"Architecture Diagram:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'User Request \u2192 Java Backend (Business Logic) \u2192 Return "Processing"\n              \u2193\n         Message Queue (RabbitMQ)\n              \u2193\n    Python Service (AI Inference) \u2192 Processing Complete\n              \u2193\n         Callback Java (Update Status)\n'})}),"\n",(0,t.jsx)(n.p,{children:"Practical Scenario:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'User uploads PDF, Java backend directly returns "Processing"'}),"\n",(0,t.jsx)(n.li,{children:"Notify Python service via MQ to perform chunking, vectorization"}),"\n",(0,t.jsx)(n.li,{children:"Callback Java to update status after completion"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. Data Contract Definition (OpenAPI/Swagger)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# shared-api-spec.yaml\ncomponents:\n  schemas:\n    RAGRequest:\n      type: object\n      properties:\n        query:\n          type: string\n        top_k:\n          type: integer\n          default: 5\n    RAGResponse:\n      type: object\n      properties:\n        answer:\n          type: string\n        sources:\n          type: array\n          items:\n            type: string\n        confidence:\n          type: number\n"})}),"\n",(0,t.jsx)(n.p,{children:"Java Side uses OpenAPI Generator to generate Feign Client:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@FeignClient(name = "rag-service", url = "${rag.service.url}")\npublic interface RAGServiceClient {\n    @PostMapping("/query")\n    RAGResponse query(@RequestBody RAGRequest request);\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"hybrid-search-strategy",children:"Hybrid Search Strategy"}),"\n",(0,t.jsxs)(n.p,{children:["Combine ",(0,t.jsx)(n.strong,{children:"Full Text Search (Elasticsearch/MySQL)"})," with ",(0,t.jsx)(n.strong,{children:"Vector Search (Milvus)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Hybrid Search Example\ndef hybrid_search(query: str, top_k: int = 5):\n    # 1. Vector Search (Semantic Similarity)\n    vector_results = milvus_client.search(query_embedding, top_k=10)\n    \n    # 2. Full Text Search (Keyword Match)\n    keyword_results = elasticsearch.search(query, top_k=10)\n    \n    # 3. Fuse Results (Reciprocal Rank Fusion)\n    final_results = rrf_fusion(vector_results, keyword_results, top_k=top_k)\n    \n    return final_results\n"})}),"\n",(0,t.jsx)(n.h2,{id:"core-capability-3-dual-database-architecture-design",children:"Core Capability 3: Dual Database Architecture Design"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Architecture"}),": MySQL (Business Data) + Vector DB (Semantic Data)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Data Sync Consistency Issue"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Java Side: Sync to vector DB when creating user\n@Transactional\npublic void createUser(User user) {\n    // 1. Save to MySQL\n    userRepository.save(user);\n    \n    // 2. Send event to MQ (Async sync to vector DB)\n    rabbitTemplate.convertAndSend("user.created", new UserCreatedEvent(user));\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Python Side: Listen to MQ, sync to vector DB\n@mq_consumer("user.created")\ndef sync_user_to_vector_db(event: UserCreatedEvent):\n    embedding = embed_model.encode(event.user.profile)\n    milvus_client.insert({\n        "user_id": event.user.id,\n        "embedding": embedding,\n        "metadata": event.user.to_dict()\n    })\n'})}),"\n",(0,t.jsx)(n.h2,{id:"phase-output-standards",children:"Phase Output Standards"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Deliverables Must Complete"})," (As prerequisites for entering Level 3):"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"RAG Application Layer"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Configured Dify deployment and published at least 1 Knowledge Base app, able to answer domain questions"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Dify Custom Tool"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u2B50 Handwritten complete RAG link code, containing: PDF Parsing \u2192 Chunking \u2192 Vectorization \u2192 Milvus Storage \u2192 Retrieval \u2192 LLM Generation"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u2B50 Implement at least 1 advanced chunking strategy (Parent-Child or HyDE), and verify effect through contrast experiment"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Evaluation System Layer"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u2B50 Establish Golden Dataset (10-20 QA pairs), containing questions of different difficulties and topics"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u2B50 Implement automated evaluation script, integrate Ragas or TruLens"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(n.strong,{children:"Quantitative Metrics"}),": Test using Golden Dataset, recall rate improved by at least 20% from baseline (e.g. from 0.60 to 0.72), Faithfulness > 0.7"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Heterogeneous System Architecture Layer"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u2B50 Design and implement Java-Python async communication architecture (Using RabbitMQ or Kafka)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Implement Hybrid Search strategy (Vector + Full Text), and verify effect improvement through A/B testing"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Define unified OpenAPI data contract, Java side able to call Python service via Feign Client"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Capability Verification"}),":"]}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",'\u2B50 Able to explain "Why Parent-Child Indexing is better than ordinary chunking" and give data support']}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Able to design a complete dual database architecture (MySQL + Milvus), and solve data sync consistency issue"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Time Checkpoint"}),": If not completed after 3 weeks, suggest using Dify to complete basic RAG first, then gradually add advanced features"]}),"\n",(0,t.jsx)(n.h2,{id:"roadmap-optimization-suggestions",children:"Roadmap Optimization Suggestions"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Practical Project"}),': Build "Search Switcher" in Java, automatically decide based on question type:']}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Use Database Query (Structured Data, e.g. "Query user orders")'}),"\n",(0,t.jsx)(n.li,{children:'Use RAG Query (Unstructured Knowledge, e.g. "How to optimize system performance")'}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Previous Phase"}),": ",(0,t.jsx)(n.a,{href:"./level-1-ai-native",children:"Level 1 - AI-Native Workflow & Infrastructure"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Next Phase"}),": ",(0,t.jsx)(n.a,{href:"./level-3-agent",children:"Level 3 - Agent Architecture & Observability"})]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);