"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["6738"],{12668(e,t,r){r.r(t),r.d(t,{metadata:()=>a,default:()=>g,frontMatter:()=>i,contentTitle:()=>c,toc:()=>l,assets:()=>p});var a=JSON.parse('{"id":"background/Java/Spring/AOP/AspectJ/aspectj-weaving","title":"AspectJ Weaving Methods","description":"Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/background/Java/Spring/AOP/AspectJ/aspectj-weaving.mdx","sourceDirName":"background/Java/Spring/AOP/AspectJ","slug":"/background/Java/Spring/AOP/AspectJ/aspectj-weaving","permalink":"/en/background/Java/Spring/AOP/AspectJ/aspectj-weaving","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/background/Java/Spring/AOP/AspectJ/aspectj-weaving.mdx","tags":[{"inline":true,"label":"algorithm","permalink":"/en/tags/algorithm"},{"inline":true,"label":"computer-science","permalink":"/en/tags/computer-science"},{"inline":true,"label":"data-structures","permalink":"/en/tags/data-structures"}],"version":"current","lastUpdatedBy":"halcyon666","lastUpdatedAt":1769299200000,"sidebarPosition":10,"frontMatter":{"id":"aspectj-weaving","title":"AspectJ Weaving Methods","sidebar_label":"AspectJ Weaving Methods","sidebar_position":10,"description":"Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)","tags":["algorithm","computer-science","data-structures"],"last_update":{"date":"2026-01-25","author":"halcyon666"},"sources":["spring-core"]},"sidebar":"tutorialSidebar","previous":{"title":"Overview of AspectJ style AOP","permalink":"/en/background/Java/Spring/AOP/AspectJ/aspectj-overview"},"next":{"title":"Usage of AspectJ style AOP","permalink":"/en/background/Java/Spring/AOP/AspectJ/full-aspectj-temp"}}'),n=r(62615),o=r(77545),s=r(4040);let i={id:"aspectj-weaving",title:"AspectJ Weaving Methods",sidebar_label:"AspectJ Weaving Methods",sidebar_position:10,description:"Please refer to [spring-framework](https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test) for code related to this article (from official source spring-test module)",tags:["algorithm","computer-science","data-structures"],last_update:{date:"2026-01-25",author:"halcyon666"},sources:["spring-core"]},c,p={},l=[{value:"Two Ways to Weave Aspect",id:"two-ways-to-weave-aspect",level:2},{value:"Programmatic Weaving",id:"programmatic-weaving",level:3},{value:"Weaving via Auto-Proxy",id:"weaving-via-auto-proxy",level:3}];function d(e){let t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components},{Details:r}=t;return r||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["Please refer to ",(0,n.jsx)(t.a,{href:"https://github.com/Halcyon666/spring-framework-modified/tree/main/spring-test",children:"spring-framework"})," under ",(0,n.jsx)(t.code,{children:"org.springframework.mylearntest"})," package for code related to this article (from ",(0,n.jsx)(t.a,{href:"https://github.com/spring-projects/spring-framework.git",title:"official source",children:"official source"})," spring-test module)."]}),"\n",(0,n.jsx)(t.h2,{id:"two-ways-to-weave-aspect",children:"Two Ways to Weave Aspect"}),"\n",(0,n.jsxs)(t.p,{children:["Suppose we have a target object ",(0,n.jsx)(t.code,{children:"Foo"}),", there are two ways to weave Aspect definition into this target object class, to achieve interception of Joinpoints conforming to Pointcut definition."]}),"\n",(0,n.jsxs)(r,{children:[(0,n.jsx)("summary",{children:"Foo"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'public class Foo {\n	public void method1() {\n		System.out.println("method1 executed");\n	}\n\n	public void method2() {\n		System.out.println("method2 executed");\n	}\n}\n'})})]}),"\n",(0,n.jsx)(t.h3,{id:"programmatic-weaving",children:"Programmatic Weaving"}),"\n",(0,n.jsxs)(r,{children:[(0,n.jsx)("summary",{children:"Implemented via AspectJProxyFactory"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:"public class Test4AspectJProxyFactory {\n	public static void main(String[] args) {\n		AspectJProxyFactory weaver = new AspectJProxyFactory();\n		weaver.setProxyTargetClass(true);\n		weaver.setTarget(new Foo());\n		weaver.addAspect(PerformanceTraceAspect.class);\n		Object proxy = weaver.getProxy();\n		((Foo)proxy).method1();\n		((Foo)proxy).method2();\n	}\n}\n"})})]}),"\n",(0,n.jsx)(t.h3,{id:"weaving-via-auto-proxy",children:"Weaving via Auto-Proxy"}),"\n",(0,n.jsxs)(t.p,{children:["For @AspectJ style AOP, Spring AOP specifically provides an ",(0,n.jsx)(t.code,{children:"AutoProxyCreator"})," implementation class for automatic proxying, to avoid excessive coding and configuration work. It is an extension class based on ",(0,n.jsx)(t.code,{children:"AbstractAdvisorAutoProxyCreator"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Like ",(0,n.jsx)(t.code,{children:"AutoProxyCreator"}),", we just need to register ",(0,n.jsx)(t.code,{children:"AnnotationAwareAspectJAutoProxyCreator"})," in IoC container configuration file."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://s2.loli.net/2023/07/15/hrGdFWtgxbfa78l.png",alt:""})}),"\n",(0,n.jsxs)(r,{children:[(0,n.jsx)("summary",{children:"xml configuration"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:'<beans xmlns="http://www.springframework.org/schema/beans"\n	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n	   xmlns:aop="http://www.springframework.org/schema/aop"\n	   xsi:schemaLocation="http://www.springframework.org/schema/beans\n		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n\n		 http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n	<aop:aspectj-autoproxy proxy-target-class="true"/>\n	\x3c!--	Equivalent to line above--\x3e\n	\x3c!--<bean class="org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator">\n		<property name="proxyTargetClass" value="true"/>\n	</bean>--\x3e\n\n	<bean id="performanceAspect" class="org.springframework.mylearntest.aop2.aspectj.PerformanceTraceAspect"/>\n\n	<bean id="target" class="org.springframework.mylearntest.aop2.aspectj.Foo"/>\n</beans>\n'})})]}),"\n",(0,n.jsxs)(r,{children:[(0,n.jsx)("summary",{children:"TestAutoAspectJ"}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-java",children:'public class Test4AutoAspectJ {\n	public static void main(String[] args) {\n		ApplicationContext context = new ClassPathXmlApplicationContext("annotationawareaspectJautoproxycreator\\\\annotationawareaspectJautoproxycreator.xml");\n		Object proxy = context.getBean("target");\n		((Foo)proxy).method1();\n		((Foo)proxy).method2();\n	}\n}\n'})})]}),"\n",(0,n.jsxs)(t.p,{children:["If ",(0,n.jsx)(t.code,{children:"target"})," is injected as dependency object into other bean definitions, then what dependency subject object holds is also proxied target object."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Tip"})}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"When using @AspectJ style AOP, should try to use automatic proxy support in container. Usually, programmatic weaving operations are only used for testing puproses. In process of use, you will find that actually there are differences between these two ways, some behaviors are not unified."}),"\n",(0,n.jsxs)(t.p,{children:["Using @Aspect style AOP needs to introduce ",(0,n.jsx)(t.code,{children:"aspectjweaver.jar"})," and ",(0,n.jsx)(t.code,{children:"aspectjrt.jar"}),"."]}),"\n"]}),"\n","\n",(0,n.jsx)(s.A,{})]})}function g(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);