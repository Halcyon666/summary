"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["2159"],{32003(e,n,i){i.r(n),i.d(n,{metadata:()=>r,default:()=>u,frontMatter:()=>o,contentTitle:()=>c,toc:()=>d,assets:()=>l});var r=JSON.parse('{"id":"background/Java/DesignPatterns/design-pattern","title":"Design Patterns","description":"<details> <summary>Global Exception Handling Class ExceptionHandlingController</summary> java package com.whalefall.learncases.exception;","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/background/Java/DesignPatterns/Design Pattern.mdx","sourceDirName":"background/Java/DesignPatterns","slug":"/background/Java/DesignPatterns/design-pattern","permalink":"/en/background/Java/DesignPatterns/design-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/background/Java/DesignPatterns/Design Pattern.mdx","tags":[{"inline":true,"label":"algorithm","permalink":"/en/tags/algorithm"},{"inline":true,"label":"computer-science","permalink":"/en/tags/computer-science"},{"inline":true,"label":"data-structures","permalink":"/en/tags/data-structures"}],"version":"current","lastUpdatedBy":"halcyon666","lastUpdatedAt":1769299200000,"sidebarPosition":10,"frontMatter":{"id":"design-pattern","title":"Design Patterns","sidebar_label":"Design Patterns","sidebar_position":10,"description":"<details> <summary>Global Exception Handling Class ExceptionHandlingController</summary> java package com.whalefall.learncases.exception;","tags":["algorithm","computer-science","data-structures"],"last_update":{"date":"2026-01-25","author":"halcyon666"},"sources":["spring-core"]},"sidebar":"tutorialSidebar","previous":{"title":"\u{1F3AF} Design Patterns","permalink":"/en/category/-design-patterns"},"next":{"title":"Functional Registration Engine Design Document","permalink":"/en/background/Java/DesignPatterns/functional-register-engine"}}'),t=i(62615),a=i(77545),s=i(4040);let o={id:"design-pattern",title:"Design Patterns",sidebar_label:"Design Patterns",sidebar_position:10,description:"<details> <summary>Global Exception Handling Class ExceptionHandlingController</summary> java package com.whalefall.learncases.exception;",tags:["algorithm","computer-science","data-structures"],last_update:{date:"2026-01-25",author:"halcyon666"},sources:["spring-core"]},c="Design Patterns",l={},d=[{value:"Exception Handling Methods",id:"exception-handling-methods",level:2},{value:"Interface-Based Design",id:"interface-based-design",level:2},{value:"DDD",id:"ddd",level:2},{value:"Jar file FunctionalInterface can be extended by user implement class",id:"jar-file-functionalinterface-can-be-extended-by-user-implement-class",level:2}];function p(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"design-patterns",children:"Design Patterns"})}),"\n",(0,t.jsx)(n.h2,{id:"exception-handling-methods",children:"Exception Handling Methods"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Global Exception Handling Class ExceptionHandlingController"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.exception;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.sql.SQLException;\n\n/**\n * @author WhaleFall\n * @create 2022-05-28 10:41\n * codes copy from => https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\n */\n@Slf4j\n@ControllerAdvice// Specify as global exception handling\npublic class ExceptionHandlingController {\n\n    // Specify name of a specific view that will be used to display the error:\n    @ExceptionHandler(SQLException.class)\n    public String databaseError() {\n        // Nothing to do.  Returns the logical view name of an error page, passed\n        // to the view-resolver(s) in usual way.\n        // Note that the exception is NOT available to this view (it is not added\n        // to the model) but see "Extending ExceptionHandlerExceptionResolver"\n        // below.\n        return "databaseError";\n    }\n\n    // Total control - setup a model and return the view name yourself. Or\n    // consider subclassing ExceptionHandlerExceptionResolver (see below).\n    @ExceptionHandler(Exception.class)\n    public ModelAndView handleError(HttpServletRequest req, Exception ex) {\n        log.error("Request: " + req.getRequestURL() + " raised " + ex);\n\n        ModelAndView mav = new ModelAndView();\n        mav.addObject("exception", ex);\n        mav.addObject("url", req.getRequestURL());\n        mav.setViewName("error");\n        return mav;\n    }\n\n}\n'})})]}),"\n",(0,t.jsx)(n.h2,{id:"interface-based-design",children:"Interface-Based Design"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Interface Class"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"package com.whalefall.learncases.design;\n\n/**\n * @author WhaleFall\n * @create 2022-07-25 19:21\n */\npublic interface IService {\n    boolean doService();\n\n    boolean doServiceBefore();\n\n    boolean doServiceAfter();\n\n    void doLog();\n}\n\n"})})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Interface Implementation Class"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Component;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:34\n */\n@Slf4j\n@Component\npublic class AService implements IService {\n    @Override\n    public boolean doService() {\n        log.info("do A service");\n        if (true)\n            throw new RuntimeException("Exception msg1");\n        return true;\n    }\n\n    @Override\n    public boolean doServiceBefore() {\n        return false;\n    }\n\n    @Override\n    public boolean doServiceAfter() {\n        return false;\n    }\n\n    @Override\n    public void doLog() {\n        if (true)\n            throw new RuntimeException("Exception msg2");\n        log.error("A1 do log");\n    }\n}\n'})})]}),"\n",(0,t.jsxs)(n.p,{children:["Core Process Encapsulation",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Singleton Template Design Pattern"}),"\n"]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Singleton Template Design Pattern"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.validation.constraints.NotNull;\nimport java.util.function.Consumer;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:26\n */\n@Slf4j\npublic class SProcessService {\n    private SProcessService() {\n\n    }\n\n    private static class SProcessServiceHolder {\n        private static final SProcessService INSTANCE = new SProcessService();\n    }\n    \n    public static SProcessService getInstance() {\n        return SProcessServiceHolder.INSTANCE;\n    } \n    \n    public boolean handle(IService service, Consumer<Exception> exceptionConsumer) {\n        serviceBefore(service);\n        service(service, exceptionConsumer);\n        serviceAfter(service);\n        log(service, exceptionConsumer);\n        return true;\n    }\n\n    private void serviceAfter(@NotNull IService service) {\n        service.doServiceAfter();\n    }\n\n    private void serviceBefore(@NotNull IService service) {\n        service.doServiceBefore();\n    }\n\n    private void service(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doService();\n        } catch (Exception e1) {\n            exceptionConsumer.accept(e1);\n            throw e1;\n        }\n    }\n\n    private void log(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doLog();\n        } catch (Exception e2) {\n            log.error("failed do log");\n            exceptionConsumer.accept(e2);\n        }\n    }\n}\n\n'})})]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Inject into Container"}),"\n"]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Inject into Container"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Component;\n\nimport javax.validation.constraints.NotNull;\nimport java.util.function.Consumer;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:26\n */\n@Component\n@Slf4j\npublic class ProcessService {\n    \n    public boolean handle(IService service, Consumer<Exception> exceptionConsumer) {\n        serviceBefore(service);\n        service(service, exceptionConsumer);\n        serviceAfter(service);\n        log(service, exceptionConsumer);\n        return true;\n    }\n\n    private void serviceAfter(@NotNull IService service) {\n        service.doServiceAfter();\n    }\n\n    private void serviceBefore(@NotNull IService service) {\n        service.doServiceBefore();\n    }\n\n    private void service(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doService();\n        } catch (Exception e1) {\n            exceptionConsumer.accept(e1);\n            throw e1;\n        }\n    }\n\n    private void log(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doLog();\n        } catch (Exception e2) {\n            log.error("failed do log");\n            exceptionConsumer.accept(e2);\n        }\n    }\n}\n\n'})})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Calling Class"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'\npackage com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:37\n */\n@RestController\n@Slf4j\npublic class ControllerA {\n\n    private IService service;\n\n    private ProcessService processService;\n\n    public ControllerA(IService service, ProcessService processService) {\n        this.service = service;\n        this.processService = processService;\n    }\n\n    @GetMapping("/testA")\n    public boolean getA(){\n       return processService.handle(service, e -> log.error(e.getMessage(), e));\n    }\n}\n'})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/Halcyon666/learn-cases/tree/main/learncases/src/main/java/com/whalefall/learncases/design",children:"Complete Code"})}),"\n",(0,t.jsx)(n.h2,{id:"ddd",children:"DDD"}),"\n",(0,t.jsx)(n.p,{children:"Entity objects cannot be assigned directly, domain objects cannot be newed directly, factory methods and builder patterns should be used to implement."}),"\n",(0,t.jsx)(n.p,{children:"Application Layer Responsibilities:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Basic data validation"}),"\n",(0,t.jsx)(n.li,{children:"Data conversion"}),"\n",(0,t.jsx)(n.li,{children:"Security authentication"}),"\n",(0,t.jsx)(n.li,{children:"Permission check"}),"\n",(0,t.jsx)(n.li,{children:"Transaction control"}),"\n",(0,t.jsx)(n.li,{children:"Message sending"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Principles:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"If it is difficult to split, you can write the code to application service first."}),"\n",(0,t.jsx)(n.li,{children:"If you cannot confirm whether it is an entity or a value object, you can treat it as an entity first."}),"\n",(0,t.jsx)(n.li,{children:"Entity (has unique identifier, mutable state, has life cycle)."}),"\n",(0,t.jsx)(n.li,{children:"Value Object (Address, Amount, Measurement, Date, Time, Color, Transaction Snapshot)."}),"\n",(0,t.jsx)(n.li,{children:"Entities should not depend on Spring container."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Domain Object Relationship Handling"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Composition, Aggregation Relationships: One contains another; each object is a whole."}),"\n",(0,t.jsx)(n.li,{children:"Association Relationships: Non-composition, aggregation association relationships."}),"\n",(0,t.jsx)(n.li,{children:"Generalization Relationships: Inheritance."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Only business exceptions can be reported in SupportImpl."}),"\n",(0,t.jsx)(n.h2,{id:"jar-file-functionalinterface-can-be-extended-by-user-implement-class",children:"Jar file FunctionalInterface can be extended by user implement class"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'showLineNumbers title="FunctionalInterface.java"',children:"    @Resource\n    private Custom customImpl;\n\n    /**\n     * Define {@link FunctionalInterface} in Jar package<br/>\n     * Of course, the usage class in Jar implements ApplicationContextAware, then gets the injected object of the application, and then writes where the function is triggered<br/>\n     * User defines implementation class and injects it into container.<br/>\n     * @param str function input parameter\n     */\n    public void custom(String str) {\n        // highlight-next-line\n        // highlight-start\n        Consumer<Custom> consumer = custom -> custom.custom(str);\n        consumer.accept(customImpl);\n        // highlight-end\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/Halcyon666/learn-cases/commit/d0cfaf64166eb7b84361238180577b4847702d84",children:"Jar file FunctionalInterface can be extended by user implement class"})}),"\n","\n",(0,t.jsx)(s.A,{})]})}function u(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);