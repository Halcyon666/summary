"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["2011"],{55331(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>m,frontMatter:()=>o,contentTitle:()=>c,toc:()=>h,assets:()=>d});var i=JSON.parse('{"id":"Frontend/React/react-reference","title":"Basic React","description":"Comprehensive React guide covering hooks, state, events, and routing","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/Frontend/React/react-reference.mdx","sourceDirName":"Frontend/React","slug":"/Frontend/React/react-reference","permalink":"/en/Frontend/React/react-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/Frontend/React/react-reference.mdx","tags":[{"inline":true,"label":"frontend","permalink":"/en/tags/frontend"},{"inline":true,"label":"javascript","permalink":"/en/tags/javascript"},{"inline":true,"label":"react","permalink":"/en/tags/react"}],"version":"current","lastUpdatedBy":"halcyon666","lastUpdatedAt":1769299200000,"sidebarPosition":1,"frontMatter":{"id":"react-reference","title":"Basic React","sidebar_label":"Basic React","sidebar_position":1,"description":"Comprehensive React guide covering hooks, state, events, and routing","tags":["frontend","javascript","react"],"last_update":{"date":"2026-01-25","author":"halcyon666"},"sources":["react-learn-2025"]},"sidebar":"tutorialSidebar","previous":{"title":"React","permalink":"/en/category/react"},"next":{"title":"React Learning Roadmap 2025","permalink":"/en/Frontend/React/react-learn-2025"}}'),r=t(62615),s=t(77545),a=t(49752),l=t(4040);let o={id:"react-reference",title:"Basic React",sidebar_label:"Basic React",sidebar_position:1,description:"Comprehensive React guide covering hooks, state, events, and routing",tags:["frontend","javascript","react"],last_update:{date:"2026-01-25",author:"halcyon666"},sources:["react-learn-2025"]},c="Basic React",d={},h=[{value:"Create React Project",id:"create-react-project",level:2},{value:"Spread and Destructuring Array or Object",id:"spread-and-destructuring-array-or-object",level:2},{value:"Updating a Nested Object",id:"updating-a-nested-object",level:2},{value:"Arrow Functions",id:"arrow-functions",level:2},{value:"React Data Iteration and Key",id:"react-data-iteration-and-key",level:2},{value:"Passing Parameters to React Components",id:"passing-parameters-to-react-components",level:2},{value:"useState Function",id:"usestate-function",level:2},{value:"onClick: Function Name vs Anonymous Function",id:"onclick-function-name-vs-anonymous-function",level:2},{value:"Pass Parameter Function",id:"pass-parameter-function",level:3},{value:"Pass a Closure Function",id:"pass-a-closure-function",level:3},{value:"How to Dynamically Set Variable Name as Key",id:"how-to-dynamically-set-variable-name-as-key",level:2},{value:"Types Renderable in TSX",id:"types-renderable-in-tsx",level:2},{value:"useEffect Function",id:"useeffect-function",level:2},{value:"useRef",id:"useref",level:2},{value:"How to Clean Up Resources in useEffect",id:"how-to-clean-up-resources-in-useeffect",level:2},{value:"<code>Array.from</code>",id:"arrayfrom",level:2},{value:"<code>Array.every</code>",id:"arrayevery",level:2},{value:"Lazy Initialization for useState",id:"lazy-initialization-for-usestate",level:2},{value:"Reusable Routes",id:"reusable-routes",level:2}];function u(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"basic-react",children:"Basic React"})}),"\n",(0,r.jsx)(n.h2,{id:"create-react-project",children:"Create React Project"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"npm create vite@latest my-react-app\n\ncd my-react-app\nnpm install\nnpm run dev\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://s2.loli.net/2025/10/07/hW3iwvBKxSORsHf.png",alt:""})}),"\n",(0,r.jsx)(n.h2,{id:"spread-and-destructuring-array-or-object",children:"Spread and Destructuring Array or Object"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Spread array"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const arr = [1, 2, 3];\nconst copy = [...arr];\nconsole.log(copy); // [1, 2, 3]\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Spread object"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const obj = { a: 1, b: 2 };\nconst copy = { ...obj };\nconsole.log(copy); // { a: 1, b: 2 }\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Array destructuring"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const [a, b] = [10, 20];\nconsole.log(a); // 10\nconsole.log(b); // 20\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Object destructuring"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'const person = { name: "Alice", age: 25 };\nconst { name, age } = person;\nconsole.log(name, age); // Alice 25\n'})}),"\n",(0,r.jsx)(n.h2,{id:"updating-a-nested-object",children:"Updating a Nested Object"}),"\n",(0,r.jsx)(n.p,{children:"Consider the object construct like this,"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"const [person, setPerson] = useState({\n  name: 'Niki de Saint Phalle',\n  artwork: {\n    title: 'Blue Nana',\n    city: 'Hamburg',\n    image: 'https://i.imgur.com/Sd1AgUOm.jpg',\n  }\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can update immutable object like this way,"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const nextArtwork = { ...person.artwork, city: 'New Delhi' };\nconst nextPerson = { ...person, artwork: nextArtwork };\nsetPerson(nextPerson);\n"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"setPerson({\n  ...person, // Copy other fields\n  artwork: { // but replace the artwork\n    ...person.artwork, // with the same one\n    city: 'New Delhi' // but in New Delhi!\n  }\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["or use ",(0,r.jsx)(n.code,{children:"useImmer"})," instead of ",(0,r.jsx)(n.code,{children:"useState"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Another way you can use ",(0,r.jsx)(n.code,{children:"use-immer"})," library, handle deeper nested object."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"  const [person, updatePerson] = useImmer({\n    name: 'Niki de Saint Phalle',\n    artwork: {\n      title: 'Blue Nana',\n      city: 'Hamburg',\n      image: 'https://i.imgur.com/Sd1AgUOm.jpg',\n    }\n  });\n\n  function handleNameChange(e) {\n    updatePerson(draft => {\n      draft.name = e.target.value;\n    });\n  }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://react.dev/learn/updating-objects-in-state",children:"Usage from official website"})}),"\n",(0,r.jsx)(n.h2,{id:"arrow-functions",children:"Arrow Functions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Syntax"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Meaning"}),(0,r.jsxs)(n.th,{style:{textAlign:"left"},children:["Need ",(0,r.jsx)(n.code,{children:"return"}),"?"]})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"(param) => ( expression )"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.strong,{children:"Implicit return"}),", automatically returns the result of the expression in parentheses"]}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u274C No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"(param) => { statement }"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.strong,{children:"Block statement"}),", does not automatically return, need to manually write ",(0,r.jsx)(n.code,{children:"return"})]}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u2705 Yes"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"react-data-iteration-and-key",children:"React Data Iteration and Key"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"key"})," can only be used on the element in the parent component's map rendering list, not inside the child component."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Need key component"  showLineNumbers {9-12}',children:'export default function Contact({\n  img,\n  imgAlt,\n  name,\n  phoneNumber,\n  email,\n}: ContactInfo) {\n  return (\n    // This is wrong, because key can only be used on \n    // the element in the parent component\'s map rendering list,\n    // not inside the child component.\n    // <article className="contact-card" key={id}>\n    <article className="contact-card">\n      <img src={img} alt={imgAlt} />\n      <h3>{name}</h3>\n      <div className="info-group">\n        <img src={phoneIcon} alt="phone icon" />\n        <p>{phoneNumber}</p>\n      </div>\n      <div className="info-group">\n        <img src={mailIcon} alt="mail icon" />\n        <p>{email}</p>\n      </div>\n    </article>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-txs",metastring:'title="Parent component pass key" showLineNumbers {5}',children:'function App() {\n  return (\n    <div className="contacts">\n      {contacts.map((contact) => (\n        <Contact key={contact.id} {...contact} />\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"passing-parameters-to-react-components",children:"Passing Parameters to React Components"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Contact.txs" showLineNumbers {5-11}',children:'import phoneIcon from "./images/phone-icon.png";\nimport mailIcon from "./images/mail-icon.png";\nimport type ContactInfo from "./ContactInfo";\n\nexport default function Contact({\n  img,\n  imgAlt,\n  name,\n  phoneNumber,\n  email,\n}: ContactInfo) {\n  return (\n    // This is wrong, because key can only be used on \n    // the element in the parent component\'s map rendering list,\n    // not inside the child component.\n    // <article className="contact-card" key={id}>\n    <article className="contact-card">\n      <img src={img} alt={imgAlt} />\n      <h3>{name}</h3>\n      <div className="info-group">\n        <img src={phoneIcon} alt="phone icon" />\n        <p>{phoneNumber}</p>\n      </div>\n      <div className="info-group">\n        <img src={mailIcon} alt="mail icon" />\n        <p>{email}</p>\n      </div>\n    </article>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="App.tsx" showLineNumbers {8}',children:'import "./index.css";\nimport Contact from "./Contact";\nimport { contacts } from "./ContactInfo";\nfunction App() {\n  return (\n    <div className="contacts">\n      {contacts.map((contact) => (\n        <Contact key={contact.id} {...contact} />\n      ))}\n    </div>\n  );\n}\nexport default App;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"usestate-function",children:"useState Function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Main.tsx" showLineNumbers {1,5-9,16}',children:'import { useState } from "react";\n\nexport default function Main() {\n  // Array destructuring\n  const [ingredients, setIngredients] = useState<string[]>([\n    "Chicken",\n    "Oregano",\n    "Tomatoes",\n  ]);\n  const handleSubmit: React.FormEventHandler<HTMLFormElement> = (event) => {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    // the key is the name of input\n    const newIngredient = formData.get("ingredient");\n    if (typeof newIngredient === "string" && newIngredient?.trim() !== "") {\n      setIngredients((prev) => [...prev, newIngredient]);\n    } else {\n      console.warn("No ingredient provided");\n    }\n  };\n\n  return (\n    <main>\n      <form className="add-ingredient-form" onSubmit={handleSubmit}>\n        <input\n          type="text"\n          name="ingredient"\n          aria-label="Add ingredient"\n          placeholder="e.g. oregano"\n        ></input>\n        <button>Add ingredient</button>\n      </form>\n      <h1>Ingrredients on hand:</h1>\n      <ul className="ingredient-ul">\n        {ingredients.map((ingredient) => (\n          <li key={ingredient}>{ingredient}</li>\n        ))}\n      </ul>\n    </main>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"onclick-function-name-vs-anonymous-function",children:"onClick: Function Name vs Anonymous Function"}),"\n",(0,r.jsxs)(n.p,{children:["Version 1 ",(0,r.jsx)(n.code,{children:"(onClick={getRecipe})"})]}),"\n",(0,r.jsx)(n.p,{children:"You\u2019re giving React a function reference.\nReact will call getRecipe() only when the button is clicked."}),"\n",(0,r.jsx)(n.p,{children:"This is the simplest and most efficient form \u2014 no new function is created on every render."}),"\n",(0,r.jsxs)(n.p,{children:["Version 2 ",(0,r.jsx)(n.code,{children:"(onClick={() => getRecipe()})"})]}),"\n",(0,r.jsx)(n.p,{children:"You\u2019re creating a new anonymous function on each render that calls getRecipe() inside it."}),"\n",(0,r.jsx)(n.p,{children:"It still works \u2014 React will call your wrapper function on click, which in turn calls getRecipe() \u2014 but it\u2019s one extra layer of indirection and (very slightly) less efficient."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Code"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"When to use"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"onClick={changeToHeld}"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Default, most common, or closure function"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Pass function directly"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"onClick={() => changeToHeld(id)}"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"When you need to wrap logic or pass arguments"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Creates a new function every render"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"pass-parameter-function",children:"Pass Parameter Function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="App.tsx" ',children:'import React, { useState } from "react";\nimport "./index.css";\nimport Die from "./Die";\nimport { nanoid } from "nanoid/non-secure";\n\nexport interface DiceProp {\n  value: number;\n  isHeld: boolean;\n  id: string;\n}\n\nconst App: React.FC = () => {\n  const generateDice = () =>\n    Array.from({ length: 10 }, () => ({\n      value: Math.ceil(Math.random() * 6),\n      isHeld: false,\n      id: nanoid(),\n    }));\n  const [dice, setDice] = useState<DiceProp[]>(generateDice());\n  // highlight-start\n  const changeToHeld = (id: string) =>\n    setDice((prevDice) =>\n      prevDice.map((die) => (die.id === id ? { ...die, isHeld: true } : die))\n    );\n  // highlight-end\n  const diceElements = dice.map((diceProp) => (\n    // highlight-next-line\n    <Die key={diceProp.id} changeToHeld={changeToHeld} die={diceProp} />\n  ));\n\n  const rollDice = () => {\n    setDice(generateDice());\n  };\n\n  return (\n    <main>\n      <div className="dice-container">{diceElements}</div>\n      <button className="roll-button" onClick={rollDice}>\n        Roll\n      </button>\n    </main>\n  );\n};\n\nexport default App;\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Die.tsx"',children:'import type { DiceProp } from "./App";\n\n/**\n * Recommendation\n * For scalable apps / larger state management: Option 1 is preferred \n * because it separates state (data) from behavior (actions), which aligns with React best practices.\n */\nconst Die: React.FC<{ die: DiceProp; changeToHeld: (id: string) => void }> = ({\n  die,\n  changeToHeld,\n}) => {\n  const { value, isHeld, id } = die;\n  return (\n    <button\n      className={isHeld ? "held" : "notHeld"}\n      // highlight-next-line\n      onClick={() => changeToHeld(id)}\n    >\n      {value}\n    </button>\n  );\n};\n\nexport default Die;\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pass-a-closure-function",children:"Pass a Closure Function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="App.tsx"',children:'import React, { useState } from "react";\nimport "./index.css";\nimport Die from "./Die";\nimport { nanoid } from "nanoid/non-secure";\n\nexport interface DiceProp {\n  value: number;\n  isHeld: boolean;\n  id: string;\n}\n\nconst App: React.FC = () => {\n  const generateDice = () =>\n    Array.from({ length: 10 }, () => ({\n      value: Math.ceil(Math.random() * 6),\n      isHeld: false,\n      id: nanoid(),\n    }));\n  const [dice, setDice] = useState<DiceProp[]>(generateDice());\n  const changeToHeld = (id: string) =>\n    setDice((prevDice) =>\n      prevDice.map((die) => (die.id === id ? { ...die, isHeld: true } : die))\n    );\n\n  const diceElements = dice.map((diceProp) => (\n    <Die\n      key={diceProp.id}\n      // closure function\n      // highlight-next-line\n      changeToHeld={() => changeToHeld(diceProp.id)}\n      die={diceProp}\n    />\n  ));\n\n  const rollDice = () => {\n    setDice(generateDice());\n  };\n\n  return (\n    <main>\n      <div className="dice-container">{diceElements}</div>\n      <button className="roll-button" onClick={rollDice}>\n        Roll\n      </button>\n    </main>\n  );\n};\n\nexport default App;\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Die.tsx"',children:'import type { DiceProp } from "./App";\n\nconst Die: React.FC<{ die: DiceProp; changeToHeld: () => void }> = ({\n  die,\n  changeToHeld,\n}) => {\n  const { value, isHeld } = die;\n  return (\n      // highlight-next-line\n    <button className={isHeld ? "held" : "notHeld"} onClick={changeToHeld}>\n      {value}\n    </button>\n  );\n};\n\nexport default Die;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"how-to-dynamically-set-variable-name-as-key",children:"How to Dynamically Set Variable Name as Key"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Wrong Example"',children:"const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n  const { name, value } = event.currentTarget;\n  // highlight-next-line\n  setMeme((prev) => ({ ...prev, name: value }));\n};\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Correct Example"',children:"const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n  const { name, value } = event.currentTarget;\n  // highlight-next-line\n  setMeme((prev) => ({ ...prev, [name]: value }));\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"types-renderable-in-tsx",children:"Types Renderable in TSX"}),"\n","\n",(0,r.jsxs)(n.p,{children:["In React JSX expressions ",(0,r.jsx)(n.code,{children:"{ ... }"}),", only the following types can be rendered directly:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"String (string)"}),"\n",(0,r.jsx)(n.li,{children:"Number (number)"}),"\n",(0,r.jsx)(n.li,{children:"Boolean (boolean)"}),"\n",(0,r.jsx)(n.li,{children:"React Element (JSX Element)"}),"\n",(0,r.jsx)(n.li,{children:"Array (containing the above types)"}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(a.A,{color:"red",children:"Cannot render Objects, Object Arrays"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"useeffect-function",children:"useEffect Function"}),"\n",(0,r.jsxs)(n.p,{children:["When calling useEffect, depends on the dependents in ",(0,r.jsx)(n.code,{children:"[]"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"That's look this example."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="infinite loop"',children:'import React from "react";\n\nexport default function App() {\n  const [starWarsData, setStarWarsData] = React.useState({});\n  const [count, setCount] = React.useState(0);\n\n  console.log("Rendered!");\n\n  React.useEffect(() => {\n    console.log("useEffect runs");\n    fetch("https://swapi.dev/api/people/1")\n      .then((res) => res.json())\n      .then((data) => setStarWarsData(data)\n      );\n      // highlight-next-line\n  }, [starWarsData]);\n\n  return (\n    <div>\n      <h2>The count is {count}</h2>\n      <button onClick={() => setCount((prevCount) => prevCount + 1)}>\n        Add\n      </button>\n      <pre>{JSON.stringify(starWarsData, null, 2)}</pre>\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Each time setStarWarsData(data) runs, React receives a new ",(0,r.jsx)(n.code,{children:"{ ... }"})," object.\nEven if the JSON content is identical, it\u2019s a different object reference,\nso React thinks the dependency changed and re-runs the effect \u2014 causing an infinite loop."]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"correct usage"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'React.useEffect(() => {\n  console.log("useEffect runs");\n  fetch("https://swapi.dev/api/people/1")\n    .then((res) => res.json())\n    .then((data) =>\n      setStarWarsData(data)\n    );\n    // highlight-next-line\n}, []);\n'})})]}),"\n",(0,r.jsx)(n.p,{children:"What happens when visit the page first time?"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-log",metastring:'title="Console Output"',children:"Rendered!\nApp.tsx:11 useEffect runs\nApp.tsx:8 Rendered!\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Stage"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Trigger"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"What happens"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Console output"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"1"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Initial mount"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Component function executes"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Rendered!"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"2"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"After mount"}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,r.jsx)(n.code,{children:"useEffect"})," callback runs"]}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"useEffect runs"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"3"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"State updated"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Component re-renders with new data"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Rendered!"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"useref",children:"useRef"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="FocusInput"',children:'import { useRef } from "react";\nexport default function FocusInput() {\n  // highlight-next-line\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleFocus = () => {\n    // current might be null, so check for non-null\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  return (\n    <div>\n      <input ref={inputRef} type="text" placeholder="Click the button to focus me" />\n      <button onClick={handleFocus}>Focus Input</button>\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"how-to-clean-up-resources-in-useeffect",children:"How to Clean Up Resources in useEffect"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="WindowTracker"',children:'import { useEffect, useState } from "react";\n\nexport default function WindowTracker() {\n  const [windowWidth, setWindownWidth] = useState<number>(window.innerWidth);\n  useEffect(() => {\n    const watchWindowWidth = () => {\n      console.log("resized!");\n      setWindownWidth(window.innerWidth);\n    };\n    window.addEventListener("resize", watchWindowWidth);\n    // cleaning up what creating before\n    // highlight-start\n    return () => {\n      window.removeEventListener("resize", watchWindowWidth);\n      console.log("cleaning up");\n    };\n    // highlight-end\n  }, []);\n  return <h1>Window width: {windowWidth}</h1>;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"arrayfrom",children:(0,r.jsx)(n.code,{children:"Array.from"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// The _ means: \u201CIgnore the element, just use the index.\u201D\nArray.from({ length: 3 }, (_, i) => i * 2);\n// \u2192 [0, 2, 4]\n"})}),"\n",(0,r.jsx)(n.p,{children:"When no parameters are needed, just don't write them."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"Array.from({ length: 10 }, () => Math.ceil(Math.random() * 6))\n"})}),"\n",(0,r.jsx)(n.h2,{id:"arrayevery",children:(0,r.jsx)(n.code,{children:"Array.every"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"array.every(callback(element, index, array), thisArg?)"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"With callback only"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="check all elements meet condition"',children:"const threshold = { limit: 10 };\nconst numbers = [3, 5, 9];\n\n// Arrow functions do NOT bind `this`, so `thisArg` is ignored.\nconst allBelowLimit = numbers.every((num) => num <br threshold.limit);\n\nconsole.log(allBelowLimit); // true\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"With callback and thisArg"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="check all elements meet condition with thisArg"',children:"const threshold = 5;\nconst numbers = [6, 7, 8, 9, 10];\nconst allAboveThreshold = numbers.every(function (num) {\n  return num > this.threshold;\n}, { threshold });\nconsole.log(allAboveThreshold); // true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"lazy-initialization-for-usestate",children:"Lazy Initialization for useState"}),"\n",(0,r.jsxs)(n.p,{children:["1\uFE0F\u20E3 Lazy initialization: ",(0,r.jsx)(n.code,{children:"useState(() => generateDice())"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Here, you pass a function to useState."}),"\n",(0,r.jsx)(n.li,{children:"React will call that function once \u2014 only on the initial render."}),"\n",(0,r.jsx)(n.li,{children:"The return value of the function becomes the initial state."}),"\n",(0,r.jsx)(n.li,{children:"After that, React never calls the function again, because it already has the state stored internally."}),"\n",(0,r.jsx)(n.li,{children:"Benefit: Useful when computing the initial state is expensive."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Explain:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Component mounts \u2192 React calls () => generateDice()."}),"\n",(0,r.jsx)(n.li,{children:"The return value (DiceProp[]) is stored as the state."}),"\n",(0,r.jsx)(n.li,{children:"Component re-renders \u2192 React reuses the stored state, function is never called again."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["2\uFE0F\u20E3 Non-lazy way:\n",(0,r.jsx)(n.code,{children:"const [dice, setDice] = useState(generateDice());"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Here, you call generateDice() immediately and pass its return value to useState."}),"\n",(0,r.jsx)(n.li,{children:"This happens every render of the component, but only the first value matters for initialization."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Explain:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Component renders \u2192 generateDice() runs \u2192 returns array \u2192 React stores as state."}),"\n",(0,r.jsx)(n.li,{children:"Component re-renders later \u2192 generateDice() still runs, but React ignores it, because the state is already managed internally."}),"\n",(0,r.jsx)(n.li,{children:"Problem: If generateDice() is expensive, you waste CPU calling it unnecessarily on every render."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"reusable-routes",children:"Reusable Routes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Halcyon666/react-daily-learn/tree/main/src/routes/v3",children:"All Xml codes"})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Xml"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="GameRoutes.tsx"',children:'import { Route, Routes } from "react-router-dom";\nimport GamesId from "./GamesId";\nimport GameLayout from "./GameLayout";\n\n// this contains links and routes\n// 1. move all sub Route\n// 2. wrapper all routes in to a "<Route element={<GameLayout />}></Route>"\n// this part of code equivalent to "src/routes/v4/gameRoutes.tsx"\nexport default function GameRoutes() {\n  return (\n    <>\n      {/* <GameLayout /> */}\n      <Routes>\n        <Route element={<GameLayout />}>\n          <Route index element={<h1>Games</h1>}></Route>\n          <Route path=":id" element={<GamesId />}></Route>\n          <Route path="search" element={<h1>games search</h1>}></Route>\n        </Route>\n      </Routes>\n    </>\n  );\n}\n'})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="App.tsx"',children:'import { Link, Route, Routes } from "react-router-dom";\nimport NotFoundPage from "../other-function/NotFoundPage";\nimport GameRoutes from "./GameRoutes";\nimport GamesHome from "./GamesHome";\n\nexport default function App() {\n  return (\n    <>\n      <nav\n        style={{\n          display: "flex",\n          flexDirection: "column",\n        }}\n      >\n        {/* if using replace here, backward will be two pages instead of one page */}\n        <Link to="/" replace>\n          home\n        </Link>\n        <Link to="/games">games</Link>\n      </nav>\n      <Routes>\n        <Route path="/" element={<GamesHome />}></Route>\n        {/* must "/*"" after "/games" */}\n        // highlight-next-line\n        <Route path="/games/*" element={<GameRoutes />}></Route>\n        <Route path="*" element={<NotFoundPage />}></Route>\n      </Routes>\n    </>\n  );\n}\n'})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/Halcyon666/react-daily-learn/tree/main/src/routes/v4",children:"All Json codes"})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Json"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="gameRoute.tsx"',children:'import type { RouteObject } from "react-router-dom";\nimport GameLayout from "./GameLayout";\nimport GameItem from "./GameItem";\n/**\n * reusable links and routes in gameRoutes,\n * - index\n * - index > {id}\n * - index > description\n */\nconst gameRoutes: RouteObject = {\n  element: <GameLayout />,\n  children: [\n    { index: true, element: <h1>games</h1> },\n    { path: ":id", element: <GameItem /> },\n    {\n      path: "description",\n      element: (\n        <p>\n          PUBG is a last-player-standing shooter where up to 100 players\n          parachute onto an island, scavenge for weapons and equipment, and\n          fight to be the sole survivor. The playable area continuously shrinks\n          throughout the match, forcing players into closer combat.\n        </p>\n      ),\n    },\n  ],\n};\n\nexport default gameRoutes;\n'})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="routes.tsx"',children:'import type { RouteObject } from "react-router-dom";\n\nimport gameRoutes from "./gameRoutes";\n\n// equivalent to <Routes>...</Routes>\nexport const routes: RouteObject[] = [\n  {\n    path: "/",\n    element: <h1>home</h1>,\n  },\n  {\n    path: "/games",\n    // nested layout links here, need Layout inside of it.\n    /* element: <GameLayout />,\n    children: [\n      { index: true, element: <h1>games</h1> },\n      { path: ":id", element: <GameItem /> },\n      { path: "search", element: <h1>games search</h1> },\n    ], */\n    // reuse code from gameRoutes\n    // highlight-next-line\n    ...gameRoutes,\n  },\n  {\n    path: "/games1",\n    // highlight-next-line\n    ...gameRoutes,\n  },\n];\n'})})]}),"\n","\n",(0,r.jsx)(l.A,{})]})}function m(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},49752(e,n,t){t.d(n,{A:()=>r});var i=t(62615);function r({color:e,background:n,className:t,children:r}){return(0,i.jsx)("span",{className:t,style:{color:e,background:n,padding:n?"0 0.2em":void 0,borderRadius:n?"0.2em":void 0},children:r})}t(59471)}}]);