"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["251"],{84871(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>h,frontMatter:()=>a,contentTitle:()=>c,toc:()=>d,assets:()=>l});var t=JSON.parse('{"id":"Frontend/docusaurus","title":"Docusaurus Configuration","description":"Docusaurus deployment, search configuration, and troubleshooting","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/Frontend/docusaurus.mdx","sourceDirName":"Frontend","slug":"/Frontend/docusaurus","permalink":"/en/Frontend/docusaurus","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/Frontend/docusaurus.mdx","tags":[{"inline":true,"label":"frontend","permalink":"/en/tags/frontend"},{"inline":true,"label":"javascript","permalink":"/en/tags/javascript"},{"inline":true,"label":"react","permalink":"/en/tags/react"}],"version":"current","lastUpdatedBy":"halcyon666","lastUpdatedAt":1769299200000,"sidebarPosition":11,"frontMatter":{"id":"docusaurus","title":"Docusaurus Configuration","sidebar_label":"Docusaurus Configuration","sidebar_position":11,"description":"Docusaurus deployment, search configuration, and troubleshooting","tags":["frontend","javascript","react"],"last_update":{"date":"2026-01-25","author":"halcyon666"}},"sidebar":"tutorialSidebar","previous":{"title":"uni-app Development","permalink":"/en/Frontend/uni-app"},"next":{"title":"\u{1F680} DevOps & Infrastructure","permalink":"/en/category/-devops--infrastructure"}}'),r=s(62615),i=s(77545),o=s(4040);let a={id:"docusaurus",title:"Docusaurus Configuration",sidebar_label:"Docusaurus Configuration",sidebar_position:11,description:"Docusaurus deployment, search configuration, and troubleshooting",tags:["frontend","javascript","react"],last_update:{date:"2026-01-25",author:"halcyon666"}},c="Docusaurus",l={},d=[{value:"GitHub Workflow Configuration",id:"github-workflow-configuration",level:2},{value:"Deployment Script",id:"deployment-script",level:3},{value:"Configure Secrets",id:"configure-secrets",level:3},{value:"Deployment Error css net::ERR_ABORTED 404 (Not Found)",id:"deployment-error-css-neterr_aborted-404-not-found",level:3},{value:"DocSearch v2 Not Working on My Site",id:"docsearch-v2-not-working-on-my-site",level:2},{value:"Background",id:"background",level:3},{value:"URL Ignored",id:"url-ignored",level:3},{value:"Invalid Application-ID or API Key",id:"invalid-application-id-or-api-key",level:3},{value:"Misunderstanding facetFilters",id:"misunderstanding-facetfilters",level:3},{value:"<strong>React Live Failure in <code>Docusaurus</code></strong>",id:"react-live-failure-in-docusaurus",level:2},{value:"<strong>Comparison of Success and Failure</strong>",id:"comparison-of-success-and-failure",level:3},{value:"<strong>Commit Record Causing Failure</strong>",id:"commit-record-causing-failure",level:3},{value:"<strong>Fix Solution</strong>",id:"fix-solution",level:3},{value:"rspack Cache Crash",id:"rspack-cache-crash",level:2}];function u(e){let n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"docusaurus",children:"Docusaurus"})}),"\n",(0,r.jsx)(n.h2,{id:"github-workflow-configuration",children:"GitHub Workflow Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"deployment-script",children:"Deployment Script"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://juejin.cn/post/7115631818736402440",children:"Reference Article"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note: You need to install yarn and run yarn install in the documentation project."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docusaurus.io/docs/deployment#deploying-to-github-pages",children:"Docusaurus Deployment"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",metastring:'title="deploy.yml"',children:'name: Deploy taco shop\n\non:\n  push:\n    branches:\n      - main\n    # Review gh actions docs if you want to further define triggers, paths, etc\n    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on\n\njobs:\n  deploy:\n    name: Deploy Chef Claude\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: pnpm/action-setup@v2\n        with:\n          version: 8\n      - uses: actions/setup-node@v3\n        with:\n          node-version: 22.19.0\n          cache: "pnpm"\n      - name: Install dependencies\n        run: |\n          echo ${{ github.workspace }}  # Output workspace context path, which is the project path\n          pnpm install --frozen-lockfile\n      - name: Build Chef Claude\n        run: |\n          pnpm build\n\n      # Popular action to deploy to GitHub Pages:\n      # Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.SECRET_TOKEN }}\n          # Build output to publish to the `gh-pages` branch:\n          publish_dir: ./dist # The document build output directory is build (or dist as configured)\n          user_name: "github-actions[bot]"\n          user_email: "github-actions[bot]@users.noreply.github.com"\n          commit_message: ${{ github.event.head_commit.message }}\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configure-secrets",children:"Configure Secrets"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{src:"https://s2.loli.net/2025/10/20/J2Z7CxXQPNjc8UW.png",alt:"20251020205913"}),"\n",(0,r.jsx)(n.img,{src:"https://s2.loli.net/2025/11/03/m8RPDfWd1TYsGwN.png",alt:"20251103223927"})]}),"\n",(0,r.jsx)(n.p,{children:"New version page minimized permission configuration TOKEN"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Category"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Permission"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Access Level"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["\u{1F9F1} ",(0,r.jsx)(n.strong,{children:"Contents"})]}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Read and write"}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["\u2705 Required: Allow Action to push to ",(0,r.jsx)(n.code,{children:"gh-pages"})," branch"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["\u2699\uFE0F ",(0,r.jsx)(n.strong,{children:"Actions"})]}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Read and write"}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"\u2705 Optional: If your Workflow needs to trigger other Actions (e.g., re-run workflows)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"deployment-error-css-neterr_aborted-404-not-found",children:"Deployment Error css net::ERR_ABORTED 404 (Not Found)"}),"\n",(0,r.jsx)(n.p,{children:"If you don't need access in Mainland China, you can use Vercel implementation first."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react-swc";\n\n// https://vite.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n  // highlight-next-line\n  {/* base: "/tenzies/", // Don\'t write like this */}\n  // highlight-next-line\n  base: "./"\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"docsearch-v2-not-working-on-my-site",children:"DocSearch v2 Not Working on My Site"}),"\n",(0,r.jsx)(n.h3,{id:"background",children:"Background"}),"\n",(0,r.jsxs)(n.p,{children:["My Docusaurus (version 3.1.0) blog is deployed on GitHub Pages. Before I changed the domain from ",(0,r.jsx)(n.code,{children:"https://halcyon666.github.io/summary/"})," to ",(0,r.jsx)(n.code,{children:"https://halcyon666.top"}),", DocSearch v2 worked fine on my site. When I reapplied for DocSearch for the new domain, I followed the previous method, but the search didn't work."]}),"\n",(0,r.jsx)(n.h3,{id:"url-ignored",children:"URL Ignored"}),"\n",(0,r.jsxs)(n.p,{children:["First, I checked the crawler management dashboard ",(0,r.jsx)(n.a,{href:"https://crawler.algolia.com/",children:"https://crawler.algolia.com/"})," and found that many website URLs were ignored because there were many 302 redirects in the new application."]}),"\n",(0,r.jsx)(n.p,{children:"I tried searching in the preview search, and except for the homepage information, there were no results about my Markdown blog."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://s2.loli.net/2024/02/02/eM7Vc45PLlyGJYw.png",alt:"image-20240202002105462"})}),"\n",(0,r.jsx)(n.p,{children:"You can see my correct configuration above, and below is the wrong configuration, which solved the crawler ignore problem in this case."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-react",children:"new Crawler({\n  sitemaps: [],\n  ignoreCanonicalTo: false,\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"This time I could search in the search preview, but not on my website."}),"\n",(0,r.jsx)(n.h3,{id:"invalid-application-id-or-api-key",children:"Invalid Application-ID or API Key"}),"\n",(0,r.jsxs)(n.p,{children:["To solve the invalid Application-ID or API key problem, I looked at a helpful ",(0,r.jsx)(n.a,{href:"https://support.algolia.com/hc/en-us/articles/11217017604497-Why-am-I-getting-403-error-message-Invalid-Application-ID-or-API-key-status-403-with-DocSearch",children:"link"})," and found that my API key was wrong, given by the DocSearch reply email. So when you encounter this error, you need to check your API key in your ",(0,r.jsx)(n.a,{href:"https://dashboard.algolia.com/account/api-keys",children:"dashboard"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"misunderstanding-facetfilters",children:"Misunderstanding facetFilters"}),"\n",(0,r.jsx)(n.p,{children:"There were results in the preview search, but not on my website."}),"\n",(0,r.jsxs)(n.p,{children:["I got two payloads from the preview search and my website, compared these parameters, and found some differences from my parameters. So I checked the ",(0,r.jsx)(n.a,{href:"https://docusaurus.io/docs/search#contextual-search",children:"docusaurus documentation"})," and fixed this issue by changing the configuration."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"This is the wrong payload parameter at the end of the request URL."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:'facetFilters=["language:zh",["docusaurus_tag:default","docusaurus_tag:docs-default-current"]]'})}),"\n",(0,r.jsx)(n.p,{children:"My wrong configuration was:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"contextualSearch: true,\nsearchParameters: {},\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You need to set contextualSearch to false (",(0,r.jsxs)(n.em,{children:["Tip: This configuration is in ",(0,r.jsx)(n.code,{children:"docusaurus.config.ts"})," or ",(0,r.jsx)(n.code,{children:"docusaurus.config.js"})]}),"), and write your language filter in brackets. You can see my fix example below."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'contextualSearch: false,\nsearchParameters: {\n  // maybe yours is en\n	facetFilters: ["zh"],\n},\n'})}),"\n",(0,r.jsx)(n.h2,{id:"react-live-failure-in-docusaurus",children:(0,r.jsxs)(n.strong,{children:["React Live Failure in ",(0,r.jsx)(n.code,{children:"Docusaurus"})]})}),"\n",(0,r.jsx)(n.h3,{id:"comparison-of-success-and-failure",children:(0,r.jsx)(n.strong,{children:"Comparison of Success and Failure"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Failure Scenario"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://s2.loli.net/2025/09/20/A2gkTwlQ3CvBpHi.png",alt:"image-20250920214427419"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Normal Scenario"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://s2.loli.net/2025/09/20/6DmZ957BCRWQr8w.png",alt:"image-20250920214505155"})}),"\n",(0,r.jsx)(n.h3,{id:"commit-record-causing-failure",children:(0,r.jsx)(n.strong,{children:"Commit Record Causing Failure"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.a,{href:"https://github.com/Halcyon666/summary/commit/7b94f431d7bfedb1e8abf6132a0688c510ffa0c2",children:["Add component ",(0,r.jsx)(n.code,{children:"TailProtocal"})]})}),"\n",(0,r.jsx)(n.h3,{id:"fix-solution",children:(0,r.jsx)(n.strong,{children:"Fix Solution"})}),"\n",(0,r.jsx)(n.p,{children:"Import components individually, do not use global imports."}),"\n",(0,r.jsxs)(n.p,{children:["Fix commit ",(0,r.jsx)(n.a,{href:"https://github.com/Halcyon666/summary/commit/00b6ea74b68b586919e0a2c41a67ef0037defe7b",children:"record"})]}),"\n",(0,r.jsx)(n.h2,{id:"rspack-cache-crash",children:"rspack Cache Crash"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"> summary@0.2.0 start D:\\summary\n> docusaurus start --host 0.0.0.0 --no-open\n\n[INFO] Starting the development server...\n[SUCCESS] Docusaurus website is running at: http://localhost:3000/summary/\n\u25CF Client \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9%) setup compilation\nPanic occurred at runtime. Please file an issue on GitHub with the backtrace below: https://github.com/web-infra-dev/rspack/issues: panicked at crates\\rspack_core\\src\\cache\\persistent\\occasion\\make\\module_graph.rs:188:8:\nshould mgm exist\n\u2009ELIFECYCLE\u2009 Command failed with exit code 3221226505.\n"})}),"\n",(0,r.jsx)(n.p,{children:"Execute in project root directory D:\\summary:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\nrmdir /s /q .docusaurus\nrmdir /s /q node_modules\\.cache\nrmdir /s /q node_modules\\.pnpm\ndel /f /q pnpm-lock.yaml\n\n\nThen reinstall:\n\npnpm install\npnpm start\n"})}),"\n","\n",(0,r.jsx)(o.A,{})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);