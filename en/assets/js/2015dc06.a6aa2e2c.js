"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([[805],{9482:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var o=r(5893),i=r(1151);const t={title:"\u8bbe\u8ba1\u6a21\u5f0f",sidebar_label:"\u8bbe\u8ba1\u6a21\u5f0f",sidebar_position:1},s=void 0,c={id:"Java/DesignPattern/Design Pattern",title:"\u8bbe\u8ba1\u6a21\u5f0f",description:"\u5f02\u5e38\u5904\u7406 \u65b9\u6cd5",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/01-Java/07-DesignPattern/Design Pattern.mdx",sourceDirName:"01-Java/07-DesignPattern",slug:"/Java/DesignPattern/Design Pattern",permalink:"/en/Java/DesignPattern/Design Pattern",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"\u8bbe\u8ba1\u6a21\u5f0f",sidebar_label:"\u8bbe\u8ba1\u6a21\u5f0f",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Mybatis Plus Quick Start",permalink:"/en/Java/DateBase/Mybatis-Plus quick start"},next:{title:"jQuery\u9009\u62e9\u5668",permalink:"/en/Frontend/JQuery-revese-selector"}},a={},l=[{value:"\u5f02\u5e38\u5904\u7406 \u65b9\u6cd5",id:"\u5f02\u5e38\u5904\u7406-\u65b9\u6cd5",level:2},{value:"\u57fa\u4e8e\u63a5\u53e3\u8bbe\u8ba1",id:"\u57fa\u4e8e\u63a5\u53e3\u8bbe\u8ba1",level:2},{value:"DDD",id:"ddd",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u5f02\u5e38\u5904\u7406-\u65b9\u6cd5",children:"\u5f02\u5e38\u5904\u7406 \u65b9\u6cd5"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.exception;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.sql.SQLException;\n\n/**\n * @author WhaleFall\n * @create 2022-05-28 10:41\n * codes copy from => https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\n */\n@Slf4j\n@ControllerAdvice// \u6307\u5b9a\u4e3a\u5168\u5c40\u5f02\u5e38\u5904\u7406\npublic class ExceptionHandlingController {\n\n    // Specify name of a specific view that will be used to display the error:\n    @ExceptionHandler(SQLException.class)\n    public String databaseError() {\n        // Nothing to do.  Returns the logical view name of an error page, passed\n        // to the view-resolver(s) in usual way.\n        // Note that the exception is NOT available to this view (it is not added\n        // to the model) but see "Extending ExceptionHandlerExceptionResolver"\n        // below.\n        return "databaseError";\n    }\n\n    // Total control - setup a model and return the view name yourself. Or\n    // consider subclassing ExceptionHandlerExceptionResolver (see below).\n    @ExceptionHandler(Exception.class)\n    public ModelAndView handleError(HttpServletRequest req, Exception ex) {\n        log.error("Request: " + req.getRequestURL() + " raised " + ex);\n\n        ModelAndView mav = new ModelAndView();\n        mav.addObject("exception", ex);\n        mav.addObject("url", req.getRequestURL());\n        mav.setViewName("error");\n        return mav;\n    }\n\n}\n\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u57fa\u4e8e\u63a5\u53e3\u8bbe\u8ba1",children:"\u57fa\u4e8e\u63a5\u53e3\u8bbe\u8ba1"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u63a5\u53e3\u7c7b"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"package com.whalefall.learncases.design;\n\n/**\n * @author WhaleFall\n * @create 2022-07-25 19:21\n */\npublic interface IService {\n    boolean doService();\n\n    boolean doServiceBefore();\n\n    boolean doServiceAfter();\n\n    void doLog();\n}\n\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"\u63a5\u53e3\u5b9e\u73b0\u7c7b"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Component;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:34\n */\n@Slf4j\n@Component\npublic class AService implements IService {\n    @Override\n    public boolean doService() {\n        log.info("do A service");\n        if (true)\n            throw new RuntimeException("Exception msg1");\n        return true;\n    }\n\n    @Override\n    public boolean doServiceBefore() {\n        return false;\n    }\n\n    @Override\n    public boolean doServiceAfter() {\n        return false;\n    }\n\n    @Override\n    public void doLog() {\n        if (true)\n            throw new RuntimeException("Exception msg2");\n        log.error("A1 do log");\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["\u6838\u5fc3\u6d41\u7a0b\u5c01\u88c5","\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"\u53ef\u4ee5\u4f7f\u7528\u5355\u4f8b\u8bbe\u8ba1\u6a21\u5f0f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u65b9\u6cd51\u5355\u4f8b\u8bbe\u8ba1\u6a21\u5f0f"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.validation.constraints.NotNull;\nimport java.util.function.Consumer;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:26\n */\n@Slf4j\npublic class SProcessService {\n    private SProcessService() {\n\n    }\n\n    private static class SProcessServiceHolder {\n        private static final SProcessService INSTANCE = new SProcessService();\n    }\n    \n    public static SProcessService getInstance() {\n        return SProcessServiceHolder.INSTANCE;\n    } \n    \n    public boolean handle(IService service, Consumer<Exception> exceptionConsumer) {\n        serviceBefore(service);\n        service(service, exceptionConsumer);\n        serviceAfter(service);\n        log(service, exceptionConsumer);\n        return true;\n    }\n\n    private void serviceAfter(@NotNull IService service) {\n        service.doServiceAfter();\n    }\n\n    private void serviceBefore(@NotNull IService service) {\n        service.doServiceBefore();\n    }\n\n    private void service(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doService();\n        } catch (Exception e1) {\n            exceptionConsumer.accept(e1);\n            throw e1;\n        }\n    }\n\n    private void log(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doLog();\n        } catch (Exception e2) {\n            log.error("failed do log");\n            exceptionConsumer.accept(e2);\n        }\n    }\n}\n\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u65b9\u6cd52 \u6ce8\u5165\u5bb9\u5668\u4e2d"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Component;\n\nimport javax.validation.constraints.NotNull;\nimport java.util.function.Consumer;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:26\n */\n@Component\n@Slf4j\npublic class ProcessService {\n    \n    public boolean handle(IService service, Consumer<Exception> exceptionConsumer) {\n        serviceBefore(service);\n        service(service, exceptionConsumer);\n        serviceAfter(service);\n        log(service, exceptionConsumer);\n        return true;\n    }\n\n    private void serviceAfter(@NotNull IService service) {\n        service.doServiceAfter();\n    }\n\n    private void serviceBefore(@NotNull IService service) {\n        service.doServiceBefore();\n    }\n\n    private void service(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doService();\n        } catch (Exception e1) {\n            exceptionConsumer.accept(e1);\n            throw e1;\n        }\n    }\n\n    private void log(@NotNull IService service, Consumer<Exception> exceptionConsumer) {\n        try {\n            service.doLog();\n        } catch (Exception e2) {\n            log.error("failed do log");\n            exceptionConsumer.accept(e2);\n        }\n    }\n}\n\n\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"\u8c03\u7528\u6848\u4f8b"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'\npackage com.whalefall.learncases.design;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n/**\n * @author WhaleFall\n * @create 2022-07-24 6:37\n */\n@RestController\n@Slf4j\npublic class ControllerA {\n\n    private IService service;\n\n    private ProcessService processService;\n\n    public ControllerA(IService service, ProcessService processService) {\n        this.service = service;\n        this.processService = processService;\n    }\n\n    @GetMapping("/testA")\n    public boolean getA(){\n       return processService.handle(service, e -> log.error(e.getMessage(), e));\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://github.com/Halcyon666/learn-cases/tree/main/learncases/src/main/java/com/whalefall/learncases/design",children:"\u5b8c\u6574\u4ee3\u7801"})}),"\n",(0,o.jsx)(n.h2,{id:"ddd",children:"DDD"}),"\n",(0,o.jsx)(n.p,{children:"\u5b9e\u4f53\u5bf9\u8c61\u4e0d\u80fd\u76f4\u63a5\u8d4b\u503c\uff0c\u9886\u57df\u5bf9\u8c61\u4e0d\u80fd\u76f4\u63a5new\u51fa\u6765\uff0c\u5e94\u8be5\u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\uff0c\u5efa\u9020\u8005\u6a21\u5f0f\u6765\u5b9e\u73b0\u3002"}),"\n",(0,o.jsx)(n.admonition,{title:"Protocol",type:"tip",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The code section of this work is licensed under the [Apache 2.0 Protocol] (",(0,o.jsx)(n.a,{href:"https://www.apache.org/licenses/LICENSE-2.0).Subject",children:"https://www.apache.org/licenses/LICENSE-2.0).Subject"})," to license, you are free to modify the code, republish it and use it for commercial purposes.But you are required to be\uff1a"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Attribute"}),"\uff1akeeps the original author's name and source information in the original code and derived code."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Keep license"}),"\uff1akeeps the Apache 2.0 protocol file in old code and derivative code."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The document part of this work uses the licensing of [knowledge sharing signature 4.0 international licensing agreements] (",(0,o.jsx)(n.a,{href:"http://creativeecommons.org/licenses/by/4.0/",children:"http://creativeecommons.org/licenses/by/4.0/"}),"). Subject to permission, you are free to share, including any form of reproduction or distribution of works in any media, or to deduct, modify, convert or create new works on the basis of this work.But you are required to be\uff1a"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Attribute"}),"\uff1ashould indicate the original author and source information when using all or part of this document."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Non-commercial use"}),"\uff1amay not be used for commercial publication or any other act of a commercial nature.For commercial use, please contact authors."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Conditions for sharing the same methods"}),"\uff1aCrafts that are deduced and modified on the basis of this document should continue to be licensed under the Creative Commons Attribution 4.0 International License."]}),"\n"]}),"\n"]}),"\n"]})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>s});var o=r(7294);const i={},t=o.createContext(i);function s(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);