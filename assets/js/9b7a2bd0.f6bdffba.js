"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6165],{3905:(e,n,r)=>{r.d(n,{Zo:()=>c,kt:()=>d});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?s(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=t.createContext({}),l=function(e){var n=t.useContext(p),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},c=function(e){var n=l(e.components);return t.createElement(p.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,s=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=l(r),g=a,d=m["".concat(p,".").concat(g)]||m[g]||u[g]||s;return r?t.createElement(d,o(o({ref:n},c),{},{components:r})):t.createElement(d,o({ref:n},c))}));function d(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=r.length,o=new Array(s);o[0]=g;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[m]="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=r[l];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}g.displayName="MDXCreateElement"},6967:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var t=r(7462),a=(r(7294),r(3905));const s={},o=void 0,i={unversionedId:"Java/Spring/\u6df1\u5165\u7406\u89e3Spring-IoC",id:"Java/Spring/\u6df1\u5165\u7406\u89e3Spring-IoC",title:"\u6df1\u5165\u7406\u89e3Spring-IoC",description:"\u672c\u6587\u76f8\u5173\u4ee3\u7801(\u6765\u81ea\u5b98\u65b9\u6e90\u7801spring-test\u6a21\u5757)\u8bf7\u53c2\u89c1spring-demysify org.springframework.mylearntest\u5305\u4e0b\u3002",source:"@site/docs/Java/Spring/\u6df1\u5165\u7406\u89e3Spring-IoC.md",sourceDirName:"Java/Spring",slug:"/Java/Spring/\u6df1\u5165\u7406\u89e3Spring-IoC",permalink:"/summary/Java/Spring/\u6df1\u5165\u7406\u89e3Spring-IoC",draft:!1,editUrl:"https://github.com/Halcyon666/summary/blob/main/docs/Java/Spring/\u6df1\u5165\u7406\u89e3Spring-IoC.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"SPRING AOP 2.0",permalink:"/summary/Java/Spring/\u6df1\u5165\u7406\u89e3Spring-AOP2.0"},next:{title:"\u6df1\u5165\u7406\u89e3SpringAOP1.0",permalink:"/summary/Java/Spring/\u6df1\u5165\u7406\u89e3SpringAOP1.0"}},p={},l=[{value:"IoC\u4e09\u79cd\u6ce8\u5165\u65b9\u5f0f",id:"ioc\u4e09\u79cd\u6ce8\u5165\u65b9\u5f0f",level:2},{value:"\u6784\u9020\u65b9\u6cd5\u6ce8\u5165",id:"\u6784\u9020\u65b9\u6cd5\u6ce8\u5165",level:3},{value:"setter \u65b9\u6cd5\u6ce8\u5165",id:"setter-\u65b9\u6cd5\u6ce8\u5165",level:3},{value:"\u63a5\u53e3\u6ce8\u5165",id:"\u63a5\u53e3\u6ce8\u5165",level:3},{value:"IoC Service Provider",id:"ioc-service-provider",level:2},{value:"\u7ba1\u7406\u4f9d\u8d56\u7684\u4e09\u79cd\u65b9\u5f0f",id:"\u7ba1\u7406\u4f9d\u8d56\u7684\u4e09\u79cd\u65b9\u5f0f",level:3},{value:"Spring IoC\u5bb9\u5668 \u548c IoC Service Provider\u4e4b\u95f4\u7684\u5173\u7cfb",id:"spring-ioc\u5bb9\u5668-\u548c-ioc-service-provider\u4e4b\u95f4\u7684\u5173\u7cfb",level:3},{value:"Spring\u63d0\u4f9b\u4e86BeanFactory \u548c ApplicationContext",id:"spring\u63d0\u4f9b\u4e86beanfactory-\u548c-applicationcontext",level:3},{value:"BeanFactory\u7684\u5bf9\u8c61\u6ce8\u518c\u4e0e\u4f9d\u8d56\u7ed1\u5b9a\u65b9\u5f0f",id:"beanfactory\u7684\u5bf9\u8c61\u6ce8\u518c\u4e0e\u4f9d\u8d56\u7ed1\u5b9a\u65b9\u5f0f",level:2},{value:"\u76f4\u63a5\u7f16\u7801\u65b9\u5f0f",id:"\u76f4\u63a5\u7f16\u7801\u65b9\u5f0f",level:3},{value:"\u5916\u90e8\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f",id:"\u5916\u90e8\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f",level:3},{value:"properties\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f",id:"properties\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f",level:4},{value:"xml",id:"xml",level:4},{value:"local parent \u548c bean\u7684\u533a\u522b",id:"local-parent-\u548c-bean\u7684\u533a\u522b",level:3},{value:"byType byName No Autodetect",id:"bytype-byname-no-autodetect",level:3},{value:"\u81ea\u52a8\u7ed1\u5b9a\u548c\u624b\u52a8\u7ed1\u5b9a\u7684\u533a\u522b",id:"\u81ea\u52a8\u7ed1\u5b9a\u548c\u624b\u52a8\u7ed1\u5b9a\u7684\u533a\u522b",level:3},{value:"\u61d2\u52a0\u8f7d\u914d\u7f6e\u4e86\u662f\u5426\u4e00\u5b9a\u4f1a\u751f\u6548",id:"\u61d2\u52a0\u8f7d\u914d\u7f6e\u4e86\u662f\u5426\u4e00\u5b9a\u4f1a\u751f\u6548",level:3},{value:"\u5982\u4f55\u7b80\u5316xml\u914d\u7f6e\u4e2dproperty\u5c5e\u6027\u7684\u7f16\u5199",id:"\u5982\u4f55\u7b80\u5316xml\u914d\u7f6e\u4e2dproperty\u5c5e\u6027\u7684\u7f16\u5199",level:3},{value:"abstract\u5c5e\u6027\u7684\u4f7f\u7528",id:"abstract\u5c5e\u6027\u7684\u4f7f\u7528",level:3},{value:"scope",id:"scope",level:3},{value:"\u5077\u6881\u6362\u67f1\u4e4b\u672f",id:"\u5077\u6881\u6362\u67f1\u4e4b\u672f",level:3},{value:"\u65b9\u6cd5\u6ce8\u5165",id:"\u65b9\u6cd5\u6ce8\u5165",level:4},{value:"\u901a\u8fc7\u5b9e\u73b0BeanFactoryAware",id:"\u901a\u8fc7\u5b9e\u73b0beanfactoryaware",level:4},{value:"\u901a\u8fc7ObjectFactory",id:"\u901a\u8fc7objectfactory",level:4},{value:"\u65b9\u6cd5\u66ff\u6362",id:"\u65b9\u6cd5\u66ff\u6362",level:4},{value:"IoC\u5bb9\u5668\u80cc\u540e\u7684\u79d8\u5bc6",id:"ioc\u5bb9\u5668\u80cc\u540e\u7684\u79d8\u5bc6",level:3},{value:"BeanFactoryPostProcessor",id:"beanfactorypostprocessor",level:3},{value:"PropertyPlaceholderConfigurer",id:"propertyplaceholderconfigurer",level:4},{value:"PropertyOverrideConfigurer",id:"propertyoverrideconfigurer",level:4},{value:"CustomEditorConfigurer",id:"customeditorconfigurer",level:4},{value:"bean\u7684\u6784\u9020",id:"bean\u7684\u6784\u9020",level:4},{value:"ApplicationContext",id:"applicationcontext",level:2},{value:"\u7edf\u4e00\u8d44\u6e90\u52a0\u8f7d\u7b56\u7565",id:"\u7edf\u4e00\u8d44\u6e90\u52a0\u8f7d\u7b56\u7565",level:3},{value:"\u56db\u79cd\u52a0\u8f7d\u65b9\u5f0f",id:"\u56db\u79cd\u52a0\u8f7d\u65b9\u5f0f",level:3},{value:"\u4f7f\u7528\u4ee5ResourceLoader\u8eab\u4efd\u767b\u573a\u7684ApplicationContext",id:"\u4f7f\u7528\u4ee5resourceloader\u8eab\u4efd\u767b\u573a\u7684applicationcontext",level:4},{value:"ResourceLoader\u7c7b\u578b\u7684\u6ce8\u5165",id:"resourceloader\u7c7b\u578b\u7684\u6ce8\u5165",level:4},{value:"\u56fd\u9645\u5316\u4fe1\u606f\u652f\u6301(i18n MessageSource)",id:"\u56fd\u9645\u5316\u4fe1\u606f\u652f\u6301i18n-messagesource",level:3},{value:"Java SE \u63d0\u4f9b\u7684\u56fd\u9645\u5316\u652f\u6301",id:"java-se-\u63d0\u4f9b\u7684\u56fd\u9645\u5316\u652f\u6301",level:4},{value:"Spring IoC\u5bb9\u5668\u6269\u5c55",id:"spring-ioc\u5bb9\u5668\u6269\u5c55",level:2},{value:"IoC\u76f8\u5173\u6ce8\u89e3",id:"ioc\u76f8\u5173\u6ce8\u89e3",level:3}],c={toc:l},m="wrapper";function u(e){let{components:n,...r}=e;return(0,a.kt)(m,(0,t.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u672c\u6587\u76f8\u5173\u4ee3\u7801(\u6765\u81ea",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spring-projects/spring-framework.git",title:"\u5b98\u65b9\u6e90\u7801"},"\u5b98\u65b9\u6e90\u7801"),"spring-test\u6a21\u5757)\u8bf7\u53c2\u89c1",(0,a.kt)("a",{parentName:"p",href:"https://github.com/whalefall541/spring-demysify"},"spring-demysify")," org.springframework.mylearntest\u5305\u4e0b\u3002"),(0,a.kt)("h2",{id:"ioc\u4e09\u79cd\u6ce8\u5165\u65b9\u5f0f"},"IoC\u4e09\u79cd\u6ce8\u5165\u65b9\u5f0f"),(0,a.kt)("h3",{id:"\u6784\u9020\u65b9\u6cd5\u6ce8\u5165"},"\u6784\u9020\u65b9\u6cd5\u6ce8\u5165"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"public FXNewsProvider(IFXNewsListener newsListner,IFXNewsPersister newsPersister) {\n    this.newsListener = newsListner;\n    this.newPersistener = newsPersister;\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a\u5bf9\u8c61\u5728\u6784\u9020\u5b8c\u6210\u4e4b\u540e\uff0c\u5373\u5df2\u8fdb\u5165\u5c31\u7eea\u72b6\u6001\uff0c\u53ef\u4ee5\u9a6c\u4e0a\u4f7f\u7528\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u7f3a\u70b9: \u5f53\u4f9d\u8d56\u5bf9\u8c61\u6bd4\u8f83\u591a\u7684\u65f6\u5019\uff0c\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u5217\u8868\u4f1a\u6bd4\u8f83\u957f\u3002\u800c\u901a\u8fc7\u53cd\u5c04\u6784\u9020\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u5bf9\u76f8\u540c\u7c7b\u578b\u7684\u53c2\u6570\u7684\u5904\u7406\u4f1a\u6bd4\u8f83\u56f0\u96be\uff0c\u7ef4\u62a4\u548c\u4f7f\u7528\u4e0a\u4e5f\u6bd4\u8f83\u9ebb\u70e6\u3002\u800c\u4e14\u5728Java\u4e2d\uff0c\u6784\u9020\u65b9\u6cd5\u65e0\u6cd5\u88ab\u7ee7\u627f\uff0c\u65e0\u6cd5\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\u5bf9\u4e8e\u975e\u5fc5\u987b\u7684\u4f9d\u8d56\u5904\u7406\uff0c\u53ef\u80fd\u9700\u8981\u5f15\u5165\u591a\u4e2a\u6784\u9020\u65b9\u6cd5\uff0c\u800c\u53c2\u6570\u6570\u91cf\u7684\u53d8\u52a8\u53ef\u80fd\u9020\u6210\u7ef4\u62a4\u4e0a\u7684\u4e0d\u4fbf\u3002")),(0,a.kt)("h3",{id:"setter-\u65b9\u6cd5\u6ce8\u5165"},"setter \u65b9\u6cd5\u6ce8\u5165"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class FXNewsProvider {\n    private IFXNewsListener newsListener;\n    private IFXNewsPersister newPersistener;\n\n    public IFXNewsListener getNewsListener() {\n    return newsListener;\n    }\n    public void setNewsListener(IFXNewsListener newsListener) {\n    this.newsListener = newsListener;\n    }\n\n    public IFXNewsPersister getNewPersistener() {\n    return newPersistener;\n    }\n    public void setNewPersistener(IFXNewsPersister newPersistener) {\n    this.newPersistener = newPersistener;\n    }\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f18\u70b9\uff1a\u56e0\u4e3a\u65b9\u6cd5\u53ef\u4ee5\u547d\u540d\uff0c \u6240\u4ee5setter\u65b9\u6cd5\u6ce8\u5165\u5728\u63cf\u8ff0\u6027\u4e0a\u8981\u6bd4\u6784\u9020\u65b9\u6cd5\u6ce8\u5165\u597d\u4e00\u4e9b\u3002 \u53e6\u5916\uff0c setter\u65b9\u6cd5\u53ef\u4ee5\u88ab\u7ee7\u627f\uff0c\u5141\u8bb8\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u800c\u4e14\u6709\u826f\u597d\u7684IDE\u652f\u6301\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\uff1a\u5f53\u7136\u5c31\u662f\u5bf9\u8c61\u65e0\u6cd5\u5728\u6784\u9020\u5b8c\u6210\u540e\u9a6c\u4e0a\u8fdb\u5165\u5c31\u7eea\u72b6\u6001\u3002")),(0,a.kt)("h3",{id:"\u63a5\u53e3\u6ce8\u5165"},"\u63a5\u53e3\u6ce8\u5165"),(0,a.kt)("p",null,"FXNewsProvider\u4e3a\u4e86\u8ba9IoC Service Provider\u4e3a\u5176\u6ce8\u5165\u6240\u4f9d\u8d56\u7684IFXNewsListener\uff0c\u9996\u5148\u9700\u8981\u5b9e\u73b0IFXNewsListenerCallable\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u4f1a\u58f0\u660e\u4e00\u4e2ainjectNewsListner\u65b9\u6cd5\uff08\u65b9\u6cd5\u540d\u968f\u610f\uff09\uff0c\u8be5\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u5c31\u662f\u6240\u4f9d\u8d56\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u8fd9\u6837\uff0c InjectionServiceContainer\u5bf9\u8c61\uff0c\u5373\u5bf9\u5e94\u7684IoCService Provider\u5c31\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u63a5\u53e3\u65b9\u6cd5\u5c06\u4f9d\u8d56\u5bf9\u8c61\u6ce8\u5165\u5230\u88ab\u6ce8\u5165\u5bf9\u8c61FXNewsProvider\u5f53\u4e2d\u3002\n",(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/SNQgVDHi5ruUso3.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7f3a\u70b9\u63a5\u53e3\u6ce8\u5165\u662f\u73b0\u5728\u4e0d\u751a\u63d0\u5021\u7684\u4e00\u79cd\u65b9\u5f0f\uff0c\u57fa\u672c\u5904\u4e8e\u201c\u9000\u5f79\u72b6\u6001\u201d\u3002\u56e0\u4e3a\u5b83\u5f3a\u5236\u88ab\u6ce8\u5165\u5bf9\u8c61\u5b9e\u73b0\u4e0d\u5fc5\u8981\u7684\u63a5\u53e3\uff0c\u5e26\u6709\u4fb5\u5165\u6027\u3002\u800c\u6784\u9020\u65b9\u6cd5\u6ce8\u5165\u548csetter\u65b9\u6cd5\u6ce8\u5165\u5219\u4e0d\u9700\u8981\u5982\u6b64\u3002")),(0,a.kt)("h2",{id:"ioc-service-provider"},"IoC Service Provider"),(0,a.kt)("p",null,"IoC Service Provider\u7684\u804c\u8d23\u662f\u4ec0\u4e48\uff1f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e1a\u52a1\u5bf9\u8c61\u7684\u6784\u5efa\u7ba1\u7406\uff1a\u5728IoC\u573a\u666f\u4e2d\uff0c\u4e1a\u52a1\u5bf9\u8c61\u65e0\u9700\u5173\u5fc3\u6240\u4f9d\u8d56\u5bf9\u8c61\u5982\u4f55\u6784\u5efa\u5982\u4f55\u83b7\u5f97\uff0c\u4f46\u8fd9\u90e8\u5206\u5de5\u4f5c\u59cb\u7ec8\u9700\u8981\u6709\u4eba\u6765\u505a\u3002\u6240\u4ee5\uff0cIoC Service Provider\u9700\u8981\u5c06\u5bf9\u8c61\u7684\u6784\u5efa\u903b\u8f91\u4ece\u5ba2\u6237\u7aef\u90a3\u91cc\u5265\u79bb\u51fa\u6765\uff0c\u4ee5\u514d\u8fd9\u90e8\u5206\u903b\u8f91\u6c61\u67d3\u4e1a\u52a1\u5bf9\u8c61\u7684\u5b9e\u73b0\u3002\n\u4e1a\u52a1\u5bf9\u8c61\u95f4\u7684\u4f9d\u8d56\u7ed1\u5b9a\uff1a"),(0,a.kt)("li",{parentName:"ul"},"\u4e1a\u52a1\u5bf9\u8c61\u7684\u4f9d\u8d56\u7ba1\u7406\uff1aIoC Service Provider \u901a\u8fc7\u7ed3\u5408\u4e4b\u524d\u6784\u5efa\u548c\u7ba1\u7406\u7684\u6240\u6709\u4e1a\u52a1\u5bf9\u8c61\uff0c\u4ee5\u53ca\u5404\u4e2a\u4e1a\u52a1\u5bf9\u8c61\u95f4\u53ef\u4ee5\u8bc6\u522b\u4f9d\u8d56\u5173\u7cfb\uff0c\u5c06\u8fd9\u4e9b\u5bf9\u8c61\u6240\u4f9d\u8d56\u7684\u5bf9\u8c61\u6ce8\u7ed1\u5b9a\uff0c\u4ece\u800c\u4fdd\u8bc1\u6bcf\u4e2a\u4e1a\u52a1\u5bf9\u8c61\u5728\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5904\u4e8e\u5c31\u7eea\u72b6\u6001\u3002")),(0,a.kt)("p",null,"\u5982\u4f55\u8bb0\u5f55\u5bf9\u8c61\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff1f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b83\u53ef\u4ee5\u901a\u8fc7\u6700\u57fa\u672c\u7684\u6587\u672c\u6587\u4ef6\u6765\u8bb0\u5f55\u88ab\u6ce8\u5165\u5bf9\u8c61\u548c\u5176\u4f9d\u8d56\u5bf9\u8c61\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5b83\u4e5f\u53ef\u4ee5\u901a\u8fc7\u63cf\u8ff0\u6027\u8f83\u5f3a\u7684XML\u6587\u4ef6\u683c\u5f0f\u6765\u8bb0\u5f55\u5bf9\u5e94\u4fe1\u606f\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5b83\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7f16\u5199\u4ee3\u7801\u7684\u65b9\u5f0f\u6765\u6ce8\u518c\u8fd9\u4e9b\u5bf9\u5e94\u4fe1\u606f\uff1b")),(0,a.kt)("h3",{id:"\u7ba1\u7406\u4f9d\u8d56\u7684\u4e09\u79cd\u65b9\u5f0f"},"\u7ba1\u7406\u4f9d\u8d56\u7684\u4e09\u79cd\u65b9\u5f0f"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u76f4\u63a5\u7f16\u7801\u5f0f")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5f53\u524d\u5927\u90e8\u5206\u7684IoC\u5bb9\u5668\u90fd\u5e94\u8be5\u652f\u6301\u76f4\u63a5\u7f16\u7801\u65b9\u5f0f\uff0c\u6bd4\u5982PicoContainer\u3001 Spring\u3001 Avalon\u7b49\u3002"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"IoContainer container = ...;\ncontainer.register(FXNewsProvider.class,new FXNewsProvider());\ncontainer.register(IFXNewsListener.class,new DowJonesNewsListener());\n...\ncontainer.bind(IFXNewsListenerCallable.class, container.get(IFXNewsListener.class));\n...\nFXNewsProvider newsProvider = (FXNewsProvider)container.get(FXNewsProvider.class);\nnewProvider.getAndPersistNews();\n")))),(0,a.kt)("p",null,"\u901a\u8fc7bind\u65b9\u6cd5\u5c06\u201c\u88ab\u6ce8\u5165\u5bf9\u8c61\u201d\uff08\u7531IFXNewsListenerCallable\u63a5\u53e3\u6dfb\u52a0\u6807\u5fd7\uff09\u6240\u4f9d\u8d56\u7684\u5bf9\u8c61\uff0c\u7ed1\u5b9a\u4e3a\u5bb9\u5668\u4e2d\u6ce8\u518c\u8fc7\u7684IFXNewsListener\u7c7b\u578b\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002\u5bb9\u5668\u5728\u8fd4\u56deFXNewsProvider\n\u5bf9\u8c61\u5b9e\u4f8b\u4e4b\u524d\uff0c\u4f1a\u6839\u636e\u8fd9\u4e2a\u7ed1\u5b9a\u4fe1\u606f\uff0c\u5c06IFXNewsListener\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d\u7684\u5bf9\u8c61\u5b9e\u4f8b\u6ce8\u5165\u5230\u201c\u88ab\u6ce8\u5165\u5bf9\u8c61\u201d\u2014\u2014FXNewsProvider\u4e2d\uff0c\u5e76\u6700\u7ec8\u8fd4\u56de\u5df2\u7ecf\u7ec4\u88c5\u5b8c\u6bd5\u7684FXNewsProvider\u5bf9\u8c61\u3002"),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n    <bean id="newsProvider" class="..FXNewsProvider">\n    <property name="newsListener">\n    <ref bean="djNewsListener"/>\n    </property>\n    <property name="newPersistener">\n    <ref bean="djNewsPersister"/>\n    </property>\n    </bean>\n\n    <bean id="djNewsListener"\n    class="..impl.DowJonesNewsListener">\n    </bean>\n\n    <bean id="djNewsPersister"\n    class="..impl.DowJonesNewsPersister">\n    </bean>\n</beans>\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u5143\u6570\u636e\u65b9\u5f0f(\u4f7f\u7528Guice)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class FXNewsProvider { \n    private IFXNewsListener newsListener;\n    private IFXNewsPersister newPersistener;\n\n    @Inject\n    public FXNewsProvider(IFXNewsListener listener,IFXNewsPersister persister) {\n    this.newsListener = listener;\n    this.newPersistener = persister;\n    } \n    //...\n}\n")),(0,a.kt)("p",null,"\u901a\u8fc7@Inject\uff0c\u6211\u4eec\u6307\u660e\u9700\u8981IoC Service Provider\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u6ce8\u5165\u65b9\u5f0f\uff0c\u4e3aFXNewsProvider\u6ce8\u5165\u5176\u6240\u4f9d\u8d56\u7684\u5bf9\u8c61\u3002\u81f3\u4e8e\u4f59\u4e0b\u7684\u4f9d\u8d56\u76f8\u5173\u4fe1\u606f\uff0c\u5728Guice\u4e2d\u662f\u7531\u76f8\u5e94\u7684Module\u6765\u63d0\u4f9b\u7684\uff0c\u4ee3\u7801\u6e05\u53553-7\u7ed9\u51fa\u4e86FXNewsProvider\u6240\u4f7f\u7528\u7684Module\u5b9e\u73b0\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class NewsBindingModule extends AbstractModule {\n    @Override\n    protected void configure() {\n    bind(IFXNewsListener.class).to(DowJonesNewsListener.class).in(Scopes.SINGLETON);\n    bind(IFXNewsPersister.class).to(DowJonesNewsPersister.class).in(Scopes.SINGLETON);\n    } \n}\n")),(0,a.kt)("p",null,"\u901a\u8fc7Module\u6307\u5b9a\u8fdb\u4e00\u6b65\u7684\u4f9d\u8d56\u6ce8\u5165\u76f8\u5173\u4fe1\u606f\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u4eceGuice\u90a3\u91cc\u53d6\u5f97\u6700\u7ec8\u5df2\u7ecf\u6ce8\u5165\u5b8c\u6bd5\uff0c\u5e76\u76f4\u63a5\u53ef\u7528\u7684\u5bf9\u8c61\u4e86\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Injector injector = Guice.createInjector(new NewsBindingModule());\nFXNewsProvider newsProvider = injector.getInstance(FXNewsProvider.class);\nnewsProvider.getAndPersistNews();\n")),(0,a.kt)("h3",{id:"spring-ioc\u5bb9\u5668-\u548c-ioc-service-provider\u4e4b\u95f4\u7684\u5173\u7cfb"},"Spring IoC\u5bb9\u5668 \u548c IoC Service Provider\u4e4b\u95f4\u7684\u5173\u7cfb"),(0,a.kt)("p",null,"Spring\u7684IoC\u5bb9\u5668\u662f\u4e00\u4e2aIoC Service Provider\uff0c\u4f46\u662f\uff0c\u8fd9\u53ea\u662f\u5b83\u88ab\u51a0\u4ee5IoC\u4e4b\u540d\u7684\u90e8\u5206\u539f\u56e0\uff0c\u6211\u4eec\u4e0d\u80fd\u5ffd\u7565\u7684\u662f\u201c\u5bb9\u5668\u201d\u3002 Spring\u7684IoC\u5bb9\u5668\u662f\u4e00\u4e2a\u63d0\u4f9bIoC\u652f\u6301\u7684\u8f7b\u91cf\u7ea7\u5bb9\u5668\uff0c\u9664\u4e86\u57fa\u672c\u7684IoC\u652f\u6301\uff0c\u5b83\u4f5c\u4e3a\u8f7b\u91cf\u7ea7\u5bb9\u5668\u8fd8\u63d0\u4f9b\u4e86IoC\u4e4b\u5916\u7684\u652f\u6301\u3002\u5982\u5728Spring\u7684IoC\u5bb9\u5668\u4e4b\u4e0a\uff0c Spring\u8fd8\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684AOP\u6846\u67b6\u652f\u6301\u3001\u4f01\u4e1a\u7ea7\u670d\u52a1\u96c6\u6210\u7b49\u670d\u52a1\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/WX5mDwzVoFylCJZ.png",alt:"IoC\u5bb9\u5668\u548cProvider\u7684 \u5173\u7cfb",title:"IoC\u5bb9\u5668\u548cProvider\u7684 \u5173\u7cfb"})),(0,a.kt)("h3",{id:"spring\u63d0\u4f9b\u4e86beanfactory-\u548c-applicationcontext"},"Spring\u63d0\u4f9b\u4e86BeanFactory \u548c ApplicationContext"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"BeanFactory: \u57fa\u7840\u7c7b\u578bIoC\u5bb9\u5668\uff0c\u63d0\u4f9b\u5b8c\u6574\u7684IoC\u670d\u52a1\u652f\u6301\u3002\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u6307\u5b9a\uff0c\u9ed8\u8ba4\u91c7\u7528\u5ef6\u8fdf\u521d\u59cb\u5316\u7b56\u7565\uff08 lazy-load\n\uff09\u3002\u53ea\u6709\u5f53\u5ba2\u6237\u7aef\u5bf9\u8c61\u9700\u8981\u8bbf\u95ee\u5bb9\u5668\u4e2d\u7684\u67d0\u4e2a\u53d7\u7ba1\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u624d\u5bf9\u8be5\u53d7\u7ba1\u5bf9\u8c61\u8fdb\u884c\u521d\u59cb\u5316\u4ee5\u53ca\u4f9d\u8d56\u6ce8\u5165\u64cd\u4f5c\u3002\u6240\u4ee5\uff0c\u76f8\u5bf9\u6765\u8bf4\uff0c\u5bb9\u5668\u542f\u52a8\u521d\u671f\u901f\u5ea6\u8f83\u5feb\uff0c\u6240\u9700\u8981\u7684\u8d44\u6e90\u6709\u9650\u3002\u5bf9\u4e8e\u8d44\u6e90\u6709\u9650\uff0c\u5e76\u4e14\u529f\u80fd\u8981\u6c42\u4e0d\u662f\u5f88\u4e25\u683c\u7684\u573a\u666f\uff0c BeanFactory\u662f\u6bd4\u8f83\u5408\u9002\u7684IoC\u5bb9\u5668\u9009\u62e9\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"ApplicationContext: ApplicationContext\u5728BeanFactory\u7684\u57fa\u7840\u4e0a\u6784\u5efa\uff0c\u662f\u76f8\u5bf9\u6bd4\u8f83\u9ad8\u7ea7\u7684\u5bb9\u5668\u5b9e\u73b0\uff0c\u9664\u4e86\u62e5\u6709BeanFactory\u7684\u6240\u6709\u652f\u6301\uff0c ApplicationContext\n\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u9ad8\u7ea7\u7279\u6027\uff0c\u6bd4\u5982\u4e8b\u4ef6\u53d1\u5e03\u3001\u56fd\u9645\u5316\u4fe1\u606f\u652f\u6301\u7b49\uff0c\u8fd9\u4e9b\u4f1a\u5728\u540e\u9762\u8be6\u8ff0\u3002 ApplicationContext\u6240\u7ba1\u7406\u7684\u5bf9\u8c61\uff0c\u5728\u8be5\u7c7b\u578b\u5bb9\u5668\u542f\u52a8\u4e4b\u540e\uff0c\u9ed8\u8ba4\u5168\u90e8\u521d\u59cb\u5316\u5e76\u7ed1\u5b9a\u5b8c\u6210\u3002\u6240\u4ee5\uff0c\u76f8\u5bf9\u4e8eBeanFactory\u6765\u8bf4\uff0c ApplicationContext\u8981\u6c42\u66f4\u591a\u7684\u7cfb\u7edf\u8d44\u6e90\uff0c\u540c\u65f6\uff0c\u56e0\u4e3a\u5728\u542f\u52a8\u65f6\u5c31\u5b8c\u6210\u6240\u6709\u521d\u59cb\u5316\uff0c\u5bb9\u5668\u542f\u52a8\u65f6\u95f4\u8f83\u4e4bBeanFactory\u4e5f\u4f1a\u957f\u4e00\u4e9b\u3002\u5728\u90a3\u4e9b\u7cfb\u7edf\u8d44\u6e90\u5145\u8db3\uff0c\u5e76\u4e14\u8981\u6c42\u66f4\u591a\u529f\u80fd\u7684\u573a\u666f\u4e2d\uff0cApplicationContext\u7c7b\u578b\u7684\u5bb9\u5668\u662f\u6bd4\u8f83\u5408\u9002\u7684\u9009\u62e9\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u4f5c\u4e3aSpring\u63d0\u4f9b\u7684\u57fa\u672c\u7684IoC\u5bb9\u5668\uff0cBeanFactory\u53ef\u4ee5\u5b8c\u6210\u4f5c\u4e3aIoC Service Provider\u7684\u6240\u6709\u804c\u8d23\uff0c\u5305\u62ec\u4e1a\u52a1\u5bf9\u8c61\u7684\u6ce8\u518c\u548c\u5bf9\u8c61\u95f4\u4f9d\u8d56\u5173\u7cfb\u7684\u7ed1\u5b9a\u3002*"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public interface BeanFactory {\n\n    String FACTORY_BEAN_PREFIX = "&";\n\n    Object getBean(String name) throws BeansException;\n\n    <T> T getBean(String name, Class<T> requiredType) throws BeansException;\n\n    Object getBean(String name, Object... args) throws BeansException;\n\n    <T> T getBean(Class<T> requiredType) throws BeansException;\n\n    <T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\n\n    <T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\n\n    <T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\n\n    boolean containsBean(String name);\n\n    boolean isSingleton(String name) throws NoSuchBeanDefinitionException;\n\n    boolean isPrototype(String name) throws NoSuchBeanDefinitionException;\n\n    boolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\n\n    boolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\n\n    @Nullable\n    Class<?> getType(String name) throws NoSuchBeanDefinitionException;\n\n    @Nullable\n    Class<?> getType(String name, boolean allowFactoryBeanInit) throws NoSuchBeanDefinitionException;\n\n    String[] getAliases(String name);\n\n}\n')),(0,a.kt)("h2",{id:"beanfactory\u7684\u5bf9\u8c61\u6ce8\u518c\u4e0e\u4f9d\u8d56\u7ed1\u5b9a\u65b9\u5f0f"},"BeanFactory\u7684\u5bf9\u8c61\u6ce8\u518c\u4e0e\u4f9d\u8d56\u7ed1\u5b9a\u65b9\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"// 1-\u8bbe\u8ba1FXNewsProvider\u7c7b\u7528\u4e8e\u666e\u904d\u7684\u65b0\u95fb\u5904\u7406\npublic class FXNewsProvider{\n//...\n}\n// 2-\u8bbe\u8ba1IFXNewsListener\u63a5\u53e3\u62bd\u8c61\u5404\u4e2a\u65b0\u95fb\u793e\u4e0d\u540c\u7684\u65b0\u95fb\u83b7\u53d6\u65b9\u5f0f\uff0c\u5e76\u7ed9\u51fa\u76f8\u5e94\u5b9e\u73b0\u7c7b\npublic interface IFXNewsListener{\n//...\n}\n// \u4ee5\u53ca\npublic class DowJonesNewsListener implements IFXNewsListener {\n//...\n}\n// 3-\u8bbe\u8ba1IFXNewsPersister\u63a5\u53e3\u62bd\u8c61\u4e0d\u540c\u6570\u636e\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5e76\u5b9e\u73b0\u76f8\u5e94\u7684\u5b9e\u73b0\u7c7b\npublic interface IFXNewsPersister {\n//...\n} \n// \u4ee5\u53ca\npublic class DowJonesNewsPersister implements IFXNewsPersister { \n//...\n}\n")),(0,a.kt)("h3",{id:"\u76f4\u63a5\u7f16\u7801\u65b9\u5f0f"},"\u76f4\u63a5\u7f16\u7801\u65b9\u5f0f"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u7f16\u7801\u65b9\u5f0f\u4f7f\u7528BeanFactory\u5b9e\u73b0FX\u65b0\u95fb\u76f8\u5173\u7c7b\u7684\u6ce8\u518c\u53ca\u7ed1\u5b9a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.beanf;\n\nimport org.springframework.beans.MutablePropertyValues;\nimport org.springframework.beans.PropertyValue;\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.support.AbstractBeanDefinition;\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.beans.factory.support.DefaultListableBeanFactory;\nimport org.springframework.beans.factory.support.RootBeanDefinition;\nimport org.springframework.mylearntest.before.FXNewsProvider;\n\npublic class BeanFactoryFX {\n    public static void main(String[] args) {\n        DefaultListableBeanFactory beanRegistry = new DefaultListableBeanFactory();\n        BeanFactory container = bindViaCode(beanRegistry);\n        FXNewsProvider newsProvider = (FXNewsProvider)container.getBean("djNewsProvider");\n        newsProvider.getAndPersistNews();\n    }\n\n    // \u56e0\u4e3a\u4f20\u5165\u7684DefaultListableBeanFactory\u540c\n    // \u65f6\u5b9e\u73b0\u4e86BeanFactory\u548cBeanDefinitionRegistry\u63a5\u53e3\uff0c\u6240\u4ee5\uff0c\u8fd9\u6837\u505a\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u4e0d\u4f1a\u51fa\n    // \u73b0\u95ee\u9898\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5355\u7eaf\u7684BeanDefinitionRegistry\u662f\u65e0\u6cd5\u5f3a\u5236\u8f6c\u6362\u5230BeanFactory\n    // \u7c7b\u578b\u7684\uff01\n    public static BeanFactory bindViaCode(BeanDefinitionRegistry registry) {\n        AbstractBeanDefinition newsProvider = new RootBeanDefinition(FXNewsProvider.class, 0, true);\n        AbstractBeanDefinition newsListener = new RootBeanDefinition(DowJonesNewsListener.class,0, true);\n        AbstractBeanDefinition newsPersister = new RootBeanDefinition(DowJonesNewsPersister.class, 0,true);\n        // 1.\u5c06bean\u5b9a\u4e49\u6ce8\u518c\u5230\u5bb9\u5668\u4e2d\n        registry.registerBeanDefinition("djNewsProvider", newsProvider);\n        registry.registerBeanDefinition("djListener", newsListener);\n        registry.registerBeanDefinition("djPersister", newsPersister);\n        // 2.0 \u6307\u5b9a\u4f9d\u8d56\u5173\u7cfb\n        // 2.1 \u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u6ce8\u5165\u65b9\u5f0f\n        /*ConstructorArgumentValues argValues = new ConstructorArgumentValues();\n        argValues.addIndexedArgumentValue(0, newsListener);\n        argValues.addIndexedArgumentValue(1, newsPersister);\n        newsProvider.setConstructorArgumentValues(argValues);*/\n        // 2.2 \u6216\u8005\u901a\u8fc7setter\u65b9\u6cd5\u6ce8\u5165\u65b9\u5f0f\n        // \u4f7fnewsListener newPersistener\u7ed1\u5b9a\u5230newsProvider\u4e0a\n        MutablePropertyValues propertyValues = new MutablePropertyValues();\n        propertyValues.addPropertyValue(new PropertyValue("newsListener",newsListener));\n        propertyValues.addPropertyValue(new PropertyValue("newPersistener",newsPersister));\n        newsProvider.setPropertyValues(propertyValues);\n        // 3.0 \u7ed1\u5b9a\u5b8c\u6210 \n        return (BeanFactory)registry;\n    }\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u8bbe\u8ba1IFXNewsListener\u63a5\u53e3\u62bd\u8c61\u5404\u4e2a\u65b0\u95fb\u793e\u4e0d\u540c\u7684\u65b0\u95fb\u83b7\u53d6\u65b9\u5f0f\uff0c\u5e76\u7ed9\u51fa\u76f8\u5e94\u5b9e\u73b0\u7c7b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.before;\n\npublic interface IFXNewsListener {\n    String[] getAvailableNewsIds();\n\n    FXNewsBean getNewsByPK(String newsId);\n\n    void postProcessIfNecessary(String newsId);\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.beanf;\n\nimport org.springframework.mylearntest.before.FXNewsBean;\nimport org.springframework.mylearntest.before.IFXNewsListener;\n\npublic class DowJonesNewsListener implements IFXNewsListener {\n    @Override\n    public String[] getAvailableNewsIds() {\n        return new String[0];\n    }\n\n    @Override\n    public FXNewsBean getNewsByPK(String newsId) {\n        return null;\n    }\n\n    @Override\n    public void postProcessIfNecessary(String newsId) {\n\n    }\n}\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u8bbe\u8ba1IFXNewsPersister\u63a5\u53e3\u62bd\u8c61\u4e0d\u540c\u6570\u636e\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5e76\u5b9e\u73b0\u76f8\u5e94\u7684\u5b9e\u73b0\u7c7b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.before;\n\npublic interface IFXNewsPersister {\n    void persistNews(FXNewsBean newsBean);\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.beanf;\n\nimport org.springframework.mylearntest.before.FXNewsBean;\nimport org.springframework.mylearntest.before.IFXNewsPersister;\n\npublic class DowJonesNewsPersister implements IFXNewsPersister {\n    @Override\n    public void persistNews(FXNewsBean newsBean) {\n\n    }\n}\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"\u8bbe\u8ba1\u65b0\u95fb\u63d0\u4f9b\u7c7b\u4f9d\u8d56\u4e8e\u65b0\u95fb\u76d1\u542c\u548c\u6301\u4e45\u5316\u7c7b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.before;\n\nimport org.apache.commons.lang3.ArrayUtils;\n\n\npublic class FXNewsProvider {\n    private IFXNewsListener newsListener;\n    private IFXNewsPersister newPersistener;\n    public FXNewsProvider(IFXNewsListener newsListner,IFXNewsPersister newsPersister) {\n        this.newsListener = newsListner;\n        this.newPersistener = newsPersister;\n    }\n\n    public IFXNewsListener getNewsListener() {\n        return newsListener;\n    }\n\n    public void setNewsListener(IFXNewsListener newsListener) {\n        this.newsListener = newsListener;\n    }\n\n    public IFXNewsPersister getNewPersistener() {\n        return newPersistener;\n    }\n\n    public void setNewPersistener(IFXNewsPersister newPersistener) {\n        this.newPersistener = newPersistener;\n    }\n\n    public FXNewsProvider() {\n    }\n\n    public void getAndPersistNews() {\n        String[] newsIds = newsListener.getAvailableNewsIds();\n        if (ArrayUtils.isEmpty(newsIds)) {\n            return;\n        }\n        for (String newsId : newsIds) {\n            FXNewsBean newsBean = newsListener.getNewsByPK(newsId);\n            newPersistener.persistNews(newsBean);\n            newsListener.postProcessIfNecessary(newsId);\n        }\n    }\n}\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"\u8bbe\u7f6e\u65b0\u95fb\u7c7b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.before;\n\npublic class FXNewsBean {\n}\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/KenXQ6NIYd45irD.png",alt:null})),(0,a.kt)("h3",{id:"\u5916\u90e8\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f"},"\u5916\u90e8\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f"),(0,a.kt)("p",null,"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u5916\u90e8\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\uff0c\u7ed9\u51fa\u76f8\u5e94\u7684BeanDefinitionReader\u5b9e\u73b0\u7c7b\uff0c\u7531BeanDefinitionReader\u7684\u76f8\u5e94\u5b9e\u73b0\u7c7b\u8d1f\u8d23\u5c06\u76f8\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u8bfb\u53d6\u5e76\u6620\u5c04\u5230BeanDefinition\uff0c\u7136\u540e\u5c06\u6620\u5c04\u540e\u7684BeanDefinition\u6ce8\u518c\u5230\u4e00\u4e2aBeanDefinitionRegistry\uff0c\u4e4b\u540e\uff0c BeanDefinitionRegistry\u5373\u5b8c\u6210Bean\u7684\u6ce8\u518c\u548c\u52a0\u8f7d\u3002\n\u5927\u90e8\u5206\u5de5\u4f5c\uff0c\u5305\u62ec\u89e3\u6790\u6587\u4ef6\u683c\u5f0f\u3001\u88c5\u914dBeanDefinition\u4e4b\u7c7b\u7684\u5de5\u4f5c\uff0c\u90fd\u662f\u7531BeanDefinitionReader\u7684\u76f8\u5e94\u5b9e\u73b0\u7c7b\u6765\u505a\u7684\uff0c BeanDefinitionRegistry\u53ea\u4e0d\u8fc7\u8d1f\u8d23\u4fdd\u7ba1\u800c\u5df2\u3002"),(0,a.kt)("h4",{id:"properties\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f"},"properties\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-properties"},"djNewsProvider.(class)=org.springframework.mylearntest.ioc.directcode.FXNewsProvider\ndjNewsProvider.$0(ref)=djListener\ndjNewsProvider.$1(ref)=djPersister\n# djNewsProvider.newsListener(ref)=djListener\n# djNewsProvider.newPersistener(ref)=djPersister\ndjListener.(class)=org.springframework.mylearntest.ioc.propconfig.DjNewsListener\ndjPersister.(class)=org.springframework.mylearntest.ioc.propconfig.DjNewsPersister\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.directcode;\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.beans.factory.support.DefaultListableBeanFactory;\nimport org.springframework.beans.factory.support.PropertiesBeanDefinitionReader;\n\npublic class PropConfigTest {\n    public static void main(String[] args) {\n        // todo Caused by: java.lang.IllegalStateException: No bean class specified on bean definition\n        DefaultListableBeanFactory beanRegistry = new DefaultListableBeanFactory();\n        BeanFactory container = bindViaPropertiesFile(beanRegistry);\n        FXNewsProvider newsProvider =\n                (FXNewsProvider)container.getBean("djNewsProvider");\n        newsProvider.getAndPersistNews();\n    }\n\n    public static BeanFactory bindViaPropertiesFile(BeanDefinitionRegistry registry) {\n        PropertiesBeanDefinitionReader reader =\n                new PropertiesBeanDefinitionReader(registry);\n        reader.loadBeanDefinitions("classpath:binding-config.properties");\n        return (BeanFactory)registry;\n    }\n}\n')),(0,a.kt)("h4",{id:"xml"},"xml"),(0,a.kt)("p",null,"\u7701\u7565"),(0,a.kt)("h3",{id:"local-parent-\u548c-bean\u7684\u533a\u522b"},"local parent \u548c bean\u7684\u533a\u522b"),(0,a.kt)("p",null,"local\u3001 parent\u548cbean\u7684\u533a\u522b\u5728\u4e8e\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"local\u53ea\u80fd\u6307\u5b9a\u4e0e\u5f53\u524d\u914d\u7f6e\u7684\u5bf9\u8c61\u5728\u540c\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u5bf9\u8c61\u5b9a\u4e49\u7684\u540d\u79f0\uff08\u53ef\u4ee5\u83b7\u5f97XML\u89e3\u6790\u5668\u7684id\u7ea6\u675f\u9a8c\u8bc1\u652f\u6301\uff09\uff1b")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"parent\u5219\u53ea\u80fd\u6307\u5b9a\u4f4d\u4e8e\u5f53\u524d\u5bb9\u5668\u7684\u7236\u5bb9\u5668\u4e2d\u5b9a\u4e49\u7684\u5bf9\u8c61\u5f15\u7528\uff1b")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"bean\u5219\u57fa\u672c\u4e0a\u901a\u5403\uff0c\u6240\u4ee5\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u4f7f\u7528bean\u6765\u6307\u5b9a\u5bf9\u8c61\u5f15\u7528\u5c31\u53ef\u4ee5\u4e86")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u4f7f\u7528idref\uff0c\u5bb9\u5668\u5728\u89e3\u6790\u914d\u7f6e\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u5e2e\u4f60\u68c0\u67e5\u8fd9\u4e2abeanName\u5230\u5e95\u662f\u5426\u5b58\u5728\uff0c\u800c\u4e0d\u7528\u7b49\u5230\u8fd0\u884c\u65f6\u624d\u53d1\u73b0\u8fd9\u4e2abeanName\n\u5bf9\u5e94\u7684\u5bf9\u8c61\u5b9e\u4f8b\u4e0d\u5b58\u5728\u3002"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<property name="newsListenerBeanName">\n<idref bean="djNewsListener"/>\n</property>\n')),(0,a.kt)("h3",{id:"bytype-byname-no-autodetect"},"byType byName No Autodetect"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"no: \u5bb9\u5668\u9ed8\u8ba4\u7684\u81ea\u52a8\u7ed1\u5b9a\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u4e0d\u91c7\u7528\u4efb\u4f55\u5f62\u5f0f\u7684\u81ea\u52a8\u7ed1\u5b9a\uff0c\u5b8c\u5168\u4f9d\u8d56\u624b\u5de5\u660e\u786e\u914d\u7f6e\u5404\u4e2abean\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4ee5\u4e0b\u4ee3\u7801\u6f14\u793a\u7684\u4e24\u79cd\u914d\u7f6e\u662f\u7b49\u6548\u7684\uff1a"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n  <bean id="beanName" class="..."/>`\n  \x3c!--\u6216\u8005 --\x3e\n  <bean id="beanName" class="..." autowire="no"/>\n</beans>\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"byName: \u6309\u7167\u7c7b\u4e2d\u58f0\u660e\u7684\u5b9e\u4f8b\u53d8\u91cf\u7684\u540d\u79f0\uff0c\u4e0eXML\u914d\u7f6e\u6587\u4ef6\u4e2d\u58f0\u660e\u7684bean\u5b9a\u4e49\u7684beanName\u7684\u503c\u8fdb\u884c\u5339\u914d\uff0c\u76f8\u5339\u914d\u7684bean\u5b9a\u4e49\u5c06\u88ab\u81ea\u52a8\u7ed1\u5b9a\u5230\u5f53\u524d\u5b9e\u4f8b\u53d8\u91cf\u4e0a\u3002\u8fd9\u79cd\u65b9\u5f0f\u5bf9\u7c7b\u5b9a\u4e49\u548c\u914d\u7f6e\u7684bean\u5b9a\u4e49\u6709\u4e00\u5b9a\u7684\u9650\u5236\u3002\u5047\u8bbe\u6211\u4eec\u6709\u5982\u4e0b\u6240\u793a\u7684\u7c7b\u5b9a\u4e49\uff1a"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class Foo{\nprivate Bar emphasisAttribute;\n//...\n// \u76f8\u5e94\u7684setter\u65b9\u6cd5\u5b9a\u4e49\n}\n")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class Bar{\n  //...\n}\n")),(0,a.kt)("p",null,"\u90a3\u4e48\u5e94\u8be5\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u6240\u6f14\u793a\u7684\u81ea\u52a8\u7ed1\u5b9a\u5b9a\u4e49\uff0c\u624d\u80fd\u8fbe\u5230\u9884\u671f\u7684\u76ee\u7684\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n    <bean id="fooBean" class="...Foo" autowire="byName">\n    </bean>\n    <bean id="emphasisAttribute" class="...Bar">\n    </bean>\n</beans>\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"byType: \u5982\u679c\u6307\u5b9a\u5f53\u524dbean\u5b9a\u4e49\u7684autowire\u6a21\u5f0f\u4e3abyType\uff0c\u90a3\u4e48\uff0c\u5bb9\u5668\u4f1a\u6839\u636e\u5f53\u524dbean\u5b9a\u4e49\u7c7b\u578b\uff0c\u5206\u6790\u5176\u76f8\u5e94\u7684\u4f9d\u8d56\u5bf9\u8c61\u7c7b\u578b\uff0c\u7136\u540e\u5230\u5bb9\u5668\u6240\u7ba1\u7406\u7684\u6240\u6709bean\u5b9a\u4e49\u4e2d\u5bfb\u627e\u4e0e\u4f9d\u8d56\u5bf9\u8c61\u7c7b\u578b\u76f8\u540c\u7684bean\u5b9a\u4e49\uff0c\u7136\u540e\u5c06\u627e\u5230\u7684\u7b26\u5408\u6761\u4ef6\u7684bean\u81ea\u52a8\u7ed1\u5b9a\u5230\u5f53\u524dbean\u5b9a\u4e49\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"autodetect: \u8fd9\u79cd\u6a21\u5f0f\u662fbyType\u548cconstructor\u6a21\u5f0f\u7684\u7ed3\u5408\u4f53\uff0c\u5982\u679c\u5bf9\u8c61\u62e5\u6709\u9ed8\u8ba4\u65e0\u53c2\u6570\u7684\u6784\u9020\u65b9\u6cd5\uff0c\u5bb9\u5668\u4f1a\u4f18\u5148\u8003\u8651byType\u7684\u81ea\u52a8\u7ed1\u5b9a\u6a21\u5f0f\u3002\u5426\u5219\uff0c\u4f1a\u4f7f\u7528constructor\n\u6a21\u5f0f\u3002\u5f53\u7136\uff0c\u5982\u679c\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u6ce8\u5165\u7ed1\u5b9a\u540e\u8fd8\u6709\u5176\u4ed6\u5c5e\u6027\u6ca1\u6709\u7ed1\u5b9a\uff0c\u5bb9\u5668\u4e5f\u4f1a\u4f7f\u7528byType\u5bf9\u5269\u4f59\u7684\u5bf9\u8c61\u5c5e\u6027\u8fdb\u884c\u81ea\u52a8\u7ed1\u5b9a\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"autoWire: \u5148\u6309\u7c7bbyType\u5339\u914dbean\uff0c\u5339\u914d\u4e0d\u5230\u5219\u6309byName\u5339\u914d\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9aautoWire=\u2018byType'\u6216\u8005autoWire=\u2018byName'"))),(0,a.kt)("h3",{id:"\u81ea\u52a8\u7ed1\u5b9a\u548c\u624b\u52a8\u7ed1\u5b9a\u7684\u533a\u522b"},"\u81ea\u52a8\u7ed1\u5b9a\u548c\u624b\u52a8\u7ed1\u5b9a\u7684\u533a\u522b"),(0,a.kt)("p",null,"\u81ea\u52a8\u7ed1\u5b9a\u548c\u624b\u52a8\u660e\u786e\u7ed1\u5b9a\u5404\u6709\u5229\u5f0a\u3002\u81ea\u52a8\u7ed1\u5b9a\u7684\u4f18\u70b9\u6709\u5982\u4e0b\u4e24\u70b9\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u6709\u6548\u51cf\u5c11\u624b\u52a8\u6572\u5165\u914d\u7f6e\u4fe1\u606f\u7684\u5de5\u4f5c\u91cf\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u4e3a\u5f53\u524d\u5bf9\u8c61\u589e\u52a0\u4e86\u65b0\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4f46\u53ea\u8981\u5bb9\u5668\u4e2d\u5b58\u5728\u76f8\u5e94\u7684\u4f9d\u8d56\u5bf9\u8c61\uff0c\u5c31\u4e0d\u9700\u8981\u66f4\u6539\u4efb\u4f55\u914d\u7f6e\u4fe1\u606f\u3002")),(0,a.kt)("p",null,"\u81ea\u52a8\u7ed1\u5b9a\u7684\u7f3a\u70b9\u6709\u5982\u4e0b\u51e0\u70b9\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u7ed1\u5b9a\u4e0d\u5982\u660e\u786e\u4f9d\u8d56\u5173\u7cfb\u4e00\u76ee\u4e86\u7136\u3002\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u660e\u786e\u7684\u4f9d\u8d56\u5173\u7cfb\u5bf9\u6574\u4e2a\u7cfb\u7edf\u6709\u4e00\u4e2a\u660e\u786e\u7684\u8ba4\u8bc6\uff0c\u4f46\u4f7f\u7528\u81ea\u52a8\u7ed1\u5b9a\u7684\u8bdd\uff0c\u5c31\u53ef\u80fd\u9700\u8981\u5728\u7c7b\u5b9a\u4e49\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u4e4b\u95f4\uff0c\u751a\u81f3\u5404\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e4b\u95f4\u6765\u56de\u8f6c\u6362\u4ee5\u53d6\u5f97\u76f8\u5e94\u7684\u4fe1\u606f\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u81ea\u52a8\u7ed1\u5b9a\u65e0\u6cd5\u6ee1\u8db3\u7cfb\u7edf\u9700\u8981\uff0c\u751a\u81f3\u5bfc\u81f4\u7cfb\u7edf\u884c\u4e3a\u5f02\u5e38\u6216\u8005\u4e0d\u53ef\u9884\u77e5\u3002\u6839\u636e\u7c7b\u578b\uff08 byType\uff09\u5339\u914d\u8fdb\u884c\u7684\u81ea\u52a8\u7ed1\u5b9a\uff0c\u5982\u679c\u7cfb\u7edf\u4e2d\u589e\u52a0\u4e86\u53e6\u4e00\u4e2a\u76f8\u540c\u7c7b\u578b\u7684bean\u5b9a\u4e49\uff0c\u90a3\u4e48\u6574\u4e2a\u7cfb\u7edf\u5c31\u4f1a\u5d29\u6e83\uff1b\u6839\u636e\u540d\u5b57\uff08 byName\n\uff09\u5339\u914d\u8fdb\u884c\u7684\u81ea\u52a8\u7ed1\u5b9a\uff0c\u5982\u679c\u628a\u539f\u6765\u7cfb\u7edf\u4e2d\u76f8\u540c\u540d\u79f0\u7684bean\u5b9a\u4e49\u7c7b\u578b\u7ed9\u6362\u6389\uff0c\u5c31\u4f1a\u9020\u6210\u95ee\u9898\uff0c\u800c\u8fd9\u4e9b\u53ef\u80fd\u90fd\u662f\u5728\u4e0d\u7ecf\u610f\u95f4\u53d1\u751f\u7684\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u81ea\u52a8\u7ed1\u5b9a\uff0c\u6211\u4eec\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u67d0\u4e9b\u5de5\u5177\u7684\u826f\u597d\u652f\u6301\uff0c\u6bd4\u5982Spring IDE\u3002\u4e0eBeanFactory\u4e0d\u540c\uff0c ApplicationContext\u5728\u5bb9\u5668\u542f\u52a8\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u9a6c\u4e0a\u5bf9\u6240\u6709\u7684\u201c singleton\u7684bean\u5b9a\u4e49\u201d \u8fdb\u884c\u5b9e\u4f8b\u5316\u64cd\u4f5c")),(0,a.kt)("h3",{id:"\u61d2\u52a0\u8f7d\u914d\u7f6e\u4e86\u662f\u5426\u4e00\u5b9a\u4f1a\u751f\u6548"},"\u61d2\u52a0\u8f7d\u914d\u7f6e\u4e86\u662f\u5426\u4e00\u5b9a\u4f1a\u751f\u6548"),(0,a.kt)("p",null,"\u4ec5\u6307\u5b9alazy-init-bean\u7684lazy-init\u4e3atrue\uff0c\u5e76\u4e0d\u610f\u5473\u7740\u5bb9\u5668\u5c31\u4e00\u5b9a\u4f1a\u5ef6\u8fdf\u521d\u59cb\u5316\u8be5bean\u7684\u5b9e\u4f8b\u3002\u5982\u679c\u67d0\u4e2a\u975e\u5ef6\u8fdf\u521d\u59cb\u5316\u7684bean\u5b9a\u4e49\u4f9d\u8d56\u4e8elazy-init-bean\uff0c\u90a3\u4e48\u6beb\u65e0\u7591\u95ee\uff0c\u6309\u7167\u4f9d\u8d56\u51b3\u8ba1\u7684\u987a\u5e8f\uff0c\u5bb9\u5668\u8fd8\u662f\u4f1a\u9996\u5148\u5b9e\u4f8b\u5316lazy-init-bean\uff0c\u7136\u540e\u518d\u5b9e\u4f8b\u5316\u540e\u8005\uff0c\u5982\u4e0b\u4ee3\u7801\u6f14\u793a\u4e86\u8fd9\u79cd\u76f8\u4e92\u7275\u8fde\u5bfc\u81f4\u5ef6\u8fdf\u521d\u59cb\u5316\u5931\u8d25\u7684\u60c5\u51b5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!--\u975e\u61d2\u52a0\u8f7dbean\u4f9d\u8d56\u4e00\u4e2a\u61d2\u52a0\u8f7d\u7684bean \u7531\u4e8e\u8981\u521d\u59cb\u5316\u975e\u61d2\u52a0\u8f7d\u7684bean\u56e0\u6b64\u4f9d\u8d56\u7684\u61d2\u52a0\u8f7d\u7684bean\u5fc5\u987b\u5b9e\u4f8b\u5316--\x3e\n<beans>\n    <bean id="lazy-init-bean" class="..." lazy-init="true"/> \n    <bean id="not-lazy-init-bean" class="...">\n    <property name="propName">\n    <ref bean="lazy-init-bean"/> \n    </property>\n    </bean>\n</beans>\n')),(0,a.kt)("h3",{id:"\u5982\u4f55\u7b80\u5316xml\u914d\u7f6e\u4e2dproperty\u5c5e\u6027\u7684\u7f16\u5199"},"\u5982\u4f55\u7b80\u5316xml\u914d\u7f6e\u4e2dproperty\u5c5e\u6027\u7684\u7f16\u5199"),(0,a.kt)("p",null,"\u4f7f\u7528\u6a21\u677f\u5316\u914d\u7f6e\u5f62\u5f0f\u914d\u7f6eFXNewsProvider\u548cSpecificFXNewsProvider "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n    <bean id="newsProviderTemplate" abstract="true">\n    <property name="newPersistener">\n    <ref bean="djNewsPersister"/> \n    </property>\n    </bean>\n    <bean id="superNewsProvider" parent="newsProviderTemplate" \n    class="..FXNewsProvider">\n    <property name="newsListener">\n    </property> <ref bean="djNewsListener"/> 7\n    </bean>\n    <bean id="subNewsProvider" parent="newsProviderTemplate" \n    class="..SpecificFXNewsProvider">\n    <property name="newsListener">\n    <ref bean="specificNewsListener"/>\n    </property> \n    </bean>\n</beans>\n')),(0,a.kt)("h3",{id:"abstract\u5c5e\u6027\u7684\u4f7f\u7528"},"abstract\u5c5e\u6027\u7684\u4f7f\u7528"),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u4e0d\u60f3\u5bb9\u5668\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\u5b9e\u4f8b\u5316\u67d0\u4e9b\u5bf9\u8c61\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u5176abstract\u5c5e\u6027\u8d4b\u503ctrue\uff0c\u4ee5\u907f\u514d\u5bb9\u5668\u5c06\u5176\u5b9e\u4f8b\u5316\u3002\u5bf9\u4e8eApplicationContext\u5bb9\u5668\u5c24\u5176\u5982\u6b64\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c ApplicationContext\u4f1a\u5728\u5bb9\u5668\u542f\u52a8\u7684\u65f6\u5019\u5c31\u5bf9\u5176\u7ba1\u7406\u7684\u6240\u6709bean\u8fdb\u884c\u5b9e\u4f8b\u5316\uff0c\u53ea\u6709\u6807\u5fd7\u4e3aabstract\u7684bean\u9664\u5916\u3002"),(0,a.kt)("h3",{id:"scope"},"scope"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"scope\u7528\u6765\u58f0\u660e\u5bb9\u5668\u4e2d\u7684\u5bf9\u8c61\u6240\u5e94\u8be5\u5904\u7684\u9650\u5b9a\u573a\u666f\u6216\u8005\u8bf4\u8be5\u5bf9\u8c61\u7684\u5b58\u6d3b\u65f6\u95f4\uff0c\u5373\u5bb9\u5668\u5728\u5bf9\u8c61\u8fdb\u5165\u5176\u76f8\u5e94\u7684scope\u4e4b\u524d\uff0c\u751f\u6210\u5e76\u88c5\u914d\u8fd9\u4e9b\u5bf9\u8c61\uff0c\u5728\u8be5\u5bf9\u8c61\u4e0d\u518d\u5904\u4e8e\u8fd9\u4e9bscope\u7684\u9650\u5b9a\u4e4b\u540e\uff0c\u5bb9\u5668\u901a\u5e38\u4f1a\u9500\u6bc1\u8fd9\u4e9b\u5bf9\u8c61\u3002"),(0,a.kt)("li",{parentName:"ul"},"Spring\u5bb9\u5668\u6700\u521d\u63d0\u4f9b\u4e86\u4e24\u79cdbean\u7684scope\u7c7b\u578b\uff1a singleton\u548cprototype\uff0c\u4f46\u53d1\u5e032.0\u4e4b\u540e\uff0c\u53c8\u5f15\u5165\u4e86\u53e6\u5916\u4e09\u79cdscope\u7c7b\u578b\uff0c\u5373request\u3001 session\u548cglobal session\n\u7c7b\u578b\u3002\u4e0d\u8fc7\u8fd9\u4e09\u79cd\u7c7b\u578b\u6709\u6240\u9650\u5236\uff0c\u53ea\u80fd\u5728Web\u5e94\u7528\u4e2d\u4f7f\u7528\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709\u5728\u652f\u6301Web\u5e94\u7528\u7684ApplicationContext\u4e2d\u4f7f\u7528\u8fd9\u4e09\u4e2ascope\u624d\u662f\u5408\u7406\u7684\u3002"),(0,a.kt)("li",{parentName:"ul"},"global session\u53ea\u6709\u5e94\u7528\u5728\u57fa\u4e8eportlet\u7684Web\u5e94\u7528\u7a0b\u5e8f\u4e2d\u624d\u6709\u610f\u4e49\uff0c\u5b83\u6620\u5c04\u5230portlet\u7684global\u8303\u56f4\u7684 session\u3002\u5982\u679c\u5728\u666e\u901a\u7684\u57fa\u4e8eservlet\u7684Web\u5e94\u7528\u4e2d\u4f7f\u7528\u4e86\u8fd9\u4e2a\u7c7bscope\n\uff0c\u5bb9\u5668\u4f1a\u5c06\u5176\u4f5c\u4e3a\u666e\u901a\u7684session\u7c7b\u578b\u7684scope\u5bf9\u5f85\u3002")),(0,a.kt)("h3",{id:"\u5077\u6881\u6362\u67f1\u4e4b\u672f"},"\u5077\u6881\u6362\u67f1\u4e4b\u672f"),(0,a.kt)("h4",{id:"\u65b9\u6cd5\u6ce8\u5165"},"\u65b9\u6cd5\u6ce8\u5165"),(0,a.kt)("p",null,"Spring\u5bb9\u5668\u63d0\u51fa\u4e86\u4e00\u79cd\u53eb\u505a\u65b9\u6cd5\u6ce8\u5165\uff08 Method Injection\uff09\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u6211\u4eec\u6240\u8981\u505a\u7684\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u8ba9getNewsBean\u65b9\u6cd5\u58f0\u660e\u7b26\u5408\u89c4\u5b9a\u7684\u683c\u5f0f\uff0c\u5e76\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u77e5\u5bb9\u5668\uff0c\u5f53\u8be5\u65b9\u6cd5\u88ab\u8c03\u7528\u7684\u65f6\u5019\uff0c\u6bcf\u6b21\u8fd4\u56de\u6307\u5b9a\u7c7b\u578b\u7684\u5bf9\u8c61\u5b9e\u4f8b\u5373\u53ef\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u914d\u7f6e\u6587\u4ef6"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n  <bean id="newsBean" class="org.springframework.mylearntest.directcode.FXNewsBean" scope="prototype">\n  </bean>\n  <bean id="mockPersister" class="org.springframework.mylearntest.mthdinject.MockNewsPersister">\n      <property name="newsBean">\n          <ref bean="newsBean"/>\n      </property>\n  </bean>\n</beans>\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u65b0\u95fb\u6301\u4e45\u5316\u7c7b\u7684\u5b9a\u4e49"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},'  package org.springframework.mylearntest.mthdinject;\n  \n\nimport org.springframework.mylearntest.directcode.FXNewsBean;\nimport org.springframework.mylearntest.directcode.IFXNewsPersister;\n\npublic class MockNewsPersister implements IFXNewsPersister {\n    private FXNewsBean newsBean;\n    public void persistNews(FXNewsBean bean) {\n        persistNews();\n    }\n    public void persistNews() {\n        System.out.println("persist bean:"+getNewsBean());\n    }\n    public FXNewsBean getNewsBean() {\n        return newsBean;\n    }\n\n    public void setNewsBean(FXNewsBean newsBean) {\n        this.newsBean = newsBean;\n    }\n\n}\n')))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'\n* \u6d4b\u8bd5\u7c7b(\u4f7f\u7528\u65b9\u6cd5\u6ce8\u5165\u524d)\n```java\npackage org.springframework.mylearntest.mthdinject;\n\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test4MockNewsPersister {\n    public static void main(String[] args) {\n        BeanFactory container = new ClassPathXmlApplicationContext("mthdinject.xml");\n        MockNewsPersister persister = (MockNewsPersister)container.getBean("mockPersister");\n        persister.persistNews();\n        persister.persistNews();\n        // persist bean:org.springframework.mylearntest.directcode.FXNewsBean@5be6e01c\n        // persist bean:org.springframework.mylearntest.directcode.FXNewsBean@5be6e01c\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u914d\u7f6e\u7c7b(\u4f7f\u7528\u65b9\u6cd5\u6ce8\u5165\u540e)"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n  <bean id="newsBean" class="..domain.FXNewsBean" singleton="prototype">\n  </bean>\n  <bean id="mockPersister" class="..impl.MockNewsPersister">\n  \x3c!--\u901a\u8fc7<lookup-method>\u7684name\u5c5e\u6027\u6307\u5b9a\u9700\u8981\u6ce8\u5165\u7684\u65b9\u6cd5\u540d\uff0c bean\u5c5e\u6027\u6307\u5b9a\u9700\u8981\u6ce8\u5165\u7684\u5bf9\u8c61\uff0c\n  \u5f53getNewsBean\u65b9\u6cd5\u88ab\u8c03\u7528\u7684\u65f6\u5019\uff0c\u5bb9\u5668\u53ef\u4ee5\u6bcf\u6b21\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684FXNewsBean\u7c7b\u578b\u7684\u5b9e\u4f8b\u3002--\x3e\n  <lookup-method name="getNewsBean" bean="newsBean"/>\n  </bean>\n</beans>\n')))),(0,a.kt)("h4",{id:"\u901a\u8fc7\u5b9e\u73b0beanfactoryaware"},"\u901a\u8fc7\u5b9e\u73b0BeanFactoryAware"),(0,a.kt)("p",null,'\u53ea\u8981\u5728\u5b9e\u73b0getNewsBean()\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u80fd\u591f\u4fdd\u8bc1\u6bcf\u6b21\u8c03\u7528BeanFactory\u7684getBean("newsBean")\uff0c\u5c31\u540c\u6837\u53ef\u4ee5\u6bcf\u6b21\u90fd\u53d6\u5f97\u65b0\u7684FXNewsBean\u5bf9\u8c61\u5b9e\u4f8b\u3002'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.beanfactorywareinject;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.BeanFactoryAware;\nimport org.springframework.mylearntest.directcode.FXNewsBean;\nimport org.springframework.mylearntest.directcode.IFXNewsPersister;\n\npublic class MockNewsPersister1 implements IFXNewsPersister, BeanFactoryAware {\n    private BeanFactory beanFactory;\n\n    public void setBeanFactory(BeanFactory bf) throws BeansException {\n        this.beanFactory = bf;\n    }\n\n    public void persistNews(FXNewsBean bean) {\n        persistNews();\n    }\n\n    public void persistNews() {\n        System.out.println("persist bean:" + getNewsBean());\n    }\n\n    public FXNewsBean getNewsBean() {\n        return (FXNewsBean) beanFactory.getBean("newsBean");\n    }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="newsBean" class="org.springframework.mylearntest.directcode.FXNewsBean" scope="prototype">\n    </bean>\n    <bean id="mockPersister1" class="org.springframework.mylearntest.beanfactorywareinject.MockNewsPersister1">\n    </bean>\n\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.beanfactorywareinject;\n\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.mylearntest.mthdinject.MockNewsPersister;\n\npublic class Test4MockNewsPersister1 {\n    public static void main(String[] args) {\n        BeanFactory container = new ClassPathXmlApplicationContext("beanfactoryawareinject.xml");\n        MockNewsPersister1 persister = (MockNewsPersister1)container.getBean("mockPersister1");\n        persister.persistNews();\n        persister.persistNews();\n    }\n}\n')),(0,a.kt)("h4",{id:"\u901a\u8fc7objectfactory"},"\u901a\u8fc7ObjectFactory"),(0,a.kt)("p",null,"ObjectFactoryCreatingFactoryBean\u662f Spring \u63d0\u4f9b\u7684\u4e00\u4e2aFactoryBean\u5b9e\u73b0\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2aObjectFactory\u5b9e\u4f8b\u3002ObjectFactoryCreatingFactoryBean\u8fd4\u56de\u7684\u8fd9\u4e2aObjectFactory\u5b9e\u4f8b\u53ef\u4ee5\u4e3a\u6211\u4eec\u8fd4\u56de\u5bb9\u5668\u7ba1\u7406\u7684\u76f8\u5173\u5bf9\u8c61\u3002\u5b9e\u9645\u4e0a\uff0cObjectFactoryCreatingFactoryBean\u5b9e\u73b0BeanFactoryAware\u63a5\u53e3\uff0c\u5b83\u8fd4\u56deObjectFactory\u5b9e\u4f8b\u53ea\u662f\u7279\u5b9a\u4e8e\u4e0eSpring\u5bb9\u5668\u8fdb\u884c\u4ea4\u4e92\u7684\u4e00\u4e2a\u5b9e\u73b0\u800c\u5df2\u3002\u4f7f\u7528\u5b83\u7684\u597d\u5904\u5c31\u662f\uff0c\u9694\u79bb\u4e86\u5ba2\u6237\u7aef\u5bf9\u8c61\u5bf9BeanFactory\u7684\u76f4\u63a5\u5f15\u7528\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.objectfactoryinj;\n\nimport org.springframework.beans.factory.ObjectFactory;\nimport org.springframework.mylearntest.directcode.FXNewsBean;\nimport org.springframework.mylearntest.directcode.IFXNewsPersister;\n\n@SuppressWarnings({"rawtypes" })\npublic class MockNewsPersister2 implements IFXNewsPersister {\n    private ObjectFactory newsBeanFactory;\n    public void persistNews(FXNewsBean bean) {\n        persistNews();\n    }\n    public void persistNews() {\n        System.out.println("persist bean:"+getNewsBean());\n    }\n    public FXNewsBean getNewsBean() {\n        return (FXNewsBean) newsBeanFactory.getObject();\n    }\n    public void setNewsBeanFactory(ObjectFactory newsBeanFactory) {\n        this.newsBeanFactory = newsBeanFactory;\n    }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="newsBean" class="org.springframework.mylearntest.directcode.FXNewsBean" scope="prototype">\n    </bean>\n    <bean id="newsBeanFactory" class="org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean">\n        <property name="targetBeanName">\n            <idref bean="newsBean"/>\n        </property>\n    </bean>\n\n    <bean id="mockPersister2" class="org.springframework.mylearntest.objectfactoryinj.MockNewsPersister2">\n        <property name="newsBeanFactory">\n            <ref bean="newsBeanFactory"/>\n        </property>\n    </bean>\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.objectfactoryinj;\n\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test4MockNewsPersister2 {\n    public static void main(String[] args) {\n        BeanFactory container = new ClassPathXmlApplicationContext("objectfactoryinj.xml");\n        MockNewsPersister2 persister = (MockNewsPersister2)container.getBean("mockPersister2");\n        persister.persistNews();\n        persister.persistNews();\n    }\n}\n')),(0,a.kt)("h4",{id:"\u65b9\u6cd5\u66ff\u6362"},"\u65b9\u6cd5\u66ff\u6362"),(0,a.kt)("p",null,"\u4f7f\u7528FXNewsProviderMethodReplacer\u66ff\u6362FXNewsProvider\u4e2d\u7684getAndPersistNews()\u65b9\u6cd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.methodreplacer;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.springframework.beans.factory.support.MethodReplacer;\n\nimport java.lang.reflect.Method;\n\npublic class FXNewsProviderMethodReplacer implements MethodReplacer {\n\n    private static final transient Log logger =\n            LogFactory.getLog(FXNewsProviderMethodReplacer.class);\n\n    public Object reimplement(Object target, Method method, Object[] args)\n            throws Throwable {\n        logger.info("before executing method["+method.getName()+\n                "] on Object["+target.getClass().getName()+"].");\n        System.out.println("sorry,We will do nothing this time.");\n        logger.info("end of executing method["+method.getName()+\n                "] on Object["+target.getClass().getName()+"].");\n        return null;\n    }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="FXNewsProvider" class="org.springframework.mylearntest.propconfig.FXNewsProvider">\n        <constructor-arg index="0">\n            <ref bean="djNewsListener"/>\n        </constructor-arg>\n        <constructor-arg index="1">\n            <ref bean="djNewsPersister"/>\n        </constructor-arg>\n        <replaced-method name="getAndPersistNews" replacer="providerReplacer">\n        </replaced-method>\n    </bean>\n\n    <bean id="djNewsListener" class="org.springframework.mylearntest.propconfig.DjNewsListener"/>\n    <bean id="djNewsPersister" class="org.springframework.mylearntest.propconfig.DjNewsPersister"/>\n    <bean id="providerReplacer" class="org.springframework.mylearntest.methodreplacer.FXNewsProviderMethodReplacer">\n    </bean>\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.methodreplacer;\n\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.mylearntest.propconfig.FXNewsProvider;\n\npublic class Test4FXNewsProviderMethodReplacer {\n    public static void main(String[] args) {\n        BeanFactory container = new ClassPathXmlApplicationContext("methodreplacer.xml");\n        FXNewsProvider fxNewsProvider = (FXNewsProvider)container.getBean("FXNewsProvider");\n        fxNewsProvider.getAndPersistNews();\n    }\n}\n')),(0,a.kt)("h3",{id:"ioc\u5bb9\u5668\u80cc\u540e\u7684\u79d8\u5bc6"},"IoC\u5bb9\u5668\u80cc\u540e\u7684\u79d8\u5bc6"),(0,a.kt)("p",null,"\u5bb9\u5668\u542f\u52a8\u9636\u6bb5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5bb9\u5668\u542f\u52a8\u5f00\u59cb\uff0c\u9996\u5148\u4f1a\u901a\u8fc7\u67d0\u79cd\u9014\u5f84\u52a0\u8f7dConfiguration MetaData\u3002\u9664\u4e86\u4ee3\u7801\u65b9\u5f0f\u6bd4\u8f83\u76f4\u63a5\uff0c\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u9700\u8981\u4f9d\u8d56\u67d0\u4e9b\u5de5\u5177\u7c7b\uff08BeanDefinitionReader\n\uff09\u5bf9\u52a0\u8f7d\u7684Configuration MetaData\u8fdb\u884c\u89e3\u6790\u548c\u5206\u6790\uff0c\u5e76\u5c06\u5206\u6790\u540e\u7684\u4fe1\u606f\u7f16\u7ec4\u4e3a\u76f8\u5e94\u7684BeanDefinition\uff0c\u6700\u540e\u628a\u8fd9\u4e9b\u4fdd\u5b58\u4e86bean\u5b9a\u4e49\u5fc5\u8981\u4fe1\u606f\u7684BeanDefinition\uff0c\u6ce8\u518c\u5230\u76f8\u5e94\u7684BeanDefinitionRegistry\uff0c\u8fd9\u6837\u5bb9\u5668\u542f\u52a8\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e86\u3002")),(0,a.kt)("p",null,"Bean\u5b9e\u4f8b\u5316\u9636\u6bb5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u7b2c\u4e00\u9636\u6bb5: \u73b0\u5728\u6240\u6709\u7684bean\u5b9a\u4e49\u4fe1\u606f\u90fd\u901a\u8fc7BeanDefinition\u7684\u65b9\u5f0f\u6ce8\u518c\u5230\u4e86BeanDefinitionRegistry\u4e2d\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u7b2c\u4e8c\u9636\u6bb5: \u5f53\u67d0\u4e2a\u8bf7\u6c42\u65b9\u901a\u8fc7\u5bb9\u5668\u7684getBean\u65b9\u6cd5\u660e\u786e\u5730\u8bf7\u6c42\u67d0\u4e2a\u5bf9\u8c61\u65f6\uff0c\u6216\u8005\u56e0\u4f9d\u8d56\u5173\u7cfb\u5bb9\u5668\u9700\u8981\u9690\u5f0f\u5730\u8c03\u7528getBean\u65b9\u6cd5\u65f6\u3002\u8be5\u9636\u6bb5\uff0c\u5bb9\u5668\u4f1a\u9996\u5148\u68c0\u67e5\u6240\u8bf7\u6c42\u7684\u5bf9\u8c61\u4e4b\u524d\u662f\u5426\u5df2\u7ecf\u521d\u59cb\u5316\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u4f1a\u6839\u636e\u6ce8\u518c\u7684BeanDefinition\n\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u5b9e\u4f8b\u5316\u88ab\u8bf7\u6c42\u5bf9\u8c61\uff0c\u5e76\u4e3a\u5176\u6ce8\u5165\u4f9d\u8d56\u3002\u5982\u679c\u8be5\u5bf9\u8c61\u5b9e\u73b0\u4e86\u67d0\u4e9b\u56de\u8c03\u63a5\u53e3\uff0c\u4e5f\u4f1a\u6839\u636e\u56de\u8c03\u63a5\u53e3\u7684\u8981\u6c42\u6765\u88c5\u914d\u5b83\u3002\u5f53\u8be5\u5bf9\u8c61\u88c5\u914d\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5bb9\u5668\u4f1a\u7acb\u5373\u5c06\u5176\u8fd4\u56de\u8bf7\u6c42\u65b9\u4f7f\u7528\u3002"))),(0,a.kt)("h3",{id:"beanfactorypostprocessor"},"BeanFactoryPostProcessor"),(0,a.kt)("p",null,"Spring\u63d0\u4f9b\u4e86\u4e00\u79cd\u53eb\u505aBeanFactoryPostProcessor\u7684\u5bb9\u5668\u6269\u5c55\u673a\u5236\u3002\u8be5\u673a\u5236\u5141\u8bb8\u6211\u4eec\u5728\u5bb9\u5668\u5b9e\u4f8b\u5316\u76f8\u5e94\u5bf9\u8c61\u4e4b\u524d\uff0c\u5bf9\u6ce8\u518c\u5230\u5bb9\u5668\u7684BeanDefinition\u6240\u4fdd\u5b58\u7684\u4fe1\u606f\u505a\u76f8\u5e94\u7684\u4fee\u6539\u3002\u8fd9\u5c31\u76f8\u5f53\u4e8e\u5728\u5bb9\u5668\u5b9e\u73b0\u7684\u7b2c\u4e00\u9636\u6bb5\u6700\u540e\u52a0\u5165\u4e00\u9053\u5de5\u5e8f\uff0c\u8ba9\u6211\u4eec\u5bf9\u6700\u7ec8BeanDefinition\u505a\u4e00\u4e9b\u989d\u5916\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4fee\u6539\u5176\u4e2dbean\u5b9a\u4e49\u7684\u67d0\u4e9b\u5c5e\u6027\uff0c\u4e3abean\u5b9a\u4e49\u589e\u52a0\u5176\u4ed6\u4fe1\u606f\u7b49\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u8981\u81ea\u5b9a\u4e49\u5b9e\u73b0BeanFactoryPostProcessor\uff0c\u901a\u5e38\u6211\u4eec\u9700\u8981\u5b9e\u73b0org.springframework.beans.factory.config.BeanFactoryPostProcessor\u63a5\u53e3\u3002\u8fd9\u4e2a\u65f6\u5019\u53ef\u80fd\u9700\u8981\u5b9e\u73b0\u7c7b\u540c\u65f6\u5b9e\u73b0Spring\u7684org.springframework.core.Ordered\u63a5\u53e3\uff0c\u4ee5\u4fdd\u8bc1\u5404\u4e2aBeanFactoryPostProcessor\u53ef\u4ee5\u6309\u7167\u9884\u5148\u8bbe\u5b9a\u7684\u987a\u5e8f\u6267\u884c\uff08\u5982\u679c\u987a\u5e8f\u7d27\u8981\u7684\u8bdd\uff09\u3002"),(0,a.kt)("p",null,"\u5176\u4e2d,org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\u548corg.springframework.beans.factory.config.Property OverrideConfigurer\u662f\u4e24\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684BeanFactoryPostProcessor\u3002"),(0,a.kt)("h4",{id:"propertyplaceholderconfigurer"},"PropertyPlaceholderConfigurer"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n    \x3c!--    \u4f7f\u7528\u7684BeanFactoryPostProcessor--\x3e\n    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">\n        <property name="locations">\n            <list>\n                <value>conf/jdbc.properties</value>\n                <value>conf/mail.properties</value>\n            </list>\n        </property>\n    </bean>\n\n    \x3c!--    \u4f7f\u7528\u5360\u4f4d\u7b26\u7684\u6570\u636e\u6e90\u914d\u7f6e--\x3e\n    <bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">\n        <property name="url">\n            <value>${jdbc.url}</value>\n        </property>\n        <property name="driverClassName">\n            <value>${jdbc.driver}</value>\n        </property>\n        <property name="username">\n            <value>${jdbc.username}</value>\n        </property>\n        <property name="password">\n            <value>${jdbc.password}</value>\n        </property>\n        <property name="testOnBorrow">\n            <value>true</value>\n        </property>\n        <property name="testOnReturn">\n            <value>true</value>\n        </property>\n        <property name="testWhileIdle">\n            <value>true</value>\n        </property>\n        <property name="minEvictableIdleTimeMillis">\n            <value>180000</value>\n        </property>\n        <property name="timeBetweenEvictionRunsMillis">\n            <value>360000</value>\n        </property>\n        <property name="validationQuery">\n            <value>SELECT 1</value>\n        </property>\n        <property name="maxOpenPreparedStatements">\n            <value>100</value>\n        </property>\n    </bean>\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-properties"},"jdbc.url=jdbc:mysql://server/MAIN?useUnicode=true&characterEncoding=ms932&failOverReadOnly=false&roundRobinLoadBalance=true\njdbc.driver=com.mysql.jdbc.Driver\njdbc.username=root\njdbc.password=root\n")),(0,a.kt)("p",null,"\u5982\u679corg.apache.commons.dbcp2.BasicDataSource\u62a5\u9519\n",(0,a.kt)("inlineCode",{parentName:"p"},"compile(group: 'org.apache.commons', name: 'commons-dbcp2', version: '2.1.1')")),(0,a.kt)("p",null,"\u5f53BeanFactory\u5728\u7b2c\u4e00\u9636\u6bb5\u52a0\u8f7d\u5b8c\u6210\u6240\u6709\u914d\u7f6e\u4fe1\u606f\u65f6\uff0c BeanFactory\u4e2d\u4fdd\u5b58\u7684\u5bf9\u8c61\u7684\u5c5e\u6027\u4fe1\u606f\u8fd8\u53ea\u662f\u4ee5\u5360\u4f4d\u7b26\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u5982${jdbc.url}\u3001 ${jdbc.driver}\u3002\u5f53PropertyPlaceholderConfigurer\u4f5c\u4e3aBeanFactoryPostProcessor\u88ab\u5e94\u7528\u65f6\uff0c\u5b83\u4f1a\u4f7f\u7528properties\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u4fe1\u606f\u6765\u66ff\u6362\u76f8\u5e94BeanDefinition\u4e2d\u5360\u4f4d\u7b26\u6240\u8868\u793a\u7684\u5c5e\u6027\u503c\u3002\u8fd9\u6837\uff0c\u5f53\u8fdb\u5165\u5bb9\u5668\u5b9e\u73b0\u7684\u7b2c\u4e8c\u9636\u6bb5\u5b9e\u4f8b\u5316bean\u65f6\uff0c bean\u5b9a\u4e49\u4e2d\u7684\u5c5e\u6027\u503c\u5c31\u662f\u6700\u7ec8\u66ff\u6362\u5b8c\u6210\u7684\u4e86\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"PropertyPlaceholderConfigurer\u4e0d\u5355\u4f1a\u4ece\u5176\u914d\u7f6e\u7684properties\u6587\u4ef6\u4e2d\u52a0\u8f7d\u914d\u7f6e\u9879\uff0c\u540c\u65f6\u8fd8\u4f1a\u68c0\u67e5Java\u7684System\u7c7b\u4e2d\u7684Properties\uff0c\u53ef\u4ee5\u901a\u8fc7setSystemPropertiesMode\n()\u6216\u8005setSystemPropertiesModeName()\u6765\u63a7\u5236\u662f\u5426\u52a0\u8f7d\u6216\u8005\u8986\u76d6System\u76f8\u5e94Properties\u7684\u884c\u4e3a\u3002"),(0,a.kt)("li",{parentName:"ul"},"PropertyPlaceholderConfigurer\u63d0\u4f9b\u4e86SYSTEM",(0,a.kt)("em",{parentName:"li"},"PROPERTIES_MODE_FALLBACK\u3001 SYSTEM_PROPERTIES_MODE_NEVER\n\u548cSYSTEM_PROPERTIES_MODE_OVERRIDE\u4e09\u79cd\u6a21\u5f0f\u3002\u9ed8\u8ba4\u91c7\u7528\u7684\u662fSYSTEM_PROPERTIES")," MODE_FALLBACK\uff0c\u679cproperties\u6587\u4ef6\u4e2d\u627e\u4e0d\u5230\u76f8\u5e94\u914d\u7f6e\u9879\uff0c\u5219\u5230System\u7684Properties\u4e2d\u67e5\u627e\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e0d\u68c0\u67e5System\u7684Properties\u6216\u8005\u8986\u76d6\u5b83\u3002")),(0,a.kt)("h4",{id:"propertyoverrideconfigurer"},"PropertyOverrideConfigurer"),(0,a.kt)("p",null,"\u914d\u7f6e\u5728properties\u6587\u4ef6\u4e2d\u7684\u4fe1\u606f\u901a\u5e38\u90fd\u4ee5\n\u660e\u6587\u8868\u793a\uff0cPropertyOverrideConfigurer\u7684\u7236\u7c7bPropertyResourceConfigurer\u63d0\u4f9b\u4e86\u4e00\u4e2aprotected\u7c7b\u578b\u7684\u65b9\u6cd5convertPropertyValue\uff0c\u5141\u8bb8\u5b50\u7c7b\u8986\u76d6\u8fd9\u4e2a\u65b9\u6cd5\u5bf9\u76f8\u5e94\u7684\u7f6e\u9879\u8fdb\u884c\u8f6c\u6362\uff0c\u5982\u5bf9\u52a0\u5bc6\u540e\u7684\u5b57\u7b26\u4e32\u89e3\u5bc6\u4e4b\u540e\u518d\u8986\u76d6\u5230\u76f8\u5e94\u7684bean\u5b9a\u4e49\u4e2d\u3002\u5f53\u7136\uff0c\u65e2\u7136PropertyPlaceholderConfigurer\u4e5f\u540c\u6837\u7ee7\u627f\u4e86PropertyResourceConfigurer\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u9488\u5bf9PropertyPlaceholderConfigurer\u5e94\u7528\u7c7b\u4f3c\u7684\u529f\u80fd\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<bean class="org.springframework.beans.factory.config.PropertyOverrideConfigurer">\n<property name="location" value="pool-adjustment.properties"/>\n</bean>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-properties"},"dataSource.minEvictableIdleTimeMillis=1000\ndataSource.maxOpenPreparedStatements=50\n")),(0,a.kt)("h4",{id:"customeditorconfigurer"},"CustomEditorConfigurer"),(0,a.kt)("p",null,"CustomEditorConfigurer\u662f\u53e6\u4e00\u79cd\u7c7b\u578b\u7684BeanFactoryPostProcessor\u5b9e\u73b0\uff0c\u5b83\u53ea\u662f\u8f85\u52a9\u6027\u5730\u5c06\u540e\u671f\u4f1a\u7528\u5230\u7684\u4fe1\u606f\u6ce8\u518c\u5230\u5bb9\u5668\uff0c\u5bf9BeanDefinition\u6ca1\u6709\u505a\u4efb\u4f55\u53d8\u52a8\u3002"),(0,a.kt)("p",null,"Spring\u63d0\u4f9b\u7684\u90e8\u5206PropertyEditor: StringArrayPropertyEditor\u3002\u8be5PropertyEditor\u4f1a\u5c06\u7b26\u5408CSV\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u6210String\n[]\u6570\u7ec4\u7684\u5f62\u5f0f\uff0c\u9ed8\u8ba4\u662f\u4ee5\u9017\u53f7\uff08\uff0c\uff09\u5206\u9694\u7684\u5b57\u7b26\u4e32\uff0c\u4f46\u53ef\u4ee5\u6307\u5b9a\u81ea\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\u5206\u9694\u7b26\u3002ByteArrayPropertyEditor\u3001CharArrayPropertyEditor\u7b49\u90fd\u5c5e\u4e8e\u7c7b\u4f3c\u529f\u80fd\u7684PropertyEditor\uff0c\u53c2\u7167Javadoc\u53ef\u4ee5\u53d6\u5f97\u76f8\u5e94\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"ClassEditor\u3002\u6839\u636eString\u7c7b\u578b\u7684class\u540d\u79f0\uff0c\u76f4\u63a5\u5c06\u5176\u8f6c\u6362\u6210\u76f8\u5e94\u7684Class\u5bf9\u8c61\uff0c\u76f8\u5f53\u4e8e\u901a\u8fc7Class.forName(String)\u5b8c\u6210\u7684\u529f\u6548\u3002\u53ef\u4ee5\u901a\u8fc7String\n[]\u6570\u7ec4\u7684\u5f62\u5f0f\u4f20\u5165\u9700\u8f6c\u6362\u7684\u503c\uff0c\u4ee5\u8fbe\u5230\u4e0e\u63d0\u4f9bClassArrayEditor\u540c\u6837\u7684\u76ee\u7684\u3002"),(0,a.kt)("li",{parentName:"ul"},"FileEditor\u3002 Spring\u63d0\u4f9b\u7684\u5bf9\u5e94java.io.File\u7c7b\u578b\u7684PropertyEditor\u3002\u540c\u5c5e\u4e8e\u5bf9\u8d44\u6e90\u8fdb\u884c\u5b9a\u4f4d\u7684PropertyEditor\u8fd8\u6709InputStreamEditor\u3001 URLEditor\u7b49\u3002"),(0,a.kt)("li",{parentName:"ul"},"LocaleEditor\u3002\u9488\u5bf9java.util.Locale\u7c7b\u578b\u7684PropertyEditor\uff0c\u683c\u5f0f\u53ef\u4ee5\u53c2\u7167LocaleEditor\u548cLocale\u7684Javadoc\u8bf4\u660e\u3002"),(0,a.kt)("li",{parentName:"ul"},"PatternEditor\u3002\u9488\u5bf9Java SE 1.4\u4e4b\u540e\u624d\u5f15\u5165\u7684java.util.regex.Pattern\u7684PropertyEditor\uff0c\u683c\u5f0f\u53ef\u4ee5\u53c2\u7167java.util.regex.Pattern\u7c7b\u7684Javadoc\u3002")),(0,a.kt)("p",null,"\u4ee5\u4e0a\u8fd9\u4e9bPropertyEditor\uff0c\u5bb9\u5668\u901a\u5e38\u4f1a\u9ed8\u8ba4\u52a0\u8f7d\u4f7f\u7528\uff0c\u6240\u4ee5\uff0c\u5373\u4f7f\u6211\u4eec\u4e0d\u544a\u8bc9\u5bb9\u5668\u5e94\u8be5\u5982\u4f55\u5bf9\u8fd9\u4e9b\u7c7b\u578b\u8fdb\u884c\u8f6c\u6362\uff0c\u5bb9\u5668\u540c\u6837\u53ef\u4ee5\u6b63\u786e\u5730\u5b8c\u6210\u5de5\u4f5c\u3002\u4f46\u5f53\u6211\u4eec\u9700\u8981\u6307\u5b9a\u7684\u7c7b\u578b\u6ca1\u6709\u5305\u542b\u5728\u4ee5\u4e0a\u6240\u63d0\u5230PropertyEditor\u4e4b\u5217\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u7ed9\u51fa\u9488\u5bf9\u8fd9\u79cd\u7c7b\u578b\u7684PropertyEditor\u5b9e\u73b0\uff0c\u5e76\u901a\u8fc7CustomEditorConfigurer\u544a\u77e5\u5bb9\u5668\uff0c\u4ee5\u4fbf\u5bb9\u5668\u5728\u9002\u5f53\u7684\u65f6\u673a\u4f7f\u7528\u5230\u9002\u5f53\u7684PropertyEditor\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49PropertyEditor")),(0,a.kt)("p",null,"\u5bf9\u4e8eDate\u7c7b\u578b\uff0c\u4e0d\u540c\u7684Locale\u3001\u4e0d\u540c\u7684\u7cfb\u7edf\u5728\u8868\u73b0\u5f62\u5f0f\u4e0a\u5b58\u5728\u4e0d\u540c\u7684\u9700\u6c42\u3002\u5982\u7cfb\u7edf\u8fd9\u4e2a\u90e8\u5206\u9700\u8981\u4ee5yyyy-MM-dd\u7684\u5f62\u5f0f\u8868\u73b0\u65e5\u671f\uff0c\u7cfb\u7edf\u90a3\u4e2a\u90e8\u5206\u53ef\u80fd\u53c8\u9700\u8981\u4ee5yyyyMMdd\u7684\u5f62\u5f0f\u5bf9\u65e5\u671f\u8fdb\u884c\u8f6c\u6362\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.beanfactorypostprocessor;\n\nimport java.beans.PropertyEditorSupport;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\npublic class DatePropertyEditor extends PropertyEditorSupport {\n    private String datePattern;\n\n    @Override\n    public void setAsText(String text) throws IllegalArgumentException {\n        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(getDatePattern());\n        LocalDate dateValue = LocalDate.parse(text,dateTimeFormatter);\n        setValue(dateValue);\n    }\n\n    @Override\n    public String getAsText() {\n        return super.getAsText();\n    }\n\n    public String getDatePattern() {\n        return datePattern;\n    }\n\n    public void setDatePattern(String datePattern) {\n        this.datePattern = datePattern;\n    }\n}\n")),(0,a.kt)("p",null,"\u5982\u679c\u4ec5\u4ec5\u662f\u652f\u6301\u5355\u5411\u7684\u4eceString\u5230\u76f8\u5e94\u5bf9\u8c61\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u53ea\u8981\u8986\u5199\u65b9\u6cd5setAsText(String)\u5373\u53ef\u3002\u5982\u679c\u60f3\u652f\u6301\u53cc\u5411\u8f6c\u6362\uff0c\u9700\u8981\u540c\u65f6\u8003\u8651getAsText()\u65b9\u6cd5\u7684\u8986\u5199\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.beanfactorypostprocessor;\n\nimport org.springframework.beans.PropertyEditorRegistrar;\nimport org.springframework.beans.PropertyEditorRegistry;\n\nimport java.beans.PropertyEditor;\n\npublic class DatePropertyEditorRegistrar implements PropertyEditorRegistrar {\n    private PropertyEditor propertyEditor;\n\n    public PropertyEditor getPropertyEditor() {\n        return propertyEditor;\n    }\n\n    public void setPropertyEditor(PropertyEditor propertyEditor) {\n        this.propertyEditor = propertyEditor;\n    }\n\n    @Override\n    public void registerCustomEditors(PropertyEditorRegistry registry) {\n        registry.registerCustomEditor(java.util.Date.class,getPropertyEditor());\n    }\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"\n       xmlns:aop="http://www.springframework.org/schema/aop">\n\n    <bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">\n        <property name="propertyEditorRegistrars">\n            <list>\n                <ref bean="datePropertyEditorRegistrar"/>\n            </list>\n        </property>\n    </bean>\n\n    <bean id="datePropertyEditorRegistrar" class="org.springframework.mylearntest.beanfactorypostprocessor.DatePropertyEditorRegistrar">\n        <property name="propertyEditor">\n            <ref bean="datePropertyEditor"/>\n        </property>\n    </bean>\n\n    <bean id="datePropertyEditor" class="org.springframework.mylearntest.beanfactorypostprocessor.DatePropertyEditor">\n        <property name="datePattern">\n            <value>yyyy/MM/dd</value>\n        </property>\n    </bean>\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.beanfactorypostprocessor;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test4DateProp {\n    public static void main(String[] args) {\n        // applicationContext\n        ApplicationContext context = new ClassPathXmlApplicationContext("datepropertyeditor2.xml");\n        DatePropertyEditor datePropertyEditor = (DatePropertyEditor) context.getBean("datePropertyEditor");\n        datePropertyEditor.setAsText("2020/06/21");\n    }\n}\n')),(0,a.kt)("h4",{id:"bean\u7684\u6784\u9020"},"bean\u7684\u6784\u9020"),(0,a.kt)("p",null,"\u5bb9\u5668\u542f\u52a8\u4e4b\u540e\uff0c\u5e76\u4e0d\u4f1a\u9a6c\u4e0a\u5c31\u5b9e\u4f8b\u5316\u76f8\u5e94\u7684bean\u5b9a\u4e49\u3002\u6211\u4eec\u77e5\u9053\uff0c\u5bb9\u5668\u73b0\u5728\u4ec5\u4ec5\u62e5\u6709\u6240\u6709\u5bf9\u8c61\u7684BeanDefinition\u6765\u4fdd\u5b58\u5b9e\u4f8b\u5316\u9636\u6bb5\u5c06\u8981\u7528\u7684\u5fc5\u8981\u4fe1\u606f\u3002\u53ea\u6709\u5f53\u8bf7\u6c42\u65b9\u901a\u8fc7BeanFactory\u7684getBean()\u65b9\u6cd5\u6765\u8bf7\u6c42\u67d0\u4e2a\u5bf9\u8c61\u5b9e\u4f8b\u7684\u65f6\u5019\uff0c\u624d\u6709\u53ef\u80fd\u89e6\u53d1Bean\u5b9e\u4f8b\u5316\u9636\u6bb5\u7684\u6d3b\u52a8\u3002 BeanFactory\u7684getBe\u6cd5\u53ef\u4ee5\u88ab\u5ba2\u6237\u7aef\u5bf9\u8c61\u663e\u5f0f\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728\u5bb9\u5668\u5185\u90e8\u9690\u5f0f\u5730\u88ab\u8c03\u7528\u3002\u9690\u5f0f\u8c03\u7528\u6709\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5bf9\u4e8eBeanFactory\u6765\u8bf4\uff0c\u5bf9\u8c61\u5b9e\u4f8b\u5316\u9ed8\u8ba4\u91c7\u7528\u5ef6\u8fdf\u521d\u59cb\u5316\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5f53\u5bf9\u8c61A\u88ab\u8bf7\u6c42\u800c\u9700\u8981\u7b2c\u4e00\u6b21\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\uff0c\u5982\u679c\u5b83\u6240\u4f9d\u8d56\u7684\u5bf9\u8c61B\u4e4b\u524d\u540c\u6837\u6ca1\u6709\u88ab\u5b9e\u4f8b\u5316\uff0c\u90a3\u4e48\u5bb9\u5668\u4f1a\u5148\u5b9e\u4f8b\u5316\u5bf9\u8c61A\u6240\u4f9d\u8d56\u7684\u5bf9\u8c61\u3002\u8fd9\u65f6\u5bb9\u5668\u5185\u90e8\u5c31\u4f1a\u9996\u5148\u5b9e\u4f8b\u5316\u5bf9\u8c61B\n\uff0c\u4ee5\u53ca\u5bf9\u8c61A\u4f9d\u8d56\u7684\u5176\u4ed6\u8fd8\u6ca1\u6709\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u3002\u8fd9\u79cd\u60c5\u51b5\u662f\u5bb9\u5668\u5185\u90e8\u8c03\u7528getBean()\uff0c\u5bf9\u4e8e\u672c\u6b21\u8bf7\u6c42\u7684\u8bf7\u6c42\u65b9\u662f\u9690\u5f0f\u7684\u3002"),(0,a.kt)("li",{parentName:"ul"},"ApplicationContext\u542f\u52a8\u4e4b\u540e\u4f1a\u5b9e\u4f8b\u5316\u6240\u6709\u7684bean\u5b9a\u4e49\uff0c\u8fd9\u4e2a\u7279\u6027\u5728\u672c\u4e66\u4e2d\u5df2\u7ecf\u591a\u6b21\u63d0\u5230\u3002\u4f46ApplicationContext\u5728\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\u4f9d\u7136\u9075\u5faaSpring\n\u5bb9\u5668\u5b9e\u73b0\u6d41\u7a0b\u7684\u4e24\u4e2a\u9636\u6bb5\uff0c\u53ea\u4e0d\u8fc7\u5b83\u4f1a\u5728\u542f\u52a8\u9636\u6bb5\u7684\u6d3b\u52a8\u5b8c\u6210\u4e4b\u540e\uff0c\u7d27\u63a5\u7740\u8c03\u7528\u6ce8\u518c\u5230\u8be5\u5bb9\u5668\u7684\u6240\u6709bean\u5b9a\u4e49\u7684\u5b9e\u4f8b\u5316\u65b9\u6cd5getBean()\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5f53\u4f60\u5f97\u5230ApplicationContext\u7c7b\u578b\u7684\u5bb9\u5668\u5f15\u7528\u65f6\uff0c\u5bb9\u5668\u5185\u6240\u6709\u5bf9\u8c61\u5df2\u7ecf\u88ab\u5168\u90e8\u5b9e\u4f8b\u5316\u5b8c\u6210\u3002\u4e0d\u4fe1\u4f60\u67e5\u4e00\u4e0b\u7c7borg.AbstractApplicationContext\u7684refresh()\u65b9\u6cd5\u3002")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/wGtkiR4ULcpFfQj.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Bean\u7684\u5b9e\u4f8b\u5316\u4e0eBeanWrapper")),(0,a.kt)("p",null,"\u7b2c\u4e00\u6b65\uff1a\u83b7\u53d6BeanWrapper"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5bb9\u5668\u5728\u5185\u90e8\u5b9e\u73b0\u7684\u65f6\u5019\uff0c\u91c7\u7528\u201c\u7b56\u7565\u6a21\u5f0f\uff08Strategy Pattern\uff09\u201d\u6765\u51b3\u5b9a\u91c7\u7528\u4f55\u79cd\u65b9\u5f0f\u521d\u59cb\u5316bean\u5b9e\u4f8b\u3002\u901a\u5e38\uff0c\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u6216\u8005CGLIB\u52a8\u6001\u5b57\u8282\u7801\u751f\u6210\u6765\u521d\u59cb\u5316\u76f8\u5e94\u7684bean\u5b9e\u4f8b\u6216\u8005\u52a8\u6001\u751f\u6210\u5176\u5b50\u7c7b\u3002org\n.springframework.beans.factory.support.InstantiationStrategy\u5b9a\u4e49\u662f\u5b9e\u4f8b\u5316\u7b56\u7565\u7684\u62bd\u8c61\u63a5\u53e3\uff0c\u5176\u76f4\u63a5\u5b50\u7c7bSimpleInstantiationStrategy\u5b9e\u73b0\u4e86\u7b80\u5355\u7684\u5bf9\u8c61\u5b9e\u4f8b\u5316\u529f\u80fd\uff0c\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u6765\u5b9e\u4f8b\u5316\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u4f46\u4e0d\u652f\u6301\u65b9\u6cd5\u6ce8\u5165\u65b9\u5f0f\u7684\u5bf9\u8c61\u5b9e\u4f8b\u5316\u3002 CglibSubclassingInstantiationStrategy\u7ee7\u627f\u4e86SimpleInstantiationStrategy\u7684\u4ee5\u53cd\u5c04\u65b9\u5f0f\u5b9e\u4f8b\u5316\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u5e76\u4e14\u901a\u8fc7CGLIB\u7684\u52a8\u6001\u5b57\u8282\u7801\u751f\u6210\u529f\u80fd\uff0c\u8be5\u7b56\u7565\u5b9e\u73b0\u7c7b\u53ef\u4ee5\u52a8\u6001\u751f\u6210\u67d0\u4e2a\u7c7b\u7684\u5b50\u7c7b\uff0c\u8fdb\u800c\u6ee1\u8db3\u4e86\u65b9\u6cd5\u6ce8\u5165\u6240\u9700\u7684\u5bf9\u8c61\u5b9e\u4f8b\u5316\u6c42\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u5185\u90e8\u91c7\u7528\u7684\u662fCglibSubclassingInstantiationStrategy\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5bb9\u5668\u53ea\u8981\u6839\u636e\u76f8\u5e94bean\u5b9a\u4e49\u7684BeanDefintion\u53d6\u5f97\u5b9e\u4f8b\u5316\u4fe1\u606f\uff0c\u7ed3\u5408CglibSubclassingInstantiationStrategy\u4ee5\u53ca\u4e0d\u540c\u7684bean\n\u5b9a\u4e49\u7c7b\u578b\uff0c\u5c31\u53ef\u4ee5\u8fd4\u56de\u5b9e\u4f8b\u5316\u5b8c\u6210\u7684\u5bf9\u8c61\u5b9e\u4f8b\u3002\u4f46\u662f\uff0c\u8fd4\u56de\u65b9\u5f0f\u4e0a\u6709\u4e9b\u201c\u70b9\u7f00\u201d\u3002\u4e0d\u662f\u76f4\u63a5\u8fd4\u56de\u6784\u9020\u5b8c\u6210\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u800c\u662f\u4ee5BeanWrapper\u5bf9\u6784\u9020\u5b8c\u6210\u7684\u5bf9\u8c61\u5b9e\u4f8b\u8fdb\u884c\u5305\u88f9\uff0c\u8fd4\u56de\u76f8\u5e94\u7684BeanWrapper\u5b9e\u4f8b\u3002")),(0,a.kt)("p",null,"\u7b2c\u4e8c\u90e8\uff1a\u8bbe\u7f6eBean\u7684\u76f8\u5e94\u5c5e\u6027"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"BeanWrapper\u63a5\u53e3\u901a\u5e38\u5728Spring\u6846\u67b6\u5185\u90e8\u4f7f\u7528\uff0c\u5b83\u6709\u4e00\u4e2a\u5b9e\u73b0\u7c7borg.springframework.beans.BeanWrapperImpl\u3002\u5176\u4f5c\u7528\u662f\u5bf9\u67d0\u4e2abean\u8fdb\u884c\u201c\u5305\u88f9\u201d\uff0c\u7136\u540e\u5bf9\u8fd9\u4e2a\u201c\u5305\u88f9\u201d\u7684bean\n\u8fdb\u884c\u64cd\u4f5c\uff0c\u6bd4\u5982\u8bbe\u7f6e\u6216\u8005\u83b7\u53d6bean\u7684\u76f8\u5e94\u5c5e\u6027\u503c\u3002\u800c\u5728\u7b2c\u4e00\u6b65\u7ed3\u675f\u540e\u8fd4\u56deBeanWrapper\u5b9e\u4f8b\u800c\u4e0d\u662f\u539f\u5148\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u5c31\u662f\u4e3a\u4e86\u7b2c\u4e8c\u6b65\u201c\u8bbe\u7f6e\u5bf9\u8c61\u5c5e\u6027\u201d\u3002"),(0,a.kt)("li",{parentName:"ul"},"BeanWrapper\u5b9a\u4e49\u7ee7\u627f\u4e86org.springframework.beans.PropertyAccessor\u63a5\u53e3\uff0c\u53ef\u4ee5\u4ee5\u7edf\u4e00\u7684\u65b9\u5f0f\u5bf9\u5bf9\u8c61\u5c5e\u6027\u8fdb\u884c\u8bbf\u95ee\uff1b BeanWrapper\n\u5b9a\u4e49\u540c\u65f6\u53c8\u76f4\u63a5\u6216\u8005\u95f4\u63a5\u7ee7\u627f\u4e86PropertyEditorRegistry\u548cTypeConverter\u63a5\u53e3\u3002\u4e0d\u77e5\u4f60\u662f\u5426\u8fd8\u8bb0\u5f97CustomEditorConfigurer\uff1f\u5f53\u628a\u5404\u79cdPropertyEditor\u6ce8\u518c\u7ed9\u5bb9\u5668\u65f6\uff0c\u77e5\u9053\u540e\u9762\u8c01\u7528\u5230\u8fd9\u4e9bPropertyEditor\u5417\uff1f\u5bf9\uff0c\u5c31\u662fBeanWrapper\uff01\u5728\u7b2c\u4e00\u6b65\u6784\u9020\u5b8c\u6210\u5bf9\u8c61\u4e4b\u540e\uff0c Spring\u4f1a\u6839\u636e\u5bf9\u8c61\u5b9e\u4f8b\u6784\u9020\u4e00\u4e2aBeanWrapperImpl\u5b9e\u4f8b\uff0c\u7136\u540e\u5c06\u4e4b\u524dCustomEditorConfigurer\u6ce8\u518c\u7684PropertyEditor\u590d\u5236\u4e00\u4efd\u7ed9BeanWrapperImpl\u4f8b\uff08\u8fd9\u5c31\u662fBeanWrapper\u540c\u65f6\u53c8\u662fPropertyEditorRegistry\u7684\u539f\u56e0\uff09\u3002\u8fd9\u6837\uff0c\u5f53BeanWrapper\u8f6c\u6362\u7c7b\u578b\u3001\u8bbe\u7f6e\u5bf9\u8c61\u5c5e\u6027\u503c\u65f6\uff0c\u5c31\u4e0d\u4f1a\u65e0\u4ece\u4e0b\u624b\u4e86\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'// \u4f7f\u7528BeanWrapper\u64cd\u4f5c\u5bf9\u8c61\nObject provider = Class.forName("package.name.FXNewsProvider").newInstance(); \nObject listener = Class.forName("package.name.DowJonesNewsListener").newInstance();\nObject persister = Class.forName("package.name.DowJonesNewsPersister").newInstance();\nBeanWrapper newsProvider = new BeanWrapperImpl(provider); \nnewsProvider.setPropertyValue("newsListener", listener);\nnewsProvider.setPropertyValue("newPersistener", persister);\n\nassertTrue(newsProvider.getWrappedInstance() instanceof FXNewsProvider);\nassertSame(provider, newsProvider.getWrappedInstance());\nassertSame(listener, newsProvider.getPropertyValue("newsListener"));\nassertSame(persister, newsProvider.getPropertyValue("newPersistener"));\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'// \u4f7f\u7528Java\u53cd\u5c04API\u64cd\u4f5c\u5bf9\u8c61\nObject provider = Class.forName("package.name.FXNewsProvider").newInstance();\nObject listener = Class.forName("package.name.DowJonesNewsListener").newInstance();\nObject persister = Class.forName("package.name.DowJonesNewsPersister").newInstance();\n\nClass providerClazz = provider.getClass();\nField listenerField = providerClazz.getField("newsListener");\nlistenerField.set(provider, listener);\nField persisterField = providerClazz.getField("newsListener");\npersisterField.set(provider, persister);\nassertSame(listener, listenerField.get(provider));\nassertSame(persister, persisterField.get(provider));\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5404\u79cdAware\u63a5\u53e3")),(0,a.kt)("p",null,"\u5f53\u5bf9\u8c61\u5b9e\u4f8b\u5316\u5b8c\u6210\u5e76\u4e14\u76f8\u5173\u5c5e\u6027\u4ee5\u53ca\u4f9d\u8d56\u8bbe\u7f6e\u5b8c\u6210\u4e4b\u540e\uff0c Spring\u5bb9\u5668\u4f1a\u68c0\u67e5\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u662f\u5426\u5b9e\u73b0\u4e86\u4e00\u7cfb\u5217\u7684\u4ee5Aware\u547d\u540d\u7ed3\u5c3e\u7684\u63a5\u53e3\u5b9a\u4e49\u3002\u5982\u679c\u662f\uff0c\u5219\u5c06\u8fd9\u4e9bAware\u63a5\u53e3\u5b9a\u4e49\u4e2d\u89c4\u5b9a\u7684\u4f9d\u8d56\u6ce8\u5165\u7ed9\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002\u8fd9\u4e9bAware\u63a5\u53e3\u4e3a\u5982\u4e0b\u51e0\u4e2a\u3002\n\u9488\u5bf9BeanFactory\u5bb9\u5668\u800c\u8a00"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"org.springframework.beans.factory.BeanNameAware\u3002\u5982\u679cSpring\u5bb9\u5668\u68c0\u6d4b\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5b9e\u73b0\u4e86\u8be5\u63a5\u53e3\uff0c\u4f1a\u5c06\u8be5\u5bf9\u8c61\u5b9e\u4f8b\u7684bean\u5b9a\u4e49\u5bf9\u5e94\u7684beanName\u8bbe\u7f6e\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002"),(0,a.kt)("li",{parentName:"ul"},"org.springframework.beans.factory.BeanClassLoaderAware\u3002\u5982\u679c\u5bb9\u5668\u68c0\u6d4b\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5b9e\u73b0\u4e86\u8be5\u63a5\u53e3\uff0c\u4f1a\u5c06\u5bf9\u5e94\u52a0\u8f7d\u5f53\u524dbean\u7684Classloader\n\u6ce8\u5165\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002\u9ed8\u8ba4\u4f1a\u4f7f\u7528\u52a0\u8f7dorg.springframework.util.ClassUtils\u7c7b\u7684Classloader\u3002"),(0,a.kt)("li",{parentName:"ul"},"org.springframework.beans.factory.BeanFactoryAware\u3002\u5728\u4ecb\u7ecd\u65b9\u6cd5\u6ce8\u5165\u7684\u65f6\u5019\uff0c\u6211\u4eec\u63d0\u5230\u8fc7\u4f7f\u7528\u8be5\u63a5\u53e3\u4ee5\u4fbf\u6bcf\u6b21\u83b7\u53d6prototype\u7c7b\u578bbean\n\u7684\u4e0d\u540c\u5b9e\u4f8b\u3002\u5982\u679c\u5bf9\u8c61\u58f0\u660e\u5b9e\u73b0\u4e86BeanFactoryAware\u63a5\u53e3\uff0c BeanFactory\u5bb9\u5668\u4f1a\u5c06\u81ea\u8eab\u8bbe\u7f6e\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002\u8fd9\u6837\uff0c\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5c31\u62e5\u6709\u4e86\u4e00\u4e2aBeanFactory\u5bb9\u5668\u7684\u5f15\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u5bb9\u5668\u5185\u5141\u8bb8\u8bbf\u95ee\u7684\u5bf9\u8c61\u6309\u7167\u9700\u8981\u8fdb\u884c\u8bbf\u95ee\u3002")),(0,a.kt)("p",null,"\u5bf9\u4e8eApplicationContext\u7c7b\u578b\u5bb9\u5668\uff0c\u4f7f\u7528BeanPostProcessor\u5904\u7406"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.context.ResourceLoaderAware \u3002 ApplicationContext \u5b9e\u73b0\u4e86Spring\u7684ResourceLoader\n\u63a5\u53e3\uff08\u540e\u9762\u4f1a\u63d0\u53ca\u8be6\u7ec6\u4fe1\u606f\uff09\u3002\u5f53\u5bb9\u5668\u68c0\u6d4b\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5b9e\u73b0\u4e86ResourceLoaderAware\u63a5\u53e3\u4e4b\u540e\uff0c\u4f1a\u5c06\u5f53\u524dApplicationContext\u81ea\u8eab\u8bbe\u7f6e\u5230\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u8fd9\u6837\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5c31\u62e5\u6709\u4e86\u5176\u6240\u5728ApplicationContext\u5bb9\u5668\u7684\u4e00\u4e2a\u5f15\u7528\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.context.ApplicationEventPublisherAware\u3002 ApplicationContext\u4f5c\u4e3a\u4e00\u4e2a\u5bb9\u5668\uff0c\u540c\u65f6\u8fd8\u5b9e\u73b0\u4e86ApplicationEventPublisher\n\u63a5\u53e3\uff0c\u8fd9\u6837\uff0c\u5b83\u5c31\u53ef\u4ee5\u4f5c\u4e3aApplicationEventPublisher\u6765\u4f7f\u7528\u3002\u6240\u4ee5\uff0c\u5f53\u524dApplicationContext\u5bb9\u5668\u5982\u679c\u68c0\u6d4b\u5230\u5f53\u524d\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u5b9e\u4f8b\u58f0\u660e\u4e86ApplicationEventPublisherAware\u63a5\u53e3\uff0c\u5219\u4f1a\u5c06\u81ea\u8eab\u6ce8\u5165\u5f53\u524d\u5bf9\u8c61\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.context.MessageSourceAware\u3002 ApplicationContext\u901a\u8fc7MessageSource\u63a5\u53e3\u63d0\u4f9b\u56fd\u9645\u5316\u7684\u4fe1\u606f\u652f\u6301\uff0c\u5373I18n\n\uff08 Internationalization\uff09\u3002\u5b83\u81ea\u8eab\u5c31\u5b9e\u73b0\u4e86MessageSource\u63a5\u53e3\uff0c\u6240\u4ee5\u5f53\u68c0\u6d4b\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5b9e\u73b0\u4e86MessageSourceAware\u63a5\u53e3\uff0c\u5219\u4f1a\u5c06\u81ea\u8eab\u6ce8\u5165\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"org.springframework.context.ApplicationContextAware\u3002 \u5982\u679cApplicationContext\u5bb9\u5668\u68c0\u6d4b\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u73b0\u4e86ApplicationContextAware\n\u63a5\u53e3\uff0c\u5219\u4f1a\u5c06\u81ea\u8eab\u6ce8\u5165\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"BeanPostProcessor"))),(0,a.kt)("p",null,"\u53ea\u8981\u8bb0\u4f4fBeanPostProcessor\u662f\u5b58\u5728\u4e8e\u5bf9\u8c61\u5b9e\u4f8b\u5316\u9636\u6bb5\uff0c\u800cBeanFactoryPostProcessor\u5219\u662f\u5b58\u5728\u4e8e\u5bb9\u5668\u542f\u52a8\u9636\u6bb5\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.beans.factory.config;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.lang.Nullable;\n\npublic interface BeanPostProcessor {\n\n    @Nullable\n    default Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        return bean;\n    }\n\n    @Nullable\n    default Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        return bean;\n    }\n\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49BeanPostProcessor")),(0,a.kt)("p",null,"\u5047\u8bbe\u7cfb\u7edf\u4e2d\u6240\u6709\u7684IFXNewsListener\u5b9e\u73b0\u7c7b\u9700\u8981\u4ece\u67d0\u4e2a\u4f4d\u7f6e\u53d6\u5f97\u76f8\u5e94\u7684\u670d\u52a1\u5668\u8fde\u63a5\u5bc6\u7801\uff0c\u800c\u4e14\u7cfb\u7edf\u4e2d\u4fdd\u5b58\u7684\u5bc6\u7801\u662f\u52a0\u5bc6\u7684\uff0c\u90a3\u4e48\u5728IFXNewsListener\u53d1\u9001\u8fd9\u4e2a\u5bc6\u7801\u7ed9\u65b0\u95fb\u670d\u52a1\u5668\u8fdb\u884c\u8fde\u63a5\u9a8c\u8bc1\u7684\u65f6\u5019\uff0c\u9996\u5148\u9700\u8981\u5bf9\u7cfb\u7edf\u4e2d\u53d6\u5f97\u7684\u5bc6\u7801\u8fdb\u884c\u89e3\u5bc6\uff0c\u7136\u540e\u624d\u80fd\u53d1\u9001\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6807\u6ce8\u9700\u8981\u8fdb\u884c\u89e3\u5bc6\u7684\u5b9e\u73b0\u7c7b")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e3a\u4e86\u80fd\u591f\u8bc6\u522b\u90a3\u4e9b\u9700\u8981\u5bf9\u670d\u52a1\u5668\u8fde\u63a5\u5bc6\u7801\u8fdb\u884c\u89e3\u5bc6\u7684IFXNewsListener\u5b9e\u73b0\uff0c\u6211\u4eec\u58f0\u660e\u4e86\u63a5\u53e3PasswordDecodable\uff0c\u5e76\u8981\u6c42\u76f8\u5173IFXNewsListener\u5b9e\u73b0\u7c7b\u5b9e\u73b0\u8be5\u63a5\u53e3\u3002 ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.beanpostprocessor;\n\n\npublic interface PasswordDecodable {\n    String getEncodedPassword();\n    void setDecodedPassword(String password);\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.beanpostprocessor;\n\nimport org.springframework.mylearntest.directcode.FXNewsBean;\nimport org.springframework.mylearntest.directcode.IFXNewsListener;\n\npublic class DowJonesNewsListener implements IFXNewsListener,PasswordDecodable {\n    private String password;\n    public String[] getAvailableNewsIds() {\n        // \u7701\u7565\n        return new String[0];\n    }\n    public FXNewsBean getNewsByPK(String newsId) {\n        // \u7701\u7565\n        return null;\n    }\n    public void postProcessIfNecessary(String newsId) {\n        // \u7701\u7565\n    }\n    public String getEncodedPassword() {\n        return this.password;\n    }\n    public void setDecodedPassword(String password) {\n        this.password = password;\n    }\n}\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u5b9e\u73b0\u76f8\u5e94\u7684BeanPostProcessor\u5bf9\u7b26\u5408\u6761\u4ef6\u7684Bean\u5b9e\u4f8b\u8fdb\u884c\u5904\u7406")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6211\u4eec\u901a\u8fc7PasswordDecodable\u63a5\u53e3\u58f0\u660e\u6765\u533a\u5206\u5c06\u8981\u5904\u7406\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u5f53\u68c0\u67e5\u5230\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u5b9e\u73b0\u4e86\u8be5\u63a5\u53e3\u4e4b\u540e\uff0c\u5c31\u4f1a\u4ece\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u53d6\u5f97\u52a0\u5bc6\u540e\u7684\u5bc6\u7801\uff0c\u5e76\u5bf9\u5176\u89e3\u5bc6\u3002\u7136\u540e\u5c06\u89e3\u5bc6\u540e\u7684\u5bc6\u7801\u8bbe\u7f6e\u56de\u5f53\u524d\u5bf9\u8c61\u5b9e\u4f8b\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.beanpostprocessor;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\n\npublic class PasswordDecodePostProcessor implements BeanPostProcessor {\n    public Object postProcessAfterInitialization(Object object, String beanName)\n            throws BeansException {\n        return object;\n    }\n    public Object postProcessBeforeInitialization(Object object, String beanName)\n            throws BeansException {\n        if(object instanceof PasswordDecodable){\n            String encodedPassword = ((PasswordDecodable)object).getEncodedPassword();\n            String decodedPassword = decodePassword(encodedPassword);\n            ((PasswordDecodable)object).setDecodedPassword(decodedPassword);\n        }\n        return object;\n    }\n    private String decodePassword(String encodedPassword) {\n        // \u5b9e\u73b0\u89e3\u7801\u903b\u8f91\n        encodedPassword = encodedPassword + "2mingwen";\n        return encodedPassword;\n    }\n}\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u5c06\u81ea\u5b9a\u4e49\u7684BeanPostProcessor\u6ce8\u518c\u5230\u5bb9\u5668")),(0,a.kt)("p",null,"\u5c06PasswordDecodePostProcessor\u6ce8\u5165\u5230\u5bb9\u5668\u4e2d"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"\n       xmlns:aop="http://www.springframework.org/schema/aop">\n    <bean id="dowJonesNewsListener" class="org.springframework.mylearntest.beanpostprocessor.DowJonesNewsListener">\n        <property name="decodedPassword" value="123sjfg@LL"></property>\n    </bean>\n\n    <bean id="passwordDecodePostProcessor" class="org.springframework.mylearntest.beanpostprocessor.PasswordDecodePostProcessor">\n    </bean>\n</beans>\n')),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6d4b\u8bd5\u7c7b"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.beanpostprocessor;\n  \n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test4BeanPostProcessor {\n    public static void main(String[] args) {\n        ApplicationContext beanFactory = new ClassPathXmlApplicationContext("beanpostprocessor/beanpostprocessor.xml");\n        DowJonesNewsListener dowJonesNewsListener = (DowJonesNewsListener) beanFactory.getBean("dowJonesNewsListener");\n        String encodedPassword = dowJonesNewsListener.getEncodedPassword();\n        System.out.println("encodedPassword = " + encodedPassword);// encodedPassword = 123sjfg@LL2mingwen\n    }\n}\n')))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\u5b9e\u9645\u4e0a\uff0c\u6709\u4e00\u79cd\u7279\u6b8a\u7c7b\u578b\u7684BeanPostProcessor\u6211\u4eec\u6ca1\u6709\u63d0\u5230\uff0c\u5b83\u7684\u6267\u884c\u65f6\u673a\u4e0e\u901a\u5e38\u7684BeanPostProcessor\u4e0d\u540c\u3002org.springframework.beans.factory.config.InstantiationAwareBeanPostProcessor\u63a5\u53e3\u53ef\u4ee5\u5728\u5bf9\u8c61\u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u4e2d\u5bfc\u81f4\u67d0\u79cd\u7c7b\u4f3c\u4e8e\u7535\u8def\u201c\u77ed\u8def\u201d\u7684\u6548\u679c\u3002\u5b9e\u9645\u4e0a\uff0c\u5e76\u975e\u6240\u6709\u6ce8\u518c\u5230Spring\u5bb9\u5668\u5185\u7684bean\u5b9a\u4e49\u90fd\u662f\u6309\u7167\u56fe4-10\n\u7684\u6d41\u7a0b\u5b9e\u4f8b\u5316\u7684\u3002\u5728\u6240\u6709\u7684\u6b65\u9aa4\u4e4b\u524d\uff0c\u4e5f\u5c31\u662f\u5b9e\u4f8b\u5316bean\u5bf9\u8c61\u6b65\u9aa4\u4e4b\u524d\uff0c\u5bb9\u5668\u4f1a\u9996\u5148\u68c0\u67e5\u5bb9\u5668\u4e2d\u662f\u5426\u6ce8\u518c\u6709InstantiationAwareBeanPostProcessor\u7c7b\u578b\u7684BeanPostProcessor\n\u3002\u5982\u679c\u6709\uff0c\u9996\u5148\u4f7f\u7528\u76f8\u5e94\u7684InstantiationAwareBeanPostProcessor\u6765\u6784\u9020\u5bf9\u8c61\u5b9e\u4f8b\u3002\u6784\u9020\u6210\u529f\u540e\u76f4\u63a5\u8fd4\u56de\u9020\u5b8c\u6210\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u800c\u4e0d\u4f1a\u6309\u7167\u201c\u6b63\u89c4\u7684\u6d41\u7a0b\u201d\u7ee7\u7eed\u6267\u884c\u3002\u8fd9\u5c31\u662f\u5b83\u53ef\u80fd\u9020\u6210\u201c\u77ed\u8def\u201d\u7684\u539f\u56e0\u3002**\n\n* InitializingBean \u548c init-method\n\norg.springframework.beans.factory.InitializingBean\u662f\u5bb9\u5668\u5185\u90e8\u5e7f\u6cdb\u4f7f\u7528\u7684\u4e00\u4e2a\u5bf9\u8c61\u751f\u547d\u5468\u671f\u6807\u8bc6\u63a5\u53e3\u3002\n\n```java\npublic interface InitializingBean {\nvoid afterPropertiesSet() throws Exception;\n}\n")),(0,a.kt)("p",null,"\u5176\u4f5c\u7528\u5728\u4e8e\uff0c\u5728\u5bf9\u8c61\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u8c03\u7528\u8fc7\u201cBeanPostProcessor\u7684\u524d\u7f6e\u5904\u7406\u201d\u4e4b\u540e\uff0c\u4f1a\u63a5\u7740\u68c0\u6d4b\u5f53\u524d\u5bf9\u8c61\u662f\u5426\u5b9e\u73b0\u4e86InitializingBean\u63a5\u53e3\uff0c\u5982\u679c\u662f\uff0c\u5219\u4f1a\u8c03\u7528\u5176afterPropertiesSet()\u65b9\u6cd5\u8fdb\u4e00\u6b65\u8c03\u6574\u5bf9\u8c61\u5b9e\u4f8b\u7684\u72b6\u6001\u3002\u6bd4\u5982\uff0c\u5728\u6709\u4e9b\u60c5\u51b5\u4e0b\uff0c\u67d0\u4e2a\u4e1a\u52a1\u5bf9\u8c61\u5b9e\u4f8b\u5316\u5b8c\u6210\u540e\uff0c\u8fd8\u4e0d\u80fd\u5904\u4e8e\u53ef\u4ee5\u4f7f\u7528\u72b6\u6001\u3002\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u8ba9\u8be5\u4e1a\u52a1\u5bf9\u8c61\u5b9e\u73b0\u8be5\u63a5\u53e3\uff0c\u5e76\u5728\u65b9\u6cd5afterPropertiesSet()\u4e2d\u5b8c\u6210\u5bf9\u8be5\u4e1a\u52a1\u5bf9\u8c61\u7684\u540e\u7eed\u5904\u7406\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u7cfb\u7edf\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u89c4\u5b9a\uff1a\u6240\u6709\u4e1a\u52a1\u5bf9\u8c61\u7684\u81ea\u5b9a\u4e49\u521d\u59cb\u5316\u64cd\u4f5c\u90fd\u5fc5\u987b\u4ee5init()\u547d\u540d\uff0c\u4e3a\u4e86\u7701\u53bb\u6328\u4e2a",(0,a.kt)("inlineCode",{parentName:"p"},"<bean>"),"\u7684\u8bbe\u7f6einit-method\u8fd9\u6837\u7684\u70e6\u7410\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6700\u9876\u5c42\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"<beans>"),"\u7684default-init-method\u7edf\u4e00\u6307\u5b9a\u8fd9\u4e00init()\u65b9\u6cd5\u540d\u3002"),(0,a.kt)("h2",{id:"applicationcontext"},"ApplicationContext"),(0,a.kt)("h3",{id:"\u7edf\u4e00\u8d44\u6e90\u52a0\u8f7d\u7b56\u7565"},"\u7edf\u4e00\u8d44\u6e90\u52a0\u8f7d\u7b56\u7565"),(0,a.kt)("p",null,"Spring\u63d0\u51fa\u4e86\u4e00\u5957\u57fa\u4e8eorg.springframework.core.io.Resource\u548corg.springframework.core.io.ResourceLoader\u63a5\u53e3\u7684\u8d44\u6e90\u62bd\u8c61\u548c\u52a0\u8f7d\u7b56\u7565\u3002"),(0,a.kt)("p",null,"Resource: \u63a5\u53e3\u53ef\u4ee5\u6839\u636e\u8d44\u6e90\u7684\u4e0d\u540c\u7c7b\u578b\uff0c\u6216\u8005\u8d44\u6e90\u6240\u5904\u7684\u4e0d\u540c\u573a\u5408\uff0c\u7ed9\u51fa\u76f8\u5e94\u7684\u5177\u4f53\u5b9e\u73b0\u3002\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u67e5\u8be2\u8d44\u6e90\u72b6\u6001\u3001\u8bbf\u95ee\u8d44\u6e90\u5185\u5bb9\uff0c\u751a\u81f3\u6839\u636e\u5f53\u524d\u8d44\u6e90\u521b\u5efa\u65b0\u7684\u76f8\u5bf9\u8d44\u6e90\u3002\u6211\u4eec\u53ef\u4ee5\u7ee7\u627forg.springframework.core.io\n.AbstractResource\u62bd\u8c61\u7c7b\u3002"),(0,a.kt)("p",null,"ResourceLoader: \u4f46\u5982\u4f55\u53bb\u67e5\u627e\u548c\u5b9a\u4f4d\u8fd9\u4e9b\u8d44\u6e90\uff0c\u5219\u5e94\u8be5\u662fResourceLoader\u7684\u804c\u8d23\u6240\u5728\u4e86\u3002 org.springframework.core.io.ResourceLoader\u63a5\u53e3\u662f\u8d44\u6e90\u67e5\u627e\u5b9a\u4f4d\u7b56\u7565\u7684\u7edf\u4e00\u62bd\u8c61\uff0c\u5177\u4f53\u7684\u8d44\u6e90\u67e5\u627e\u5b9a\u4f4d\u7b56\u7565\u5219\u7531\u76f8\u5e94\u7684ResourceLoader\u5b9e\u73b0\u7c7b\u7ed9\u51fa\u3002"),(0,a.kt)("p",null,"DefaultResourceLoader: ResourceLoader\u6709\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5b9e\u73b0\u7c7b\uff0c\u5373org.springframework.core.io.DefaultResourceLoader\uff0c\u8be5\u7c7b\u9ed8\u8ba4\u7684\u8d44\u6e90\u67e5\u627e\u5904\u7406\u903b\u8f91\u5982\u4e0b\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9996\u5148\u68c0\u67e5\u8d44\u6e90\u8def\u5f84\u662f\u5426\u4ee5classpath:\u524d\u7f00\u6253\u5934\uff0c\u5982\u679c\u662f\uff0c\u5219\u5c1d\u8bd5\u6784\u9020ClassPathResource\u7c7b\u578b\u8d44\u6e90\u5e76\u8fd4\u56de\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5426\u5219\uff0c (a) \u5c1d\u8bd5\u901a\u8fc7URL\uff0c\u6839\u636e\u8d44\u6e90\u8def\u5f84\u6765\u5b9a\u4f4d\u8d44\u6e90\uff0c\u5982\u679c\u6ca1\u6709\u629b\u51faMalformedURLException\uff0c\u6709\u5219\u4f1a\u6784\u9020UrlResource\u7c7b\u578b\u7684\u8d44\u6e90\u5e76\u8fd4\u56de\uff1b (b\n)\u5982\u679c\u8fd8\u662f\u65e0\u6cd5\u6839\u636e\u8d44\u6e90\u8def\u5f84\u5b9a\u4f4d\u6307\u5b9a\u7684\u8d44\u6e90\uff0c\u5219\u59d4\u6d3egetResourceByPath(String) \u65b9 \u6cd5 \u6765 \u5b9a \u4f4d \uff0c DefaultResourceLoader \u7684getResourceByPath(String)\u65b9\u6cd5\u9ed8\u8ba4\u5b9e\u73b0\u903b\u8f91\u662f\uff0c\u6784\u9020ClassPathResource\u7c7b\u578b\u7684\u8d44\u6e90\u5e76\u8fd4\u56de\u3002")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/3S4uLnEjAsDTgJa.png",alt:null})),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/gXVo8SKvnThpwZm.png",alt:null})),(0,a.kt)("h3",{id:"\u56db\u79cd\u52a0\u8f7d\u65b9\u5f0f"},"\u56db\u79cd\u52a0\u8f7d\u65b9\u5f0f"),(0,a.kt)("h4",{id:"\u4f7f\u7528\u4ee5resourceloader\u8eab\u4efd\u767b\u573a\u7684applicationcontext"},"\u4f7f\u7528\u4ee5ResourceLoader\u8eab\u4efd\u767b\u573a\u7684ApplicationContext"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},'ResourceLoader resourceLoader = new ClassPathXmlApplicationContext("\u914d\u7f6e\u6587\u4ef6\u8def\u5f84");')),(0,a.kt)("h4",{id:"resourceloader\u7c7b\u578b\u7684\u6ce8\u5165"},"ResourceLoader\u7c7b\u578b\u7684\u6ce8\u5165"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u4f9d\u8d56\u4e8eResourceLoader"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n <bean id="resourceLoader" class="org.springframework.core.io.DefaultResourceLoader">\n </bean>\n\n <bean id="fooBar" class="org.springframework.mylearntest.resourceloader.FooBar">\n     <property name="resourceLoader">\n         <ref bean="resourceLoader"/>\n     </property>\n </bean>\n</beans>\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5b9e\u73b0\u4e86ResourceLoaderAware\u6216\u8005ApplicationContextAware\u63a5\u53e3\u7684\u5b9e\u4f8b\u7c7b"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n\n <bean id="fooBar" class="org.springframework.mylearntest.resourceloader.FooBarImplApplicationContextAware">\n </bean>\n</beans>\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Resource\u7c7b\u578b\u7684\u6ce8\u5165"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-XML"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n\n <bean id="xMailer" class="org.springframework.mylearntest.resourceloader.XMailer">\n     <property name="template" value="resourceloader/resources.default_template.vm"/>\n </bean>\n</beans>\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"ApplicationContext\u7684Resource\u52a0\u8f7d\u884c\u4e3a\n\u5f53ClassPathXmlApplicationContext\u5728\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u6ca1\u6709\u6307\u660eclasspath:\u6216\u8005classpath*:\u7b49\u524d\u7f00\uff0c\u5b83\u4f1a\u9ed8\u8ba4\u4ececlasspath\u4e2d\u52a0\u8f7dbean\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\uff0c\n\u800cFileSystemXmlApplicationContext\u5219\u6709\u4e9b \u4e0d\u540c \uff0c\u5982\u679c \u6211\u4eec \u50cf\u5982\u4e0b \u4ee3\u7801 \u90a3\u6837\u6307 \u5b9aconf/appContext.xml\uff0c\u5b83\u4f1a\u5c1d\u8bd5\u4ece\u6587\u4ef6\u7cfb\u7edf\u4e2d\u52a0\u8f7dbean\u5b9a\u4e49\u6587\u4ef6"))),(0,a.kt)("h3",{id:"\u56fd\u9645\u5316\u4fe1\u606f\u652f\u6301i18n-messagesource"},"\u56fd\u9645\u5316\u4fe1\u606f\u652f\u6301(i18n MessageSource)"),(0,a.kt)("h4",{id:"java-se-\u63d0\u4f9b\u7684\u56fd\u9645\u5316\u652f\u6301"},"Java SE \u63d0\u4f9b\u7684\u56fd\u9645\u5316\u652f\u6301"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Locale\n\u4e0d\u540c\u7684Locale\u4ee3\u8868\u4e0d\u540c\u7684\u56fd\u5bb6\u548c\u5730\u533a\uff0c\u6bcf\u4e2a\u56fd\u5bb6\u548c\u5730\u533a\u5728Locale\u8fd9\u91cc\u90fd\u6709\u76f8\u5e94\u7684\u7b80\u5199\u4ee3\u7801\u8868\u793a\uff0c\u5305\u62ec\u8bed\u8a00\u4ee3\u7801\u4ee5\u53ca\u56fd\u5bb6\u4ee3\u7801\uff0c\u8fd9\u4e9b\u4ee3\u7801\u662fISO\u6807\u51c6\u4ee3\u7801\u3002\u5982\uff0cLocale.CHINA\u4ee3\u8868\u4e2d\u56fd\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"ResourceBundle")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"ResourceBundle\u7528\u6765\u4fdd\u5b58\u7279\u5b9a\u4e8e\u67d0\u4e2aLocale\u7684\u4fe1\u606f\uff08\u53ef\u4ee5\u662fString\u7c7b\u578b\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\u7684\u5bf9\u8c61\uff09\u3002\u901a\u5e38\uff0c ResourceBundle\u7ba1\u7406\u4e00\u7ec4\u4fe1\u606f\u5e8f\u5217\uff0c\u6240\u6709\u7684\u4fe1\u606f\u5e8f\u5217\u6709\u7edf\u4e00\u7684\u4e00\u4e2abasename\n\uff0c\u7136\u540e\u7279\u5b9a\u7684Locale\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u6839\u636ebasename\u540e\u8ffd\u52a0\u7684\u8bed\u8a00\u6216\u8005\u5730\u533a\u4ee3\u7801\u6765\u533a\u5206\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u7528\u4e00\u7ec4properties\u6587\u4ef6\u6765\u5206\u522b\u4fdd\u5b58\u4e0d\u540c\u56fd\u5bb6\u5730\u533a\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u6765\u547d\u540d\u76f8\u5e94\u7684properties\u6587\u4ef6\uff1a"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"messages.properties\nmessages_zh.properties\nmessages_zh_CN.properties\nmessages_en.properties\nmessages_en_US.properties\n")),(0,a.kt)("p",null,"\u5176\u4e2d\uff0c\u6587\u4ef6\u540d\u4e2d\u7684messages\u90e8\u5206\u79f0\u4f5cResourceBundle\u5c06\u52a0\u8f7d\u7684\u8d44\u6e90\u7684basename\uff0c\u5176\u4ed6\u8bed\u8a00\u6216\u5730\u533a\u7684\u8d44\u6e90\u5728basename\u7684\u57fa\u7840\u4e0a\u8ffd\u52a0Locale\u7279\u5b9a\u4ee3\u7801\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/8Y4A7NIqHhxa6Qb.png",alt:null})),(0,a.kt)("p",null,"\u5982\u679c\u67d0\u4e2a\u4e1a\u52a1\u5bf9\u8c61\u9700\u8981\u56fd\u9645\u5316\u7684\u4fe1\u606f\u652f\u6301\uff0c\u90a3\u4e48\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u8ba9\u5b83\u5b9e\u73b0MessageSourceAware\u63a5\u53e3\uff0c\u7136\u540e\u6ce8\u518c\u5230ApplicationContext\u5bb9\u5668\u3002\u4e0d\u8fc7\u8fd9\u6837\u4e00\u6765\uff0c\u8be5\u4e1a\u52a1\u5bf9\u8c61\u5bf9ApplicationContext\u5bb9\u5668\u7684\u4f9d\u8d56\u6027\u5c31\u592a\u5f3a\u4e86\uff0c\u663e\u5f97\u5bb9\u5668\u5177\u6709\u8f83\u5f3a\u7684\u4fb5\u5165\u6027\u3002\u800c\u5b9e\u9645\u4e0a\uff0c \u5982\u679c\u771f\u7684\u67d0\u4e2a\u4e1a\u52a1\u5bf9\u8c61\u9700\u8981\u4f9d\u8d56\u4e8eMessageSource\u7684\u8bdd\uff0c\u76f4\u63a5\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u6ce8\u5165\u6216\u8005setter\u65b9\u6cd5\u6ce8\u5165\u7684\u65b9\u5f0f\u58f0\u660e\u4f9d\u8d56\u5c31\u53ef\u4ee5\u4e86\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5bb9\u5668\u5185\u90e8\u4e8b\u4ef6\u53d1\u5e03")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53d1\u5e03\n\u7ed9\u51fa\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\uff08 define your own event object\uff09\u3002 \u4e3a\u4e86\u9488\u5bf9\u5177\u4f53\u573a\u666f\u53ef\u4ee5\u533a\u5206\u5177\u4f53\u7684\u4e8b\u4ef6\u7c7b\u578b\uff0c \u6211\u4eec\u9700\u8981\u7ed9\u51fa\u81ea\u5df1\u7684\u4e8b\u4ef6\u7c7b\u578b\u7684\u5b9a\u4e49\uff0c\u901a\u5e38\u505a\u6cd5\u662f\u6269\u5c55java.util.EventObject\u7c7b\u6765\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u7c7b\u578b\u3002")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.eventpublication.event;\n  \n\nimport java.util.EventObject;\n\n/**\n  * \u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\n  */\n  public class MethodExecutionEvent extends EventObject {\n   private static final long serialVersionUID = -71960369269303337L;\n   private String methodName;\n  \n   public MethodExecutionEvent(Object source) {\n  \n       super(source);\n  \n   }\n  \n   public MethodExecutionEvent(Object source, String methodName) {\n  \n       super(source);\n       this.methodName = methodName;\n  \n   }\n  \n   public String getMethodName() {\n  \n       return methodName;\n  \n   }\n  \n   public void setMethodName(String methodName) {\n  \n       this.methodName = methodName;\n  \n   }\n  }\n\n")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u4e49\u4e8b\u4ef6\u76d1\u542c\u5668\u63a5\u53e3\u4ee5\u53ca\u5b9e\u73b0\u7c7b")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.eventpublication.event;\nimport java.util.EventListener;\n\n/**\n  * \u81ea\u5b9a\u4e49\u4e8b\u4ef6\u76d1\u542c\u5668\n  */\n  public interface MethodExecutionEventListener extends EventListener {\n   /**\n    * \u5904\u7406\u65b9\u6cd5\u5f00\u59cb\u6267\u884c\u7684\u65f6\u5019\u53d1\u5e03\u7684MethodExecutionEvent\u4e8b\u4ef6\n    */\n    void onMethodBegin(MethodExecutionEvent evt);\n      \n    /**\n    * \u5904\u7406\u65b9\u6cd5\u6267\u884c\u5c06\u7ed3\u675f\u65f6\u5019\u53d1\u5e03\u7684MethodExecutionEvent\u4e8b\u4ef6\n    */\n    void onMethodEnd(MethodExecutionEvent evt);\n    }\n  \n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u76d1\u542c\u5668\u5b9e\u73b0"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.eventpublication.event;\n  \n\npublic class SimpleMethodExecutionEventListener implements MethodExecutionEventListener {\n\n    public void onMethodBegin(MethodExecutionEvent evt) {\n        String methodName = evt.getMethodName();\n        System.out.println("start to execute the method[" + methodName + "].");\n    }\n    \n    public void onMethodEnd(MethodExecutionEvent evt) {\n        String methodName = evt.getMethodName();\n        System.out.println("finished to execute the method[" + methodName + "].");\n    }\n\n}\n')))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"* \u5b9a\u4e49\u4e8b\u72b6\u6001\u679a\u4e3e\u7c7b\u4ee5\u53ca\u4e8b\u4ef6\u53d1\u5e03\u8005\n```java\npackage org.springframework.mylearntest.eventpublication.event;\n\npublic enum MethodExecutionStatus {\n    BEGIN,END\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e8b\u4ef6\u53d1\u5e03\u7c7b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.ioc.eventpublication.event;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MethodExeuctionEventPublisher {\n    private List<MethodExecutionEventListener> listeners = new\n            ArrayList<MethodExecutionEventListener>();\n\n    public void methodToMonitor() {\n        MethodExecutionEvent event2Publish =\n                new MethodExecutionEvent(this, "methodToMonitor");\n        publishEvent(MethodExecutionStatus.BEGIN, event2Publish);\n        // \u6267\u884c\u5b9e\u9645\u7684\u65b9\u6cd5\u903b\u8f91\n        // ...\n        publishEvent(MethodExecutionStatus.END, event2Publish);\n    }\n\n    // \u4e3a\u4e86\u907f\u514d\u4e8b\u4ef6\u5904\u7406\u671f\u95f4\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u6ce8\u518c\u6216\u79fb\u9664\u64cd\u4f5c\u5f71\u54cd\u5904\u7406\u8fc7\u7a0b\uff0c\u6211\u4eec\u5bf9\u4e8b\u4ef6\u53d1\u5e03\u65f6\u70b9\u7684\u76d1\u542c\u5668\u5217\u8868\u8fdb\u884c\u4e86\u4e00\u4e2a\u5b89\u5168\u590d\u5236\uff08 safe-copy\uff09\n    protected void publishEvent(MethodExecutionStatus status,\n                                MethodExecutionEvent methodExecutionEvent) {\n        List<MethodExecutionEventListener> copyListeners =\n                new ArrayList<MethodExecutionEventListener>(listeners);\n        for (MethodExecutionEventListener listener : copyListeners) {\n            if (MethodExecutionStatus.BEGIN.equals(status))\n                listener.onMethodBegin(methodExecutionEvent);\n            else\n                listener.onMethodEnd(methodExecutionEvent);\n        }\n    }\n\n    public void addMethodExecutionEventListener(MethodExecutionEventListener listener) {\n        this.listeners.add(listener);\n    }\n\n    public void removeListener(MethodExecutionEventListener listener) {\n        if (this.listeners.contains(listener))\n            this.listeners.remove(listener);\n    }\n\n    public void removeAllListeners() {\n        this.listeners.clear();\n    }\n\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6d4b\u8bd5\u7c7b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"package org.springframework.mylearntest.eventpublication.event;\n\npublic class Test4Event {\n    public static void main(String[] args) {\n        MethodExeuctionEventPublisher eventPublisher =\n                new MethodExeuctionEventPublisher();\n        eventPublisher.addMethodExecutionEventListener(new\n                SimpleMethodExecutionEventListener());\n        eventPublisher.methodToMonitor();\n        eventPublisher.removeAllListeners();\n    }\n}\n")),(0,a.kt)("p",null,"\u5728\u5b9e\u73b0\u4e2d\uff0c\u9700\u8981\u6ce8\u610f\u5230\uff0c\u4e3a\u4e86\u907f\u514d\u4e8b\u4ef6\u5904\u7406\u671f\u95f4\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u6ce8\u518c\u6216\u79fb\u9664\u64cd\u4f5c\u5f71\u54cd\u5904\u7406\u8fc7\u7a0b\uff0c\u6211\u4eec\u5bf9\u4e8b\u4ef6\u53d1\u5e03\u65f6\u70b9\u7684\u76d1\u542c\u5668\u5217\u8868\u8fdb\u884c\u4e86\u4e00\u4e2a\u5b89\u5168\u590d\u5236\uff08 safe-copy\uff09\u3002\u53e6\u5916\uff0c\u4e8b\u4ef6\u7684\u53d1\u5e03\u662f\u987a\u5e8f\u6267\u884c\uff0c\u6240\u4ee5\u4e3a\u4e86\u80fd\u591f\u4e0d\u5f71\u54cd\u5904\u7406\u6027\u80fd\uff0c\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u5904\u7406\u903b\u8f91\u5e94\u8be5\u5c3d\u91cf\u7b80\u77ed\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://s2.loli.net/2023/07/15/Qmwxcpa4qDJGMYu.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Spring \u7684\u5bb9\u5668\u5185\u4e8b\u4ef6\u53d1\u5e03\u7c7b\u7ed3\u6784\u5206\u6790\nSpring \u7684 ApplicationContext \u5bb9 \u5668 \u5185 \u90e8 \u5141 \u8bb8 \u4ee5 org.springframework.context.ApplicationEvent\u7684\u5f62\u5f0f\u53d1\u5e03\u4e8b\u4ef6 \uff0c\u5bb9\u5668\u5185\u6ce8\u518c\u7684org.springframework.context.ApplicationListener\u7c7b\u578b\u7684bean\u5b9a\u4e49\u4f1a\u88abApplicationContext\u5bb9\u5668\u81ea\u52a8\u8bc6\u522b\uff0c\u5b83\u4eec\u8d1f\u8d23\u76d1\u542c\u5bb9\u5668\u5185\u53d1\u5e03\u7684\u6240\u6709ApplicationEvent\u7c7b\u578b\u7684\u4e8b\u4ef6\u3002")),(0,a.kt)("p",null,"ApplicationEvent: Spring\u5bb9\u5668\u5185\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7c7b\u578b\uff0c\u7ee7\u627f\u81eajava.util.EventObject\uff0c\u5b83\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u9700\u8981\u6839\u636e\u60c5\u51b5\u63d0\u4f9b\u76f8\u5e94\u5b50\u7c7b\u4ee5\u533a\u5206\u4e0d\u540c\u60c5\u51b5\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c Spring\u63d0\u4f9b\u4e86\u4e09\u4e2a\u5b9e\u73b0\u3002 "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"ContextClosedEvent\uff1a ApplicationContext\u5bb9\u5668\u5728\u5373\u5c06\u5173\u95ed\u7684\u65f6\u5019\u53d1\u5e03\u7684\u4e8b\u4ef6\u7c7b\u578b\u3002"),(0,a.kt)("li",{parentName:"ul"},"ContextRefreshedEvent\uff1a ApplicationContext\u5bb9\u5668\u5728\u521d\u59cb\u5316\u6216\u8005\u5237\u65b0\u7684\u65f6\u5019\u53d1\u5e03\u7684\u4e8b\u4ef6\u7c7b\n\u578b\u3002"),(0,a.kt)("li",{parentName:"ul"},"RequestHandledEvent\uff1a Web\u8bf7\u6c42\u5904\u7406\u540e\u53d1\u5e03\u7684\u4e8b\u4ef6\uff0c\u5176\u6709\u4e00\u5b50\u7c7bServletRequestHandledEvent\u63d0\u4f9b\u7279\u5b9a\u4e8eJava EE\u7684Servlet\u76f8\u5173\u4e8b\u4ef6\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"```java\npackage org.springframework.mylearntest.eventpublication.applicationevent;\n\nimport org.springframework.context.ApplicationEvent;\nimport org.springframework.mylearntest.eventpublication.event.MethodExecutionStatus;\n\npublic class MethodExecutionEvent extends ApplicationEvent {\n    private static final long serialVersionUID = -71960369269303337L;\n    private String methodName;\n    private MethodExecutionStatus methodExecutionStatus;\n\n    public MethodExecutionEvent(Object source) {\n        super(source);\n    }\n\n    public MethodExecutionEvent(Object source, String methodName,\n                                MethodExecutionStatus methodExecutionStatus) {\n        super(source);\n        this.methodName = methodName;\n        this.methodExecutionStatus = methodExecutionStatus;\n    }\n\n    public String getMethodName() {\n        return methodName;\n    }\n\n    public void setMethodName(String methodName) {\n        this.methodName = methodName;\n    }\n\n    public MethodExecutionStatus getMethodExecutionStatus() {\n        return methodExecutionStatus;\n    }\n\n    public void setMethodExecutionStatus(MethodExecutionStatus methodExecutionStatus) {\n        this.methodExecutionStatus = methodExecutionStatus;\n    }\n}\n")),(0,a.kt)("p",null,"ApplicationListener: ApplicationContext\u5bb9\u5668\u5185\u4f7f\u7528\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u76d1\u542c\u5668\u63a5\u53e3\u5b9a\u4e49\uff0c\u7ee7\u627f\u81eajava.util.EventListener\u3002 "),(0,a.kt)("p",null,"ApplicationContext: \u5bb9\u5668\u5728\u542f\u52a8\u65f6\uff0c\u4f1a\u81ea\u52a8\u8bc6\u522b\u5e76\u52a0\u8f7dEventListener\u7c7b\u578bbean\u5b9a\u4e49\uff0c\u4e00\u65e6\u5bb9\u5668\u5185\u6709\u4e8b\u4ef6\u53d1\u5e03\uff0c\u5c06\u901a\u77e5\u8fd9\u4e9b\u6ce8\u518c\u5230\u5bb9\u5668\u7684EventListener\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.eventpublication.applicationevent;\n\n\nimport org.springframework.context.ApplicationEvent;\nimport org.springframework.context.ApplicationListener;\n\n@SuppressWarnings("rawtypes")\npublic class MethodExecutionEventListener implements ApplicationListener {\n    public void onApplicationEvent(ApplicationEvent evt) {\n        if (evt instanceof MethodExecutionEvent) {\n            // \u6267\u884c\u5904\u7406\u903b\u8f91\n        }\n    }\n}\n')),(0,a.kt)("p",null,"ApplicationContext: \u8fd8\u8bb0\u5f97ApplicationContext\u7684\u5b9a\u4e49\u5427\uff1f\u9664\u4e86\u4e4b\u524d\u7684ResourceLoader\u548cMessageSource\uff0c ApplicationContext\u63a5\u53e3\u5b9a\u4e49\u8fd8\u7ee7\u627f\u4e86ApplicationEventPublisher\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u63d0\u4f9b\u4e86void publishEvent(ApplicationEvent event)\u65b9\u6cd5\u5b9a\u4e49\u3002\u4e0d\u96be\u770b\u51fa\uff0c ApplicationContext\u5bb9\u5668\u73b0\u5728\u62c5\u5f53\u7684\u5c31\u662f\u4e8b\u4ef6\u53d1\u5e03\u8005\u7684\u89d2\u8272\u3002ApplicationContext\u5bb9\u5668\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b\u5728\u5b9e\u73b0\u4e8b\u4ef6\u7684\u53d1\u5e03\u548c\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u6ce8\u518c\u65b9\u9762\uff0c\u5e76\u6ca1\u4e8b\u5fc5\u8eac\u4eb2\uff0c\u800c\u662f\u628a\u8fd9\u4e9b\u6d3b\u513f\u8f6c\u5305\u7ed9\u4e86\u4e00\u4e2a\u79f0\u4f5corg.springframework.context.event.ApplicationEventMulticaster\u7684\u63a5\u53e3\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.eventpublication.applicationevent;\n\nimport org.springframework.context.ApplicationEventPublisher;\nimport org.springframework.context.ApplicationEventPublisherAware;\nimport org.springframework.mylearntest.eventpublication.event.MethodExecutionStatus;\n\npublic class MethodExeuctionEventPublisher implements ApplicationEventPublisherAware {\n    private ApplicationEventPublisher eventPublisher;\n\n    public void methodToMonitor() {\n        MethodExecutionEvent beginEvt = new\n                MethodExecutionEvent(this, "methodToMonitor", MethodExecutionStatus.BEGIN);\n        this.eventPublisher.publishEvent(beginEvt);\n        // \u6267\u884c\u5b9e\u9645\u65b9\u6cd5\u903b\u8f91\n        // ...\n        MethodExecutionEvent endEvt = new\n                MethodExecutionEvent(this, "methodToMonitor", MethodExecutionStatus.END);\n        this.eventPublisher.publishEvent(endEvt);\n    }\n\n    public void setApplicationEventPublisher(ApplicationEventPublisher appCtx) {\n        this.eventPublisher = appCtx;\n    }\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="methodExecListener" class="org.springframework.mylearntest.eventpublication.applicationevent.MethodExecutionEventListener">\n    </bean>\n    <bean id="evtPublisher" class="org.springframework.mylearntest.eventpublication.applicationevent.MethodExeuctionEventPublisher">\n    </bean>\n\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package org.springframework.mylearntest.eventpublication.applicationevent;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test4AppEvent {\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext("eventpublication/applicationevent.xml");\n        MethodExeuctionEventPublisher evtPublisher = (MethodExeuctionEventPublisher) context.getBean("evtPublisher");\n        evtPublisher.methodToMonitor();\n    }\n}\n')),(0,a.kt)("p",null,"ApplicationEventMulticaster\u6709\u4e00\u62bd\u8c61\u5b9e\u73b0\u7c7b\u2014\u2014org.springframework.context.event.AbstractApplicationEventMulticaster\uff0c\u5b83\u5b9e\u73b0\u4e86\u4e8b\u4ef6\u76d1\u542c\u5668\u7684\u7ba1\u7406\u529f\u80fd\u3002\u4e8b\u4ef6\u7684\u53d1\u5e03\u529f\u80fd\u5219\u59d4\u6258\u7ed9\u4e86\u5176\u5b50\u7c7b\u3002 org.springframework.context.event.SimpleApplicationEventMulticaster\u3002\u5176\u9ed8\u8ba4\u4f7f\u7528\u4e86SyncTaskExecutor\u8fdb\u884c\u4e8b\u4ef6\u7684\u53d1\u5e03\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u65b9\u5f0f\u53ef\u80fd\u5b58\u5728\u7684\u6027\u80fd\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u5176\u63d0\u4f9b\u5176\u4ed6\u7c7b\u578b\u7684TaskExecutor\u5b9e\u73b0\u7c7b\u3002"),(0,a.kt)("p",null,"\u5bb9\u5668\u542f\u52a8\u5f00\u59cb\uff0c\u5c31\u4f1a\u68c0\u67e5\u5bb9\u5668\u5185\u662f\u5426\u5b58\u5728\u540d\u79f0\u4e3aapplicationEventMulticaster\u7684ApplicationEventMulticaster\u5bf9\u8c61\u5b9e\u4f8b\u3002\u6709\u7684\u8bdd\u5c31\u4f7f\u7528\u63d0\u4f9b\u7684\u5b9e\u73b0\uff0c\u6ca1\u6709\u5219\u9ed8\u8ba4\u521d\u59cb\u5316\u4e00\u4e2aSimpleApplicationEventMulticaster\u4f5c\u4e3a\u5c06\u4f1a\u4f7f\u7528\u7684ApplicationEventMulticaster\u3002"),(0,a.kt)("img",{src:"https://s2.loli.net/2023/07/15/TvPHprcI9eL4DSz.png"}),(0,a.kt)("h2",{id:"spring-ioc\u5bb9\u5668\u6269\u5c55"},"Spring IoC\u5bb9\u5668\u6269\u5c55"),(0,a.kt)("h3",{id:"ioc\u76f8\u5173\u6ce8\u89e3"},"IoC\u76f8\u5173\u6ce8\u89e3"),(0,a.kt)("p",null,"\u770b\u7740\u4f9d\u8d56\u6ce8\u5165\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4e00\u534a\u5206\u6563\u5728Java\u6e90\u4ee3\u7801\u4e2d\uff08 @Autowired\u6807\u6ce8\u7684\u4fe1\u606f\uff09\uff0c\u4e00\u534a\u4f9d\u7136\u7559\u5728XML\u914d\u7f6e\u6587\u4ef6\u91cc\uff0c\u6709\u5f88\u591abean\u6807\u7b7e\u4f9d\u7136\u5b58\u5728\u3002\n\u5f53\u4f7f\u7528@Autoware\u6ce8\u89e3\u80fd\u591f\u540c\u65f6\u627e\u5230\u4e24\u4e2a\u6216\u8005\u591a\u4e2a\u540c\u4e00\u7c7b\u578b\u7684\u5bf9\u8c61\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u4f7f\u7528@Qualifier\u5bf9\u4f9d\u8d56\u6ce8\u5165\u7684\u6761\u4ef6\u505a\u8fdb\u4e00\u6b65\u9650\u5b9a\uff0c\u6307\u5b9a\u5177\u4f53\u662f\u54ea\u4e2aid\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n<bean class="org.springframework.beans.factory.annotation. \u27a5\nAutowiredAnnotationBeanPostProcessor"/>\n<bean id="newsProvider" class="..FXNewsProvider"/>\n<bean id="djNewsListener" class="..DowJonesNewsListener"/>\n<bean id="reutersNewsListner" class="..ReutersNewsListener"/>\n<bean id="djNewsPersister" class="..DowJonesNewsPersister"/>\n</beans>\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public class FXNewsProvider {\n    @Autowired\n    @Qualifier("reutersNewsListner")// \u6b64\u65f6\u6ce8\u5165id=reutersNewsListner\n    private IFXNewsListener newsListener;\n    @Autowired\n    private IFXNewsPersister newPersistener;\n    //...\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'// @Qualifier\u6ce8\u89e3\u4f4d\u4e8e\u53c2\u6570\u4e0a\npublic class FXNewsProvider{\n    // ...\n    @Autowired\n    public void setUp(@Qualifier("reutersNewsListner") IFXNewsListener newsListener,IFXNewsPersister newPersistener) {\n        this.newsListener = newsListener;\n        this.newPersistener = newPersistener;\n    }\n    // ...\n}\n')),(0,a.kt)("p",null,"@Resource\u4e0e@Autowired\u4e0d\u540c\uff0c\u5b83\u9075\u5faa\u7684\u662fbyName\u81ea\u52a8\u7ed1\u5b9a\u5f62\u5f0f\u7684\u884c\u4e3a\u51c6\u5219\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c IoC\u5bb9\u5668\u5c06\u6839\u636e@Resource\u6240\u6307\u5b9a\u7684\u540d\u79f0\uff0c\u5230\u5bb9\u5668\u4e2d\u67e5\u627ebeanName\n\u4e0e\u4e4b\u5bf9\u5e94\u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u5c06\u67e5\u627e\u5230\u7684\u5bf9\u8c61\u5b9e\u4f8b\u6ce8\u5165\u7ed9@Resource\u6240\u6807\u6ce8\u7684\u5bf9\u8c61\u3002"),(0,a.kt)("p",null,"@PostConstruct\u548c@PreDestroy\u4e0d\u662f\u670d\u52a1\u4e8e\u4f9d\u8d56\u6ce8\u5165\u7684\uff0c\u5b83\u4eec\u4e3b\u8981\u7528\u4e8e\u6807\u6ce8\u5bf9\u8c61\u751f\u547d\u5468\u671f\u7ba1\u7406\u76f8\u5173\u65b9\u6cd5\uff0c\u8fd9\u4e0eSpring\u7684InitializingBean\u548cDisposableBean\u63a5\u53e3\uff0c\u4ee5\u53ca\u914d\u7f6e\u9879\u4e2d\u7684init\n-method\u548cdestroy-method\u8d77\u5230\u7c7b\u4f3c\u7684\u4f5c\u7528\u3002"),(0,a.kt)("p",null,"\u5c31\u50cf@Autowired\u9700\u8981AutowiredAnnotationBeanPostProcessor\u4e3a\u5b83\u4e0eIoC\u5bb9\u5668\u7275\u7ebf\u642d\u6865\u4e00\u6837\uff0cJSR250\u7684\u8fd9\u4e9b\u6ce8\u89e3\u4e5f\u540c\u6837\u9700\u8981\u4e00\u4e2aBeanPostProcessor\u5e2e\u52a9\u5b83\u4eec\u5b9e\u73b0\u81ea\u8eab\u7684\u4ef7\u503c\u3002\u8fd9\u4e2aBeanPostProcessor\u5c31\u662forg.springframework.context.annotation.CommonAnnotationBeanPostProcessor\uff0c\u53ea\u6709\u5c06CommonAnnotationBeanPostProcessor\u6dfb\u52a0\u5230\u5bb9\u5668\uff0c JSR250\u7684\u76f8\u5173\u6ce8\u89e3\u624d\u80fd\u53d1\u6325\u4f5c\u7528\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans>\n<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor"/>\n<bean id="newsProvider" class="..FXNewsProvider"/>\n<bean id="djNewsListener" class="..DowJonesNewsListener"/>\n<bean id="djNewsPersister" class="..DowJonesNewsPersister"/>\n</beans>\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<context:annotation-config> "),"\u4e0d \u4f46 \u5e2e \u6211 \u4eec \u628a AutowiredAnnotationBeanPostProcessor \u548cCommonAnnotationBeanPostProcessor\u6ce8\u518c\u5230\u5bb9\u5668\uff0c\u540c\u65f6\u8fd8\u4f1a\u628aPersistenceAnnotationBeanPostProcessor\u548cRequiredAnnotationBeanPostProcessor\u4e00\u5e76\u8fdb\u884c\u6ce8\u518c\uff0c\u53ef\u8c13\u4e00\u4e3e\u56db\u5f97\u554a\uff01"),(0,a.kt)("p",null,"\u4f7f\u7528\u76f8\u5e94\u7684\u6ce8\u89e3\u5bf9\u7ec4\u6210\u5e94\u7528\u7a0b\u5e8f\u7684\u76f8\u5173\u7c7b\u8fdb\u884c\u6807\u6ce8\u4e4b\u540e\uff0c classpath-scanning\u529f\u80fd\u53ef\u4ee5\u4ece\u67d0\u4e00\u9876\u5c42\u5305\uff08 base package\uff09\u5f00\u59cb\u626b\u63cf\u3002\u5f53\u626b\u63cf\u5230\u67d0\u4e2a\u7c7b\u6807\u6ce8\u4e86\u76f8\u5e94\u7684\u6ce8\u89e3\u4e4b\u540e\uff0c\u5c31\u4f1a\u63d0\u53d6\u8be5\u7c7b\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u6784\u5efa\u5bf9\u5e94\u7684BeanDefinition\uff0c\u7136\u540e\u628a\u6784\u5efa\u5b8c\u7684BeanDefinition\u6ce8\u518c\u5230\u5bb9\u5668\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<beans xmlns="http://www.springframework.org/schema/beans"\nxmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\nxmlns:context="http://www.springframework.org/schema/context"\nxsi:schemaLocation="http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context-2.5.xsd">\n<context:component-scan base-package="org.spring21"/>\n</beans>\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<context:component-scan>"),"\u5b83\u540c\u65f6\u5c06AutowiredAnnotationBeanPostProcessor\u548cCommonAnnotationBeanPostProcessor\u4e00\u5e76\u6ce8\u518c\u5230\u4e86\u5bb9\u5668\u4e2d\uff0c\u6240\u4ee5\uff0c\u4f9d\u8d56\u6ce8\u5165\u7684\u9700\u6c42\u5f97\u4ee5\u6ee1\u8db3\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u53c2\u8003\u8d44\u6599"),(0,a.kt)("ol",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ol"},"\u4e66\u7c4d\u540d\u79f0\uff1aSpring\u63ed\u79d8 \u4f5c\u8005\uff1a\u738b\u798f\u5f3a"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/spring-projects/spring-framework.git"},"https://github.com/spring-projects/spring-framework.git")))),(0,a.kt)("blockquote",null,(0,a.kt)("font",{color:"red"},"\u8f6c\u8f7d\u8bf7\u6ce8\u660e [\u539f\u6587\u5730\u5740](https://www.cnblogs.com/whalefall541/p/13341820.html)")))}u.isMDXComponent=!0}}]);