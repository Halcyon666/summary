"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["1516"],{36672:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>c,toc:()=>h,default:()=>x,metadata:()=>s,assets:()=>d,contentTitle:()=>o});var s=JSON.parse('{"id":"Java/Spring/Spring-Core","title":"Spring Core","description":"\u5728\u751F\u547D\u5468\u671F\u957F\u7684Bean\u4E2D\u6307\u5B9A\u4E00\u4E2A\u77ED\u7684","source":"@site/docs/01-Java/02-Spring/01-Spring-Core.mdx","sourceDirName":"01-Java/02-Spring","slug":"/Java/Spring/Spring-Core","permalink":"/summary/Java/Spring/Spring-Core","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/01-Java/02-Spring/01-Spring-Core.mdx","tags":[],"version":"current","lastUpdatedBy":"Halcyon666","lastUpdatedAt":1760292800000,"sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"netty","permalink":"/summary/Java/JavaBase/netty"},"next":{"title":"IoC\u6CE8\u5165\u65B9\u5F0F1","permalink":"/summary/Java/Spring/IoC Inject 1"}}'),i=r(47259),t=r(55511),a=r(85651),l=r(60145);let c={},o="Spring Core",d={},h=[{value:"\u5728\u751F\u547D\u5468\u671F\u957F\u7684Bean\u4E2D\u6307\u5B9A\u4E00\u4E2A\u77ED\u7684",id:"\u5728\u751F\u547D\u5468\u671F\u957F\u7684bean\u4E2D\u6307\u5B9A\u4E00\u4E2A\u77ED\u7684",level:2},{value:"\u5355\u4F8BBean\u4E2D\u7684\u6709\u539F\u578Bbean",id:"\u5355\u4F8Bbean\u4E2D\u7684\u6709\u539F\u578Bbean",level:2},{value:"<code>@Autowired</code> field\u5E95\u5C42\u5B9E\u73B0",id:"autowired-field\u5E95\u5C42\u5B9E\u73B0",level:2},{value:"static @Bean",id:"static-bean",level:2},{value:"<code>@Autowired</code>\u6216\u8005<code>@Resource</code>\u6307\u5B9A\u5B9E\u73B0\u7C7B",id:"autowired\u6216\u8005resource\u6307\u5B9A\u5B9E\u73B0\u7C7B",level:2},{value:"\u6784\u9020\u5668\u6CE8\u5165",id:"\u6784\u9020\u5668\u6CE8\u5165",level:2},{value:"\u4F7F\u7528AspectJ\u6CE8\u89E3\u8FDB\u884CAOP\u914D\u7F6E\u597D\u8FD8\u662Fxml",id:"\u4F7F\u7528aspectj\u6CE8\u89E3\u8FDB\u884Caop\u914D\u7F6E\u597D\u8FD8\u662Fxml",level:2},{value:"\u95ED\u5305 \u548C \u56DE\u8C03",id:"\u95ED\u5305-\u548C-\u56DE\u8C03",level:2},{value:"<code>@Configurable</code> <code>@Configuration</code>",id:"configurable-configuration",level:2},{value:"Spring Boot\u81EA\u5B9A\u4E49\u4E00\u4E2AEvent\u53D1\u5E03",id:"spring-boot\u81EA\u5B9A\u4E49\u4E00\u4E2Aevent\u53D1\u5E03",level:2}];function p(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"spring-core",children:"Spring Core"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5728\u751F\u547D\u5468\u671F\u957F\u7684bean\u4E2D\u6307\u5B9A\u4E00\u4E2A\u77ED\u7684",children:"\u5728\u751F\u547D\u5468\u671F\u957F\u7684Bean\u4E2D\u6307\u5B9A\u4E00\u4E2A\u77ED\u7684"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"xml\u914D\u7F6E\u65B9\u5F0F"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"proxy-target-class=true\uFF1A\u5F3A\u5236\u4F7F\u7528 CGLib \u4EE3\u7406"}),"\n",(0,i.jsx)(n.p,{children:"proxy-target-class=false\uFF1ASpring \u4F1A\u6839\u636E\u60C5\u51B5\u81EA\u52A8\u9009\u62E9\u4EE3\u7406\u65B9\u5F0F."}),"\n","\n",(0,i.jsx)(a.A,{color:"yellow",children:"\u4E24\u79CD\u4EE3\u7406\u65B9\u5F0F\u7684\u533A\u522B\uFF1A"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(a.A,{color:"yellow",children:"JDK \u52A8\u6001\u4EE3\u7406\uFF1A\u53EA\u80FD\u4EE3\u7406\u5B9E\u73B0\u4E86\u63A5\u53E3\u7684\u7C7B,\u57FA\u4E8E\u63A5\u53E3\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61,\u6027\u80FD\u8F83\u597D\uFF0C\u4F46\u6709\u63A5\u53E3\u9650\u5236"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(a.A,{color:"yellow",children:"CGLib \u4EE3\u7406\uFF1A\u53EF\u4EE5\u4EE3\u7406\u6CA1\u6709\u63A5\u53E3\u7684\u7C7B,\u901A\u8FC7\u7EE7\u627F\u76EE\u6807\u7C7B\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61,\u529F\u80FD\u66F4\u5F3A\u5927\uFF0C\u4F46\u6027\u80FD\u76F8\u5BF9\u8F83\u4F4E"}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"xml\u914D\u7F6E"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'\x3c!-- DefaultUserPreferences implements the UserPreferences interface --\x3e\n<bean id="userPreferences" class="com.stuff.DefaultUserPreferences" scope="session">\n	<aop:scoped-proxy proxy-target-class="false"/>\n</bean>\n<bean id="userManager" class="com.stuff.UserManager">\n	<property name="userPreferences" ref="userPreferences"/>\n</bean>\n'})})]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u6CE8\u89E3\u65B9\u5F0F"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:' // CGLIB \u65B9\u5F0F\n @Scope(value="request", proxyMode = ScopedProxyMode.TARGET_CLASS)\n\n // JDK\u52A8\u6001\u4EE3\u7406 \u65B9\u5F0F\n @Scope(value="request", proxyMode = ScopedProxyMode.INTERFACES)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5355\u4F8Bbean\u4E2D\u7684\u6709\u539F\u578Bbean",children:"\u5355\u4F8BBean\u4E2D\u7684\u6709\u539F\u578Bbean"}),"\n",(0,i.jsxs)(n.p,{children:["\u65B9\u6CD5\u4E00\uFF1A",(0,i.jsx)(n.code,{children:"lookup"}),",\u901A\u8FC7lookup\u4F1A\u81EA\u52A8\u53BB\u67E5\u627E\u7C7B\u578B\u4E00\u6837\u7684bean\u8FDB\u884C\u6CE8\u5165\uFF1B\u6CE8\u610F\u4F7F\u7528lookup\u7684\u65B9\u6CD5\u5FC5\u987B\u4E3A\u62BD\u8C61\u65B9\u6CD5\uFF1B"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Component("AAA")\n@Scope(value = "prototype")\npublic class AAA {\n    @Bean\n    public AAA createAAA(A a,B b) {\n        return this;\n    }\n}\n\n@Component\npublic abstract class ControllerManager {\n\n    private AAA aaa;\n\n    @Lookup\n    public abstract AAA createAAA() ;\n\n    public void test() {\n        this.aaa = createAAA();\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u65B9\u6CD5\u4E8C\uFF1A\u4F7F\u7528ObjectFactory\uFF0C",(0,i.jsx)(n.a,{href:"https://halcyon666.github.io/summary/Java/Spring/IoC%20Inject2/#%E9%80%9A%E8%BF%87objectfactory",children:"\u8BF7\u770B\u8FD9\u91CC"})]}),"\n",(0,i.jsxs)(n.h2,{id:"autowired-field\u5E95\u5C42\u5B9E\u73B0",children:[(0,i.jsx)(n.code,{children:"@Autowired"})," field\u5E95\u5C42\u5B9E\u73B0"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@Autowired"}),"\u5148\u4F1A\u6309\u7C7B\u578B\u6CE8\u5165\uFF0C\u5982\u679C\u6709\u591A\u4E2A\u7C7B\u578B\uFF0C\u5219\u6309\u7167\u540D\u5B57\u6CE8\u5165\uFF1B\u5728\u6E90\u7801\u4E2D\u8BBE\u7F6E\u503C\u662F\u901A\u8FC7\u53CD\u5C04\u5B9E\u73B0",(0,i.jsx)(n.code,{children:"org.springframework.beans.DirectFieldAccessor.FieldPropertyHandler#setValue"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Override\npublic void setValue(@Nullable Object value) throws Exception {\n	try {\n		ReflectionUtils.makeAccessible(this.field);\n		this.field.set(getWrappedInstance(), value);\n	} catch (IllegalAccessException ex) {\n		throw new InvalidPropertyException(getWrappedClass(), this.field.getName(),\n				"Field is not accessible", ex);\n	}\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"static-bean",children:"static @Bean"}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"static @Bean \u793A\u4F8B"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Configuration\npublic class InfraConfig {\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer placeholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n    @Bean\n    public static MyService myService(Dependency dep) {\n        // \u901A\u8FC7\u65B9\u6CD5\u53C2\u6570\u6CE8\u5165\n        return new MyService(dep);\n    }\n}\n"})})]}),"\n","\n",(0,i.jsx)(n.p,{children:"\u7279\u70B9\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65B9\u6CD5\u4E0D\u4F9D\u8D56\u914D\u7F6E\u7C7B\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u5728\u914D\u7F6E\u7C7B\u5B9E\u4F8B\u5316\u4E4B\u524D\uFF0C\u88AB\u8C03\u7528\u3002"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(a.A,{color:"red",children:"\u4E0D\u80FD\u4F7F\u7528\u914D\u7F6E\u7C7B\u5B57\u6BB5\u6CE8\u5165"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u9ED8\u8BA4\u4ECD\u662F",(0,i.jsx)(a.A,{color:"red",children:"\u5355\u4F8B"}),"\uFF0CSpring\u4F1A\u7F13\u5B58\u5BF9\u8C61\uFF0C\u4E0B\u6B21\u83B7\u53D6\u76F4\u63A5\u590D\u7528\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"\u9759\u6001\u65B9\u6CD5\u51CF\u5C11CGLIB\u5F00\u9500\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["\u53EA\u80FD\u4F7F\u7528\u6784\u9020\u65B9\u6CD5\u6216\u8005",(0,i.jsx)(n.code,{children:"ApplicationContext.getBean(...)"}),"\u6765\u83B7\u53D6\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["\u9002\u7528\u573A\u666F\uFF1A\n\u65E9\u57FA\u7840\u8BBE\u65BDBean \u5982PropetySourcePlaceholerConfigurer",(0,i.jsx)("br",{}),"\n\u907F\u514D\u5FAA\u73AF\u4F9D\u8D56",(0,i.jsx)("br",{}),"\n\u8F7B\u91CF\u521D\u59CB\u5316 \u4E0D\u4F7F\u7528CBLIB\uFF0C\u4E0D\u4F9D\u8D56\u914D\u7F6E\u7C7B\u5B57\u6BB5"]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7279\u6027"}),(0,i.jsx)(n.th,{children:"\u666E\u901A @Bean"}),(0,i.jsx)(n.th,{children:"static @Bean"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u914D\u7F6E\u7C7B\u4F9D\u8D56"}),(0,i.jsx)(n.td,{children:"\u4F9D\u8D56\u5B9E\u4F8B\u5316\u540E\u7684\u914D\u7F6E\u7C7B\u5B57\u6BB5"}),(0,i.jsx)(n.td,{children:"\u4E0D\u4F9D\u8D56\u914D\u7F6E\u7C7B\u5B9E\u4F8B"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u53EF\u7528\u5B57\u6BB5\u6CE8\u5165"}),(0,i.jsx)(n.td,{children:"\u2705 \u53EF\u4EE5"}),(0,i.jsx)(n.td,{children:"\u274C \u4E0D\u53EF\u4EE5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u8C03\u7528\u65F6\u673A"}),(0,i.jsx)(n.td,{children:"\u914D\u7F6E\u7C7B\u5B9E\u4F8B\u5316\u540E"}),(0,i.jsx)(n.td,{children:"\u914D\u7F6E\u7C7B\u5B9E\u4F8B\u5316\u524D"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Spring \u5355\u4F8B\u7F13\u5B58"}),(0,i.jsx)(n.td,{children:"\u2705 \u5355\u4F8B"}),(0,i.jsx)(n.td,{children:"\u2705 \u5355\u4F8B"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u9002\u7528\u573A\u666F"}),(0,i.jsx)(n.td,{children:"\u4E1A\u52A1 Bean\u3001\u666E\u901A\u4F9D\u8D56 Bean"}),(0,i.jsx)(n.td,{children:"\u57FA\u7840\u8BBE\u65BD Bean\u3001\u65E9\u671F\u521D\u59CB\u5316\u3001\u907F\u514D\u5FAA\u73AF\u4F9D\u8D56"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CGLIB \u4EE3\u7406\u5F00\u9500"}),(0,i.jsx)(n.td,{children:"\u6709"}),(0,i.jsx)(n.td,{children:"\u6CA1\u6709"})]})]})]}),"\n",(0,i.jsxs)(n.h2,{id:"autowired\u6216\u8005resource\u6307\u5B9A\u5B9E\u73B0\u7C7B",children:[(0,i.jsx)(n.code,{children:"@Autowired"}),"\u6216\u8005",(0,i.jsx)(n.code,{children:"@Resource"}),"\u6307\u5B9A\u5B9E\u73B0\u7C7B"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5728\u67D0\u4E00\u4E2A\u5B50\u5B9E\u73B0\u7C7B\u4E0A\u4F7F\u7528",(0,i.jsx)(n.code,{children:"@Primary"}),"\u6307\u5B9A\u8981\u6CE8\u5165\u7684Bean\u4E3A\u5F53\u524D\u7684bean, \u4EE5\u4E0B\u6CE8\u5165\u65B9\u5F0F\u4E8C\u9009\u4E00"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Primary\n@Component\npublic class ProtoBeanImpl implements ProtoBean{\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Primary\n@Bean\npublic ProtoBeanImpl protoBean(){\n    return new ProtoBeanImpl();\n}\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\u4F7F\u7528",(0,i.jsx)(n.code,{children:'@Qualifier("xxx")'}),"\u6CE8\u89E3 \u6307\u5B9A\u8981\u6CE8\u5165\u7684bean\u7684\u7C7B\u578B"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Qualifier("protoBeanImpl2")\n@Autowired\nprivate ProtoBean bean;\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Autowired\npublic SingleBean(@Qualifier("protoBeanImpl2") ProtoBean proto) {\n    this.protoBeanImpl2 = (ProtoBeanImpl2) proto;\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\u4F7F\u7528",(0,i.jsx)(n.code,{children:"@Resource"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Resource(name="protoBeanImpl2")\nprivate ProtoBean protoBean;\n// \u548C\u4E0B\u9762\u5199\u6CD5\u7B49\u540C\uFF0C\u4E0D\u6307\u5B9Aname\uFF0C\u9ED8\u8BA4\u4E3A\u53D8\u91CF\u540D\n@Resource\nprivate ProtoBean protoBeanImpl2;\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u6784\u9020\u5668\u6CE8\u5165",children:"\u6784\u9020\u5668\u6CE8\u5165"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["using constructor inject,do not need other annotation if all the properties is base type ,using\n",(0,i.jsx)(n.code,{children:'@ConstructorProperties({"xxx","xxx",...})'})," to inject the value"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["if just one constructor here, need' not ",(0,i.jsx)(n.code,{children:"@Autowired"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["only one multi-argument constructor can be set ",(0,i.jsx)(n.code,{children:"@Autowired(required = true)"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["if one more constructor are annotationed with ",(0,i.jsx)(n.code,{children:" @Autowired(required = false)"}),"\nThe constructor with the greatest number of dependencies that can be satisfied\nby matching beans in the Spring container will be chosen"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"@Autowired"}),", ",(0,i.jsx)(n.code,{children:"@Inject"}),", ",(0,i.jsx)(n.code,{children:"@Value"}),", and ",(0,i.jsx)(n.code,{children:"@Resource"})," annotations are handled by Spring\nBeanPostProcessor implementations"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4F7F\u7528aspectj\u6CE8\u89E3\u8FDB\u884Caop\u914D\u7F6E\u597D\u8FD8\u662Fxml",children:"\u4F7F\u7528AspectJ\u6CE8\u89E3\u8FDB\u884CAOP\u914D\u7F6E\u597D\u8FD8\u662Fxml"}),"\n",(0,i.jsx)(n.p,{children:"\u4F7F\u7528xml\u914D\u7F6E\u65F6\uFF0C\u5C06AOP\u914D\u7F6E\u5206\u6563\u4E86\uFF0C\u4E00\u90E8\u5206\u5728xml\u4E2D\uFF0C\u4E00\u90E8\u5206\u5728\u540E\u53F0\u7684class\u7C7B\u4E2D\u3002\u4E0D\u7B26\u5408DRY\u539F\u5219\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u4F7F\u7528",(0,i.jsx)(n.code,{children:"@AspectJ"}),"\uFF0C\u5219\u5C06\u6574\u4E2AAOP\u7684\u914D\u7F6E\u653E\u5728\u4E00\u4E2A\u914D\u7F6E\u7C7B\u4E2D\uFF0C",(0,i.jsx)(n.code,{children:"@AspectJ"}),"\u652F\u6301\u989D\u5916\u7684\u5B9E\u4F8B\u6A21\u578B\u66F4\u4E30\u5BCC\u7684\u7EC4\u5408\uFF0C\u662F\u6BCF\u4E2A\u5207\u9762\u6210\u4E3A\u4E00\u4E2A\u6A21\u578B\u5355\u5143\u3002\n\u540C\u65F6\uFF0C",(0,i.jsx)(n.code,{children:"@AspectJ"})," \u80FD\u88AB Spring AOP \u548CAspectJ \u89E3\u6790\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528AspectJ\u7684\u8BED\u6CD5\u53BB\u5B9E\u73B0\u66F4\u52A0\u590D\u6742\u7684\u5207\u9762\u903B\u8F91"]}),"\n",(0,i.jsx)(n.h2,{id:"\u95ED\u5305-\u548C-\u56DE\u8C03",children:"\u95ED\u5305 \u548C \u56DE\u8C03"}),"\n",(0,i.jsxs)(n.p,{children:["\u95ED\u5305:\u95ED\u5305\u548C\u533F\u540D\u51FD\u6570\u7ECF\u5E38\u88AB\u7528\u4F5C\u540C\u4E49\u8BCD\u3002\u4F46\u4E25\u683C\u6765\u8BF4\uFF0C\u533F\u540D\u51FD\u6570\u5C31\u662F\u5B57\u9762\u610F\u4E49\u4E0A\u6CA1\u6709\u88AB\u8D4B\u4E88\u540D\u79F0\u7684\u51FD\u6570\uFF0C\u800C\u95ED\u5305\u5219\u5B9E\u9645\u4E0A\u662F\u4E00\u4E2A\u51FD\u6570\u7684\u5B9E\u4F8B\uFF0C\u4E5F\u5C31\u662F\u8BF4\u662F\u5B58\u5728\u4E8E\u5185\u5B58\u91CC\u7684\u67D0\u4E2A\u7ED3\u6784\u4F53\u3002\u5982\u679C\u4ECE\u5B9E\u73B0\u4E0A\u6765\u770B\u7684\u8BDD\uFF0C\u533F\u540D\u51FD\u6570\u5982\u679C\u6CA1\u6709\u6355\u6349\u81EA\u7531\u53D8\u91CF\uFF0C\u90A3\u4E48\u5B83\u5176\u5B9E\u53EF\u4EE5\u88AB\u5B9E\u73B0\u4E3A\u4E00\u4E2A",(0,i.jsx)(n.strong,{children:"\u51FD\u6570\u6307\u9488"}),"\uFF0C\u6216\u8005\u76F4\u63A5\u5185\u8054\u5230\u8C03\u70B9\uFF0C\u5982\u679C\u5B83\u6355\u6349\u4E86\u81EA\u7531\u53D8\u91CF\u90A3\u4E48\u5B83\u5C06\u662F\u4E00\u4E2A\u95ED\u5305\uFF1B\u800C\u95ED\u5305\u5219\u610F\u5473\u7740\u540C\u65F6\u5305\u62EC\u51FD\u6570\u6307\u9488\u548C\u73AF\u5883\u4E24\u4E2A\u5173\u952E\u5143\u7D20\u3002",(0,i.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)",children:"\u53C2\u8003\u51FA\u5904"}),"\n",(0,i.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)",children:"Closure Sample"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface Adder {\n    int add(int x);\n}\n\npublic static Adder makeAdder(final int n) {\n    return new Adder() {\n        public int add(int x) {\n            return x + n;\n        }\n    };\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u56DE\u8C03\uFF1A\u5728\u8BA1\u7B97\u673A\u7A0B\u5E8F\u8BBE\u8BA1\u4E2D\uFF0C\u56DE\u8C03\u51FD\u6570\uFF0C\u6216\u7B80\u79F0\u56DE\u8C03\uFF08Callback \u5373call then back \u88AB\u4E3B\u51FD\u6570\u8C03\u7528\u8FD0\u7B97\u540E\u4F1A\u8FD4\u56DE\u4E3B\u51FD\u6570\uFF09\uFF0C\u662F\u6307\u901A\u8FC7\u53C2\u6570\u5C06\u51FD\u6570\u4F20\u9012\u5230\u5B83\u4EE3\u7801\u7684\uFF0C\u67D0\u4E00\u5757\u53EF\u6267\u884C\u4EE3\u7801\u7684\u5F15\u7528",(0,i.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0",children:"\u53C2\u8003\u51FA\u5904"}),"\n",(0,i.jsx)(n.a,{href:"https://stackoverflow.com/questions/19405421/what-is-a-callback-method-in-java-term-seems-to-be-used-loosely",children:"Callback Sample"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"class RemoteClass {\n\n    private OnChangeListener mOnChangeListener;\n\n    void makeSomeChanges() {\n        /*\n        .. do something here and call callback\n        */\n        mOnChangeListener.onChanged(this, 1);\n    }\n\n    public void setOnChangeListener(OnChangeListener listener) {\n        mOnChangeListener = listener;\n    }\n\n    public interface OnChangeListener {\n        void onChanged(RemoteClass remoteClass, int test);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'class Test {\n\n    public static void main(String[] args) {    \n        RemoteClass obj = new RemoteClass();\n        obj.setOnChangeListener(demoChanged);\n        obj.makeSomeChanges();\n    }\n	// this case remind me of spring framework lots of anonymous ObjectFactory call back\n    private static RemoteClass.OnChangeListener demoChanged = new RemoteClass.OnChangeListener() {\n        @Override\n        public void onChanged(RemoteClass remoteClass, int incoming) {\n            switch (incoming) {\n                case 1:\n                    System.out.println("I will take appropriate action!");\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// callback in springframework 4.3.x \n// @see org.springframework.beans.factory.support.AbstractBeanFactory#doGetBean\n// Create bean instance.\nif (mbd.isSingleton()) {\n	sharedInstance = getSingleton(beanName, new ObjectFactory<Object>() {\n		@Override\n		public Object getObject() throws BeansException {\n			try {\n				return createBean(beanName, mbd, args);\n			}\n			catch (BeansException ex) {\n				// Explicitly remove instance from singleton cache: It might have been put there\n				// eagerly by the creation process, to allow for circular reference resolution.\n				// Also remove any beans that received a temporary reference to the bean.\n				destroySingleton(beanName);\n				throw ex;\n			}\n		}\n	});\n	bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);\n}\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"configurable-configuration",children:[(0,i.jsx)(n.code,{children:"@Configurable"})," ",(0,i.jsx)(n.code,{children:"@Configuration"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@Configuration"})," \u662F\u914D\u7F6E\u7C7B"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@Configurable"})," \u5B83\u662F\u4E00\u4E2Abean\u6240\u4F9D\u8D56\u7684Aspect,\u5E76\u4E14\u4E0D\u88ABSpring\u7BA1\u7406\uFF0C\u4F46\u662F\u53EF\u4EE5\u81EA\u52A8\u6CE8\u5165"]}),"\n",(0,i.jsx)(n.h2,{id:"spring-boot\u81EA\u5B9A\u4E49\u4E00\u4E2Aevent\u53D1\u5E03",children:"Spring Boot\u81EA\u5B9A\u4E49\u4E00\u4E2AEvent\u53D1\u5E03"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["\u672C\u6848\u4F8B\u4F7F\u7528\u5230\u4E86",(0,i.jsx)(n.code,{children:"SpEL"}),"(Spring Express Language)\u8868\u8FBE\u5F0F"]})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5B9A\u4E49\u81EA\u5DF1\u7684\u4E8B\u4EF6",(0,i.jsx)(n.code,{children:"MyEvent"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"/**\n * @Author: WhaleFall541\n * @Date: 2021/7/12 21:38\n */\npublic class MyEvent extends ApplicationEvent {\n    private final String address;\n    private final String content;\n    public MyEvent(Object source, String address, String content) {\n        super(source);\n        this.address = address;\n        this.content = content;\n    }\n    // getter and setter omit\n    @Override\n    public String toString() {\n        return \"MyEvent{\" +\n                \"address='\" + address + '\\'' +\n                \", content='\" + content + '\\'' +\n                '}';\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\u81EA\u5B9A\u4E49\u4E8B\u4EF6\u53D1\u5E03\u7C7B",(0,i.jsx)(n.code,{children:"MyEventPublish"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'/**\n * @Author: WhaleFall541\n * @Date: 2021/7/12 21:41\n */\n@Component\npublic class MyEventPublish implements ApplicationEventPublisherAware {\n    private ApplicationEventPublisher publisher;\n\n    @Override\n    public void setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) {\n        this.publisher = applicationEventPublisher;\n    }\n\n    public void publish(String address, String content) {\n        if ("aaa".equals(address)) {\n            publisher.publishEvent(new MyEvent(this, address, content));\n            return;\n        }\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\u7F16\u5199\u4E8B\u4EF6\u76D1\u542C\u7C7B"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'/**\n * @Author: WhaleFall541\n * @Date: 2021/7/12 21:38\n */\n@Component\npublic class MyListener implements ApplicationEventPublisherAware {\n    private Log log = LogFactory.getLog(MyListener.class);\n\n    // SpEL #a0 \u4EE3\u8868\u7B2C\u4E00\u4E2A\u5165\u53C2\n    // @EventListener(condition = "#a0.content == \'foo\'")\n    \n    // SpEL #event  \u4EE3\u8868\u540D\u79F0\u76F8\u540C\u7684\u53C2\u6570\n    // @EventListener(condition = "#event.content == \'foo\'")\n    \n    // \u5982\u679C\u8981\u8868\u793A\u4E00\u4E2A\u5BF9\u8C61\u8981\u4F7F\u7528@XXX testMethod\u4E3A\u5BB9\u5668\u4E2Dbean\u7684\u540D\u5B57\n    @EventListener(condition = "@testMethod.test().equals(#a0.content)")\n    \n    // @EventListener({ContextStartedEvent.class, ContextRefreshedEvent.class})\n    public void process(MyEvent event) {\n        System.err.println("event test is ok " + event);\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"TestMethod"})," \u7C7B"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:' @Component\n public class TestMethod {\n     public List<String> test() {\n         List<String> al = new ArrayList();\n         al.add("foo");\n         al.add("fool");\n         return al;\n     }\n }\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"\u6D4B\u8BD5\u7C7B"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6CE8\u610F\u8981\u5F15\u5165\u4F9D\u8D56,\u6B64\u5904\u5217\u4E3E",(0,i.jsx)(n.code,{children:"gradle"}),"\u4F9D\u8D56\u914D\u7F6E ",(0,i.jsx)(n.code,{children:"testImplementation 'org.springframework.boot:spring-boot-starter-test'"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@SpringBootTest\nclass Charter1Tests implements ApplicationContextAware {\n@Test\n void testApplicationEvent() {\n     MyEventPublish bean = context.getBean(MyEventPublish.class);\n     bean.publish("aaa", "foo");\n }\n}\n'})}),"\n","\n",(0,i.jsx)(l.A,{})]})}function x(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},85651:function(e,n,r){r.d(n,{A:()=>i});var s=r(47259);function i({color:e,background:n,className:r,children:i}){return(0,s.jsx)("span",{className:r,style:{color:e,background:n,padding:n?"0 0.2em":void 0,borderRadius:n?"0.2em":void 0},children:i})}r(96363)}}]);