"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["5597"],{47145:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,toc:()=>h,default:()=>p,metadata:()=>i,assets:()=>d,contentTitle:()=>o});var i=JSON.parse('{"id":"Frontend/react","title":"Basic React","description":"\u65B0\u5EFAreact\u9879\u76EE","source":"@site/docs/02-Frontend/15-react.mdx","sourceDirName":"02-Frontend","slug":"/Frontend/react","permalink":"/summary/Frontend/react","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/02-Frontend/15-react.mdx","tags":[],"version":"current","lastUpdatedBy":"Halcyon666","lastUpdatedAt":1761841174000,"sidebarPosition":15,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Docusaurus","permalink":"/summary/Frontend/docusaurus"},"next":{"title":"A Robust Draggable Element","permalink":"/summary/Frontend/Drag and Drop Container Movement"}}'),r=t(47259),s=t(55511),a=t(85651),c=t(60145);let l={},o="Basic React",d={},h=[{value:"\u65B0\u5EFAreact\u9879\u76EE",id:"\u65B0\u5EFAreact\u9879\u76EE",level:2},{value:"spread and destruturing array or object",id:"spread-and-destruturing-array-or-object",level:2},{value:"Updating a nested object",id:"updating-a-nested-object",level:2},{value:"\u7BAD\u5934\u51FD\u6570",id:"\u7BAD\u5934\u51FD\u6570",level:2},{value:"react\u6570\u636E\u904D\u5386\u6307\u5B9Akey",id:"react\u6570\u636E\u904D\u5386\u6307\u5B9Akey",level:2},{value:"\u5411react\u7EC4\u4EF6\u4F20\u9012\u53C2\u6570",id:"\u5411react\u7EC4\u4EF6\u4F20\u9012\u53C2\u6570",level:2},{value:"useState function",id:"usestate-function",level:2},{value:"onClick\u4F20\u503C\u51FD\u6570\u540Dor\u533F\u540D\u51FD\u6570",id:"onclick\u4F20\u503C\u51FD\u6570\u540Dor\u533F\u540D\u51FD\u6570",level:2},{value:"pass parameter function",id:"pass-parameter-function",level:3},{value:"pass a closure function",id:"pass-a-closure-function",level:3},{value:"\u5982\u4F55\u52A8\u6001\u8BBE\u7F6E\u53D8\u91CF\u540D\u4E3Akey\u503C",id:"\u5982\u4F55\u52A8\u6001\u8BBE\u7F6E\u53D8\u91CF\u540D\u4E3Akey\u503C",level:2},{value:"tsx\u80FD\u6E32\u67D3\u7684\u7C7B\u578B",id:"tsx\u80FD\u6E32\u67D3\u7684\u7C7B\u578B",level:2},{value:"useEffect function",id:"useeffect-function",level:2},{value:"useRef",id:"useref",level:2},{value:"how to clean resouce in useEffect",id:"how-to-clean-resouce-in-useeffect",level:2},{value:"<code>Array.from</code>",id:"arrayfrom",level:2},{value:"<code>Array.every</code>",id:"arrayevery",level:2},{value:"lazy Initialization for useState",id:"lazy-initialization-for-usestate",level:2}];function u(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"basic-react",children:"Basic React"})}),"\n",(0,r.jsx)(n.h2,{id:"\u65B0\u5EFAreact\u9879\u76EE",children:"\u65B0\u5EFAreact\u9879\u76EE"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"npm create vite@latest my-react-app\n\ncd my-react-app\nnpm install\nnpm run dev\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://s2.loli.net/2025/10/07/hW3iwvBKxSORsHf.png",alt:""})}),"\n",(0,r.jsx)(n.h2,{id:"spread-and-destruturing-array-or-object",children:"spread and destruturing array or object"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"spread array"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const arr = [1, 2, 3];\nconst copy = [...arr];\nconsole.log(copy); // [1, 2, 3]\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"spread object"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const obj = { a: 1, b: 2 };\nconst copy = { ...obj };\nconsole.log(copy); // { a: 1, b: 2 }\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"array destruturing"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const [a, b] = [10, 20];\nconsole.log(a); // 10\nconsole.log(b); // 20\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"object destruturing"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'const person = { name: "Alice", age: 25 };\nconst { name, age } = person;\nconsole.log(name, age); // Alice 25\n'})}),"\n",(0,r.jsx)(n.h2,{id:"updating-a-nested-object",children:"Updating a nested object"}),"\n",(0,r.jsx)(n.p,{children:"consider the object construct like this,"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"const [person, setPerson] = useState({\n  name: 'Niki de Saint Phalle',\n  artwork: {\n    title: 'Blue Nana',\n    city: 'Hamburg',\n    image: 'https://i.imgur.com/Sd1AgUOm.jpg',\n  }\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"you can update immutable object like this way,"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const nextArtwork = { ...person.artwork, city: 'New Delhi' };\nconst nextPerson = { ...person, artwork: nextArtwork };\nsetPerson(nextPerson);\n"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"setPerson({\n  ...person, // Copy other fields\n  artwork: { // but replace the artwork\n    ...person.artwork, // with the same one\n    city: 'New Delhi' // but in New Delhi!\n  }\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["or use ",(0,r.jsx)(n.code,{children:"useImmer"})," instead of ",(0,r.jsx)(n.code,{children:"useState"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["another way you can use ",(0,r.jsx)(n.code,{children:"use-immer"})," library, handle deeper nested object."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"  const [person, updatePerson] = useImmer({\n    name: 'Niki de Saint Phalle',\n    artwork: {\n      title: 'Blue Nana',\n      city: 'Hamburg',\n      image: 'https://i.imgur.com/Sd1AgUOm.jpg',\n    }\n  });\n\n  function handleNameChange(e) {\n    updatePerson(draft => {\n      draft.name = e.target.value;\n    });\n  }\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://react.dev/learn/updating-objects-in-state",children:"usage from official website"})}),"\n",(0,r.jsx)(n.h2,{id:"\u7BAD\u5934\u51FD\u6570",children:"\u7BAD\u5934\u51FD\u6570"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u5199\u6CD5"}),(0,r.jsx)(n.th,{children:"\u542B\u4E49"}),(0,r.jsxs)(n.th,{children:["\u662F\u5426\u9700\u8981\u5199 ",(0,r.jsx)(n.code,{children:"return"})]})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(param) => ( expression )"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"\u9690\u5F0F\u8FD4\u56DE"}),"\uFF0C\u81EA\u52A8\u8FD4\u56DE\u62EC\u53F7\u91CC\u7684\u8868\u8FBE\u5F0F\u7ED3\u679C"]}),(0,r.jsx)(n.td,{children:"\u274C \u4E0D\u9700\u8981"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(param) => { statement }"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"\u51FD\u6570\u4F53\u8BED\u53E5\u5757"}),"\uFF0C\u4E0D\u4F1A\u81EA\u52A8\u8FD4\u56DE\uFF0C\u9700\u8981\u624B\u52A8\u5199 ",(0,r.jsx)(n.code,{children:"return"})]}),(0,r.jsx)(n.td,{children:"\u2705 \u9700\u8981"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"react\u6570\u636E\u904D\u5386\u6307\u5B9Akey",children:"react\u6570\u636E\u904D\u5386\u6307\u5B9Akey"}),"\n",(0,r.jsx)(n.p,{children:"key \u53EA\u80FD\u7528\u5728 \u7236\u7EC4\u4EF6 map \u6E32\u67D3\u5217\u8868\u7684\u5143\u7D20\u4E0A\uFF0C\u800C\u4E0D\u662F\u5B50\u7EC4\u4EF6\u5185\u90E8\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Need key component"  showLineNumbers {9-12}',children:'export default function Contact({\n  img,\n  imgAlt,\n  name,\n  phoneNumber,\n  email,\n}: ContactInfo) {\n  return (\n    //\u8FD9\u662F \u4E0D\u5BF9\u7684\uFF0C\u56E0\u4E3A key \u53EA\u80FD\u7528\u5728 \u7236\u7EC4\u4EF6 map \n    // \u6E32\u67D3\u5217\u8868\u7684\u5143\u7D20\u4E0A\uFF0C\u800C\u4E0D\u662F\u5B50\u7EC4\u4EF6\u5185\u90E8\u3002\n    // <article className="contact-card" key={id}>\n    <article className="contact-card">\n      <img src={img} alt={imgAlt} />\n      <h3>{name}</h3>\n      <div className="info-group">\n        <img src={phoneIcon} alt="phone icon" />\n        <p>{phoneNumber}</p>\n      </div>\n      <div className="info-group">\n        <img src={mailIcon} alt="mail icon" />\n        <p>{email}</p>\n      </div>\n    </article>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-txs",metastring:'title="Parent component pass key" showLineNumbers {5}',children:'function App() {\n  return (\n    <div className="contacts">\n      {contacts.map((contact) => (\n        <Contact key={contact.id} {...contact} />\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5411react\u7EC4\u4EF6\u4F20\u9012\u53C2\u6570",children:"\u5411react\u7EC4\u4EF6\u4F20\u9012\u53C2\u6570"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Contact.txs" showLineNumbers {5-11}',children:'import phoneIcon from "./images/phone-icon.png";\nimport mailIcon from "./images/mail-icon.png";\nimport type ContactInfo from "./ContactInfo";\n\nexport default function Contact({\n  img,\n  imgAlt,\n  name,\n  phoneNumber,\n  email,\n}: ContactInfo) {\n  return (\n    //\u8FD9\u662F \u4E0D\u5BF9\u7684\uFF0C\u56E0\u4E3A key \u53EA\u80FD\u7528\u5728 \u7236\u7EC4\u4EF6 map \u6E32\u67D3\u5217\u8868\u7684\u5143\u7D20\u4E0A\uFF0C\u800C\u4E0D\u662F\u5B50\u7EC4\u4EF6\u5185\u90E8\u3002\n    // <article className="contact-card" key={id}>\n    <article className="contact-card">\n      <img src={img} alt={imgAlt} />\n      <h3>{name}</h3>\n      <div className="info-group">\n        <img src={phoneIcon} alt="phone icon" />\n        <p>{phoneNumber}</p>\n      </div>\n      <div className="info-group">\n        <img src={mailIcon} alt="mail icon" />\n        <p>{email}</p>\n      </div>\n    </article>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="App.tsx" showLineNumbers {8}',children:'import "./index.css";\nimport Contact from "./Contact";\nimport { contacts } from "./ContactInfo";\nfunction App() {\n  return (\n    <div className="contacts">\n      {contacts.map((contact) => (\n        <Contact key={contact.id} {...contact} />\n      ))}\n    </div>\n  );\n}\nexport default App;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"usestate-function",children:"useState function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Main.tsx" showLineNumbers {1,5-9,16}',children:'import { useState } from "react";\n\nexport default function Main() {\n  // Array destructuring\n  const [ingredients, setIngredients] = useState<string[]>([\n    "Chicken",\n    "Oregano",\n    "Tomatoes",\n  ]);\n  const handleSubmit: React.FormEventHandler<HTMLFormElement> = (event) => {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    // the key is the name of input\n    const newIngredient = formData.get("ingredient");\n    if (typeof newIngredient === "string" && newIngredient?.trim() !== "") {\n      setIngredients((prev) => [...prev, newIngredient]);\n    } else {\n      console.warn("No ingredient provided");\n    }\n  };\n\n  return (\n    <main>\n      <form className="add-ingredient-form" onSubmit={handleSubmit}>\n        <input\n          type="text"\n          name="ingredient"\n          aria-label="Add ingredient"\n          placeholder="e.g. oregano"\n        ></input>\n        <button>Add ingredient</button>\n      </form>\n      <h1>Ingrredients on hand:</h1>\n      <ul className="ingredient-ul">\n        {ingredients.map((ingredient) => (\n          <li key={ingredient}>{ingredient}</li>\n        ))}\n      </ul>\n    </main>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"onclick\u4F20\u503C\u51FD\u6570\u540Dor\u533F\u540D\u51FD\u6570",children:"onClick\u4F20\u503C\u51FD\u6570\u540Dor\u533F\u540D\u51FD\u6570"}),"\n",(0,r.jsxs)(n.p,{children:["Version 1 ",(0,r.jsx)(n.code,{children:"(onClick={getRecipe})"})]}),"\n",(0,r.jsx)(n.p,{children:"You\u2019re giving React a function reference.\nReact will call getRecipe() only when the button is clicked."}),"\n",(0,r.jsx)(n.p,{children:"This is the simplest and most efficient form \u2014 no new function is created on every render."}),"\n",(0,r.jsxs)(n.p,{children:["Version 2 ",(0,r.jsx)(n.code,{children:"(onClick={() => getRecipe()})"})]}),"\n",(0,r.jsx)(n.p,{children:"You\u2019re creating a new anonymous function on each render that calls getRecipe() inside it."}),"\n",(0,r.jsx)(n.p,{children:"It still works \u2014 React will call your wrapper function on click, which in turn calls getRecipe() \u2014 but it\u2019s one extra layer of indirection and (very slightly) less efficient."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"When to use"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onClick={changeToHeld}"})}),(0,r.jsx)(n.td,{children:"Default, most common,or closure function"}),(0,r.jsx)(n.td,{children:"Pass function directly"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onClick={() => changeToHeld(id)}"})}),(0,r.jsx)(n.td,{children:"When you need to wrap logic or pass arguments"}),(0,r.jsx)(n.td,{children:"Creates a new function every render"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"pass-parameter-function",children:"pass parameter function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app.tsx" ',children:'import React, { useState } from "react";\nimport "./index.css";\nimport Die from "./Die";\nimport { nanoid } from "nanoid/non-secure";\n\nexport interface DiceProp {\n  value: number;\n  isHeld: boolean;\n  id: string;\n}\n\nconst App: React.FC = () => {\n  const generateDice = () =>\n    Array.from({ length: 10 }, () => ({\n      value: Math.ceil(Math.random() * 6),\n      isHeld: false,\n      id: nanoid(),\n    }));\n  const [dice, setDice] = useState<DiceProp[]>(generateDice());\n  // highlight-start\n  const changeToHeld = (id: string) =>\n    setDice((prevDice) =>\n      prevDice.map((die) => (die.id === id ? { ...die, isHeld: true } : die))\n    );\n  // highlight-end\n  const diceElements = dice.map((diceProp) => (\n    // highlight-next-line\n    <Die key={diceProp.id} changeToHeld={changeToHeld} die={diceProp} />\n  ));\n\n  const rollDice = () => {\n    setDice(generateDice());\n  };\n\n  return (\n    <main>\n      <div className="dice-container">{diceElements}</div>\n      <button className="roll-button" onClick={rollDice}>\n        Roll\n      </button>\n    </main>\n  );\n};\n\nexport default App;\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="Die.tsx"',children:'import type { DiceProp } from "./App";\n\n/**\n * Recommendation\n * For scalable apps / larger state management: Option 1 is preferred \n * because it separates state (data) from behavior (actions), which aligns with React best practices.\n */\nconst Die: React.FC<{ die: DiceProp; changeToHeld: (id: string) => void }> = ({\n  die,\n  changeToHeld,\n}) => {\n  const { value, isHeld, id } = die;\n  return (\n    <button\n      className={isHeld ? "held" : "notHeld"}\n      // highlight-next-line\n      onClick={() => changeToHeld(id)}\n    >\n      {value}\n    </button>\n  );\n};\n\nexport default Die;\n\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pass-a-closure-function",children:"pass a closure function"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="App.tsx"',children:'import React, { useState } from "react";\nimport "./index.css";\nimport Die from "./Die";\nimport { nanoid } from "nanoid/non-secure";\n\nexport interface DiceProp {\n  value: number;\n  isHeld: boolean;\n  id: string;\n}\n\nconst App: React.FC = () => {\n  const generateDice = () =>\n    Array.from({ length: 10 }, () => ({\n      value: Math.ceil(Math.random() * 6),\n      isHeld: false,\n      id: nanoid(),\n    }));\n  const [dice, setDice] = useState<DiceProp[]>(generateDice());\n  const changeToHeld = (id: string) =>\n    setDice((prevDice) =>\n      prevDice.map((die) => (die.id === id ? { ...die, isHeld: true } : die))\n    );\n\n  const diceElements = dice.map((diceProp) => (\n    <Die\n      key={diceProp.id}\n      // closure function\n      // highlight-next-line\n      changeToHeld={() => changeToHeld(diceProp.id)}\n      die={diceProp}\n    />\n  ));\n\n  const rollDice = () => {\n    setDice(generateDice());\n  };\n\n  return (\n    <main>\n      <div className="dice-container">{diceElements}</div>\n      <button className="roll-button" onClick={rollDice}>\n        Roll\n      </button>\n    </main>\n  );\n};\n\nexport default App;\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import type { DiceProp } from "./App";\n\nconst Die: React.FC<{ die: DiceProp; changeToHeld: () => void }> = ({\n  die,\n  changeToHeld,\n}) => {\n  const { value, isHeld } = die;\n  return (\n      // highlight-next-line\n    <button className={isHeld ? "held" : "notHeld"} onClick={changeToHeld}>\n      {value}\n    </button>\n  );\n};\n\nexport default Die;\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5982\u4F55\u52A8\u6001\u8BBE\u7F6E\u53D8\u91CF\u540D\u4E3Akey\u503C",children:"\u5982\u4F55\u52A8\u6001\u8BBE\u7F6E\u53D8\u91CF\u540D\u4E3Akey\u503C"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="\u9519\u8BEF\u793A\u8303"',children:"const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n  const { name, value } = event.currentTarget;\n  // highlight-next-line\n  setMeme((prev) => ({ ...prev, name: value }));\n};\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="\u6B63\u786E\u7528\u6CD5\u793A\u8303"',children:"const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n  const { name, value } = event.currentTarget;\n  // highlight-next-line\n  setMeme((prev) => ({ ...prev, [name]: value }));\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"tsx\u80FD\u6E32\u67D3\u7684\u7C7B\u578B",children:"tsx\u80FD\u6E32\u67D3\u7684\u7C7B\u578B"}),"\n","\n",(0,r.jsxs)(n.p,{children:["React \u7684 JSX \u8868\u8FBE\u5F0F ",(0,r.jsx)(n.code,{children:"{ ... }"})," \u91CC\uFF0C\u53EA\u80FD\u76F4\u63A5\u6E32\u67D3\u4EE5\u4E0B\u7C7B\u578B\uFF1A"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5B57\u7B26\u4E32 (string)"}),"\n",(0,r.jsx)(n.li,{children:"\u6570\u5B57 (number)"}),"\n",(0,r.jsx)(n.li,{children:"\u5E03\u5C14\u503C (boolean)"}),"\n",(0,r.jsx)(n.li,{children:"React \u5143\u7D20 (JSX \u5143\u7D20)"}),"\n",(0,r.jsx)(n.li,{children:"\u6570\u7EC4\uFF08\u5305\u542B\u4EE5\u4E0A\u7C7B\u578B\uFF09"}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(a.A,{color:"red",children:"\u4E0D\u80FD\u6E32\u67D3\u5BF9\u8C61,\u5BF9\u8C61\u6570\u7EC4"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"useeffect-function",children:"useEffect function"}),"\n",(0,r.jsxs)(n.p,{children:["when calling useEffect, depends on the dependents in ",(0,r.jsx)(n.code,{children:"[]"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"That's look this example."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="infinite loop"',children:'import React from "react";\n\nexport default function App() {\n  const [starWarsData, setStarWarsData] = React.useState({});\n  const [count, setCount] = React.useState(0);\n\n  console.log("Rendered!");\n\n  React.useEffect(() => {\n    console.log("useEffect runs");\n    fetch("https://swapi.dev/api/people/1")\n      .then((res) => res.json())\n      .then((data) => setStarWarsData(data)\n      );\n      // highlight-next-line\n  }, [starWarsData]);\n\n  return (\n    <div>\n      <h2>The count is {count}</h2>\n      <button onClick={() => setCount((prevCount) => prevCount + 1)}>\n        Add\n      </button>\n      <pre>{JSON.stringify(starWarsData, null, 2)}</pre>\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Each time setStarWarsData(data) runs, React receives a new ",(0,r.jsx)(n.code,{children:"{ ... }"})," object.\nEven if the JSON content is identical, it\u2019s a different object reference,\nso React thinks the dependency changed and re-runs the effect \u2014 causing an infinite loop."]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"corret usage"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'React.useEffect(() => {\n  console.log("useEffect runs");\n  fetch("https://swapi.dev/api/people/1")\n    .then((res) => res.json())\n    .then((data) =>\n      setStarWarsData(data)\n    );\n    // highlight-next-line\n}, []);\n'})})]}),"\n",(0,r.jsx)(n.p,{children:"What happens when visit the page first time?"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-log",metastring:'title="Console Output"',children:"Rendered!\nApp.tsx:11 useEffect runs\nApp.tsx:8 Rendered!\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Stage"}),(0,r.jsx)(n.th,{children:"Trigger"}),(0,r.jsx)(n.th,{children:"What happens"}),(0,r.jsx)(n.th,{children:"Console output"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Initial mount"}),(0,r.jsx)(n.td,{children:"Component function executes"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Rendered!"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"After mount"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"useEffect"})," callback runs"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"useEffect runs"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"State updated"}),(0,r.jsx)(n.td,{children:"Component re-renders with new data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Rendered!"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"useref",children:"useRef"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="FocusInput"',children:'import { useRef } from "react";\nexport default function FocusInput() {\n  // highlight-next-line\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleFocus = () => {\n    // current \u53EF\u80FD\u4E3A null\uFF0C\u56E0\u6B64\u9700\u8981\u8FDB\u884C\u975E\u7A7A\u68C0\u67E5\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  return (\n    <div>\n      <input ref={inputRef} type="text" placeholder="Click the button to focus me" />\n      <button onClick={handleFocus}>Focus Input</button>\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"how-to-clean-resouce-in-useeffect",children:"how to clean resouce in useEffect"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="WindowTracker"',children:'import { useEffect, useState } from "react";\n\nexport default function WindowTracker() {\n  const [windowWidth, setWindownWidth] = useState<number>(window.innerWidth);\n  useEffect(() => {\n    const watchWindowWidth = () => {\n      console.log("resized!");\n      setWindownWidth(window.innerWidth);\n    };\n    window.addEventListener("resize", watchWindowWidth);\n    // cleaning up what creating before\n    // highlight-start\n    return () => {\n      window.removeEventListener("resize", watchWindowWidth);\n      console.log("cleaning up");\n    };\n    // highlight-end\n  }, []);\n  return <h1>Window width: {windowWidth}</h1>;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"arrayfrom",children:(0,r.jsx)(n.code,{children:"Array.from"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// The _ means: \u201CIgnore the element, just use the index.\u201D\nArray.from({ length: 3 }, (_, i) => i * 2);\n// \u2192 [0, 2, 4]\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5F53\u6CA1\u6709\u53C2\u6570\u9700\u8981\u88AB\u4F7F\u7528\u65F6\uFF0C\u4F7F\u7528\u4E0D\u5199\u53C2\u6570."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"Array.from({ length: 10 }, () => Math.ceil(Math.random() * 6))\n"})}),"\n",(0,r.jsx)(n.h2,{id:"arrayevery",children:(0,r.jsx)(n.code,{children:"Array.every"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"array.every(callback(element, index, array), thisArg?)"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"with callback only"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="check all elements meet condition"',children:"const threshold = { limit: 10 };\nconst numbers = [3, 5, 9];\n\n// Arrow functions do NOT bind `this`, so `thisArg` is ignored.\nconst allBelowLimit = numbers.every((num) => num < threshold.limit);\n\nconsole.log(allBelowLimit); // true\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"with callback and thisArg"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="check all elements meet condition with thisArg"',children:"const threshold = 5;\nconst numbers = [6, 7, 8, 9, 10];\nconst allAboveThreshold = numbers.every(function (num) {\n  return num > this.threshold;\n}, { threshold });\nconsole.log(allAboveThreshold); // true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"lazy-initialization-for-usestate",children:"lazy Initialization for useState"}),"\n",(0,r.jsxs)(n.p,{children:["1\uFE0F\u20E3 Lazy initialization: ",(0,r.jsx)(n.code,{children:"useState(() => generateDice())"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Here, you pass a function to useState."}),"\n",(0,r.jsx)(n.li,{children:"React will call that function once \u2014 only on the initial render."}),"\n",(0,r.jsx)(n.li,{children:"The return value of the function becomes the initial state."}),"\n",(0,r.jsx)(n.li,{children:"After that, React never calls the function again, because it already has the state stored internally."}),"\n",(0,r.jsx)(n.li,{children:"Benefit: Useful when computing the initial state is expensive."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Explain:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Component mounts \u2192 React calls () => generateDice()."}),"\n",(0,r.jsx)(n.li,{children:"The return value (DiceProp[]) is stored as the state."}),"\n",(0,r.jsx)(n.li,{children:"Component re-renders \u2192 React reuses the stored state, function is never called again."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["2\uFE0F\u20E3 Non-lazy way:\n",(0,r.jsx)(n.code,{children:"const [dice, setDice] = useState(generateDice());"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Here, you call generateDice() immediately and pass its return value to useState."}),"\n",(0,r.jsx)(n.li,{children:"This happens every render of the component, but only the first value matters for initialization."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Explain:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Component renders \u2192 generateDice() runs \u2192 returns array \u2192 React stores as state."}),"\n",(0,r.jsx)(n.li,{children:"Component re-renders later \u2192 generateDice() still runs, but React ignores it, because the state is already managed internally."}),"\n",(0,r.jsx)(n.li,{children:"Problem: If generateDice() is expensive, you waste CPU calling it unnecessarily on every render."}),"\n"]}),"\n","\n",(0,r.jsx)(c.A,{})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},85651:function(e,n,t){t.d(n,{A:()=>r});var i=t(47259);function r({color:e,background:n,className:t,children:r}){return(0,i.jsx)("span",{className:t,style:{color:e,background:n,padding:n?"0 0.2em":void 0,borderRadius:n?"0.2em":void 0},children:r})}t(96363)}}]);