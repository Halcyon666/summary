"use strict";(self.webpackChunksummary=self.webpackChunksummary||[]).push([["9647"],{41082:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>o,toc:()=>d,default:()=>l,metadata:()=>a,assets:()=>c,contentTitle:()=>r});var a=JSON.parse('{"id":"Frontend/react/react-problems","title":"React Problem","description":"TypeScript type assertion","source":"@site/docs/02-Frontend/01-react/04-react-problems.mdx","sourceDirName":"02-Frontend/01-react","slug":"/Frontend/react/react-problems","permalink":"/summary/Frontend/react/react-problems","draft":false,"unlisted":false,"editUrl":"https://github.com/Halcyon666/summary/edit/main/docs/02-Frontend/01-react/04-react-problems.mdx","tags":[],"version":"current","lastUpdatedBy":"Halcyon666","lastUpdatedAt":1764934283000,"sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"React TypeScript Naming Conventions","permalink":"/summary/Frontend/react/react-naming-conventions"},"next":{"title":"Vue \u57FA\u78401","permalink":"/summary/Frontend/vue/vue-grammer-one"}}'),s=n(47259),i=n(68764);let o={},r="React Problem",c={},d=[{value:"TypeScript type assertion",id:"typescript-type-assertion",level:2},{value:"useAppDispatch Called Incorrectly: Expected 0 Arguments, Got 1",id:"useappdispatch-called-incorrectly-expected-0-arguments-got-1",level:2}];function p(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"react-problem",children:"React Problem"})}),"\n",(0,s.jsx)(t.h2,{id:"typescript-type-assertion",children:"TypeScript type assertion"}),"\n",(0,s.jsx)(t.p,{children:"Property 'reaction' does not exist on type 'PostData'."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/Halcyon666/react-daily-learn/commit/26819a23ea2730f03fd3ada4ce936de97fa81c28",children:"fix commit"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="ReactionButtons.tsx"',children:'import { useAppDispatch } from "../../hooks";\nimport { reactionAdded, type PostData, type Reactions } from "./postsSlice";\n\nconst reactionEmoji: Record<keyof Reactions, string> = {\n  thumbsUp: "\u{1F44D}",\n  wow: "\u{1F62E}",\n  heart: "\u2764\uFE0F",\n  rocket: "\u{1F680}",\n  coffee: "\u2615",\n};\n\nconst ReactionButtons = ({ id, reactions }: PostData) => {\n  const dispatch = useAppDispatch();\n  const reactionButtons = Object.entries(reactionEmoji).map(([name, emoji]) => {\n    // highlight-next-line\n    const reaction = name as keyof Reactions;\n    return (\n      <button\n        key={name}\n        className="reactionButton"\n        onClick={() => dispatch(reactionAdded({ postId: id, reaction }))}\n      >\n        {emoji} {reactions[reaction]}\n      </button>\n    );\n  });\n  return <div>{reactionButtons}</div>;\n};\n\nexport default ReactionButtons;\n\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/Halcyon666/react-daily-learn/commit/ac8e9cbc1b28c3da48ba97dc4146a15194552375",children:"fix commit"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="postsSlice.ts"',children:'\nconst postsSlice = createSlice({\n  name: "postSlice",\n  initialState,\n  reducers: {\n    postAdded: {\n      reducer: (state, action: PayloadAction<PostData>) => {\n        state.push(action.payload);\n      },\n      prepare: (title: string, content: string, userId: string) => {\n        return {\n          payload: {\n            id: nanoid(),\n            title,\n            content,\n            userId,\n            date: new Date().toISOString(),\n            reactions: {\n              thumsUp: 0,\n              wow: 0,\n              heart: 0,\n              rocket: 0,\n              coffee: 0,\n            },\n          },\n        };\n      },\n    },\n\n    // The issue is that reactionAdded is expecting a different payload type. \n    // It needs id and reaction, not the full PostData. Here\'s the corrected code:\n    reactionAdded: (\n      state,\n      // highlight-next-line\n      action: PayloadAction<{ postId: string; reaction: keyof Reactions }>\n    ) => {\n      const { postId, reaction } = action.payload;\n      const existingPost = state.find((post) => post.id === postId);\n      if (existingPost) {\n        existingPost.reactions[reaction]++;\n      }\n    },\n  },\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"useappdispatch-called-incorrectly-expected-0-arguments-got-1",children:"useAppDispatch Called Incorrectly: Expected 0 Arguments, Got 1"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-txs",children:'// highlight-next-line\nconst dispatch = useAppDispatch();\nconst savePost = () => {\n    if (title && content) {\n        dispatch(postAdded({ id: nanoid(), title, content }));\n        setContent("");\n        setTitle("");\n    }\n};\n'})})]})}function l(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);